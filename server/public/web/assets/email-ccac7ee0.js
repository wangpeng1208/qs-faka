import{g as S,e as T,c as k}from"./config-716c863e.js";import{M as n}from"./index-6b6fbd51.js";import{I as w}from"./index-757197b9.js";import{F as P,a as U}from"./index-0fff1870.js";import{B as q}from"./index-c63cfed1.js";import{S as x}from"./index-0fc44882.js";import{C as B}from"./index-c2a11f34.js";import{d as E,A as F,r as u,l as c,V as b,W as t,M as a,a4 as R,_ as p}from"./vue-d500b9b9.js";import"./libs-d79b82a8.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./dep-cc1906a8-b100bfdb.js";import"./index-e205a427.js";import"./useLengthLimit-14a00f39.js";import"./browse-35e2443f.js";import"./close-circle-filled-3424a47b.js";import"./dep-0742ae64-0833915c.js";import"./form-model-0fc8dc05.js";import"./_baseSet-c1826ef2.js";import"./isNil-c75b1b34.js";const I={name:"WebEmail"},me=E({...I,setup(N){const l=F({email_name:"",email_smtp:"",email_port:"",email_user:"",email_pass:""});(async()=>{const{data:m}=await S({field:Object.keys(l)});for(const e in m)l[e]=m[e]})();const _=u(),V=async()=>{const m=await _.value.validate();if(typeof m!="object"&&m){const e=await T({data:l});e.code===1?n.success("操作成功"):n.error(e.msg)}},g={email_name:[{required:!0,message:"请输入发件人"}],email_smtp:[{required:!0,message:"请输入SMTP服务器"}],email_port:[{required:!0,message:"请输入邮箱SMTP服务器端口"}],email_user:[{required:!0,message:"请输入邮箱账号"}],email_pass:[{required:!0,message:"请输入邮箱密码"}]},i=u(""),f=u(!1),y=async()=>{if(f.value=!0,!i.value){n.error("请输入测试邮箱");return}const{msg:m}=await k({address:i.value});n.success(m)};return(m,e)=>{const s=w,r=P,d=q,C=x,v=U,M=B;return c(),b(M,{title:"邮箱配置",class:"basic-container",bordered:!1},{default:t(()=>[a(v,{ref_key:"formRef",ref:_,"label-align":"left",data:l,rules:g,"label-width":150},{default:t(()=>[a(r,{label:"发件人",name:"email_name"},{default:t(()=>[a(s,{modelValue:l.email_name,"onUpdate:modelValue":e[0]||(e[0]=o=>l.email_name=o),clearable:"",placeholder:"请输入发件人"},null,8,["modelValue"])]),_:1}),a(r,{label:"SMTP服务器",name:"email_smtp"},{default:t(()=>[a(s,{modelValue:l.email_smtp,"onUpdate:modelValue":e[1]||(e[1]=o=>l.email_smtp=o),clearable:"",placeholder:"请输入SMTP服务器"},null,8,["modelValue"])]),_:1}),a(r,{label:"SMTP端口",name:"email_port"},{default:t(()=>[a(s,{modelValue:l.email_port,"onUpdate:modelValue":e[2]||(e[2]=o=>l.email_port=o),clearable:"",placeholder:"请输入邮箱SMTP服务器端口"},null,8,["modelValue"])]),_:1}),a(r,{label:"邮箱账号",name:"email_user"},{default:t(()=>[a(s,{modelValue:l.email_user,"onUpdate:modelValue":e[3]||(e[3]=o=>l.email_user=o),clearable:"",placeholder:"请输入邮箱账号"},null,8,["modelValue"])]),_:1}),a(r,{label:"邮箱密码",name:"email_pass"},{default:t(()=>[a(s,{modelValue:l.email_pass,"onUpdate:modelValue":e[4]||(e[4]=o=>l.email_pass=o),clearable:"",placeholder:"请输入邮箱密码",type:"password"},null,8,["modelValue"])]),_:1}),f.value?(c(),b(r,{key:0,label:"测试邮箱",name:"address"},{default:t(()=>[a(s,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=o=>i.value=o),clearable:"",placeholder:"请输入测试邮箱"},null,8,["modelValue"])]),_:1})):R("",!0),a(r,null,{default:t(()=>[a(C,{size:"small"},{default:t(()=>[a(d,{theme:"primary",onClick:V},{default:t(()=>[...e[6]||(e[6]=[p("提交",-1)])]),_:1}),a(d,{theme:"primary",onClick:y},{default:t(()=>[...e[7]||(e[7]=[p("发信测试",-1)])]),_:1}),a(d,{theme:"default",variant:"base",type:"reset"},{default:t(()=>[...e[8]||(e[8]=[p("重置",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{me as default};
