import{a as D,e as F}from"./category-0a39d79d.js";import{M as d}from"./index-6b6fbd51.js";import{I as M}from"./index-757197b9.js";import{F as N,a as P}from"./index-0fff1870.js";import{I as j}from"./index-912dcce2.js";import{D as q}from"./index-f937956d.js";import{d as A,A as f,r as m,b as E,U as S,l as T,V as W,W as s,M as l,a0 as z}from"./vue-d500b9b9.js";const G={name:"CategoryEditPopup"},Y=A({...G,emits:["success","close"],setup(H,{expose:_,emit:g}){const c={id:"",name:"",status:1,is_show:1,sort:"",theme:"default"},o=f({...c}),r=m("add"),v=E(()=>r.value==="edit"?"编辑分类":"新增分类"),b=m(!1),i=m(!1),w=(t="add")=>{if(r.value=t,i.value=!0,t==="add")for(const e in o)o[e]=c[e]},y=async t=>{r.value="edit";for(const e in o)t[e]!=null&&t[e]!==void 0&&(o[e]=t[e])},n=f({content:"保存",loading:!1}),V=g,p=m(null),h={name:[{required:!0,message:"请输入分类名称",type:"error"}]},k=async()=>{const t=await p.value.validate();if(typeof t!="object"&&t){n.content="保存中...",n.loading=!0;try{const e=r.value==="add"?await D(o):await F(o);e.code===1?(d.success(e.msg),i.value=!1,V("success")):d.error(e.msg)}catch{d.error("操作失败")}finally{n.content="保存",n.loading=!1}}};return _({open:w,getDetail:y}),(t,e)=>{const x=M,u=N,I=S("wp-check-tag"),U=j,B=P,C=q;return T(),W(C,{visible:i.value,"onUpdate:visible":e[3]||(e[3]=a=>i.value=a),loading:b.value,"destroy-on-close":!0,"close-on-overlay-click":!1,header:v.value,draggable:"","confirm-btn":n,"on-confirm":k,width:"500px"},{default:s(()=>[l(B,{ref_key:"form",ref:p,data:o,rules:h,"label-width":"120","label-align":"top"},{default:s(()=>[l(u,{label:"分类名称",name:"name",tips:"输入分类名称，长度需在2-20位之间"},{default:s(()=>[l(x,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.name=a),placeholder:"请输入分类名称","show-limit-number":"",minlength:2,maxlength:20},null,8,["modelValue"])]),_:1}),l(u,{label:"在店铺首页显示",name:"is_show",tips:"如果您选择'关闭',则买家访问总店铺将看不到此分类,必须通过分类链接访问"},{default:s(()=>[z("span",null,[l(I,{modelValue:o.is_show,"onUpdate:modelValue":e[1]||(e[1]=a=>o.is_show=a),items:[{label:"显示",value:1},{label:"隐藏",value:0}]},null,8,["modelValue"])])]),_:1}),l(u,{label:"分类排序",name:"sort",tips:"填写数字越大，则此分类在店铺中显示越靠前。"},{default:s(()=>[l(U,{modelValue:o.sort,"onUpdate:modelValue":e[2]||(e[2]=a=>o.sort=a),theme:"column",min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","loading","header","confirm-btn"])}}});export{Y as _};
