import{_ as A,a as y}from"./dep-0742ae64-334d1564.js";import{h as Z,n as _,p as je,A as Q,T as we,C as Fe,H as Ee,U as De,G as We,E as xe,V as Ie,P as ve,K as He,W as Ue,X as Ke,Y as Ge,w as Pe}from"./index-5ae314bf.js";import{F as Ae,u as Re,V as q,a as Xe}from"./index-9034b695.js";import{i as Je,s as Oe,v as Ye}from"./form-model-962c4be8.js";import{d as $e,t as Ce,I as ce,r as k,A as Te,b as d,M as I,i as ze,o as Qe,h as Ze,w as _e,n as er}from"./vue-d500b9b9.js";import{i as ke}from"./isNil-c75b1b34.js";import{C as rr}from"./close-circle-filled-8b5b4fa1.js";/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var ar={colon:Boolean,data:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:void 0},errorMessage:{type:Object},id:{type:String,default:void 0},labelAlign:{type:String,default:"right",validator:function(e){return e?["left","right","top"].includes(e):!0}},labelWidth:{type:[String,Number],default:"100px"},layout:{type:String,default:"vertical",validator:function(e){return e?["vertical","inline"].includes(e):!0}},preventSubmitDefault:{type:Boolean,default:!0},readonly:{type:Boolean,default:void 0},requiredMark:{type:Boolean,default:void 0},requiredMarkPosition:{type:String,validator:function(e){return e?["left","right"].includes(e):!0}},resetType:{type:String,default:"empty",validator:function(e){return e?["empty","initial"].includes(e):!0}},rules:{type:Object},scrollToFirstError:{type:String,validator:function(e){return e?["","smooth","auto"].includes(e):!0}},showErrorMessage:{type:Boolean,default:!0},statusIcon:{type:[Boolean,Function],default:void 0},submitWithWarningMessage:Boolean,onReset:Function,onSubmit:Function,onValidate:Function};/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */function Be(c,e){return e?"".concat(c,"__").concat(e).replace(/(\[|\]|\.)+/g,"_"):""}/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var tr=$e({name:"TForm",props:ar,setup:function(e,S){var p=S.expose,w=je(),m=Ce(e),fe=m.disabled,U=m.readonly;ce("formDisabled",{disabled:fe}),ce("formReadonly",{readonly:U});var R=k(null),L=k([]),C=Ce(e),de=C.showErrorMessage,r=C.labelWidth,ee=C.labelAlign,re=C.data,ae=C.colon,me=C.requiredMark,te=C.requiredMarkPosition,ge=C.rules,N=C.errorMessage,D=C.resetType;ce(Ae,Te({showErrorMessage:de,labelWidth:r,labelAlign:ee,data:re,colon:ae,requiredMark:me,requiredMarkPosition:te,rules:ge,errorMessage:N,resetType:D,children:L,renderContent:w}));var E=Z("form"),ye=Re(),ne=d(function(){return[ye.value.form,_({},"".concat(E.value,"-inline"),e.layout==="inline")]}),pe=Z("form-item"),J=function(l){if(we(l))return"";var u=Object.keys(l),s=Fe(u,1),o=s[0];if(e.scrollToFirstError){var h=Be(pe.value,o);he(h)}var M=l[o];return Ee(M)?M.filter(function(j){return!j.result})[0].message:""},he=function(l){var u=R.value.getElementsByClassName(l),s=Fe(u,1),o=s[0],h=e.scrollToFirstError;h&&o&&o.scrollIntoView({behavior:h})},K=function(l,u){return!u||!Ee(u)?!0:u.indexOf("".concat(l))!==-1},le=function(l){var u=l.reduce(function(s,o){return Object.assign(s||{},o)},{});return Object.keys(u).forEach(function(s){u[s]===!0&&delete u[s]}),Je(u)?!0:u},ue=function(){var f=A(y.mark(function l(u){var s,o,h,M,j,W,F,O,x,se;return y.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return o=u||{},h=o.fields,M=o.trigger,j=M===void 0?"all":M,W=o.showErrorMessage,F=L.value.filter(function(H){return Q(H.validate)&&K(String(H.name),h)}).map(function(H){return H.validate(j,W)}),P.next=1,Promise.all(F);case 1:return O=P.sent,x=le(O),se=J(x),(s=e.onValidate)===null||s===void 0||s.call(e,{validateResult:x,firstError:se}),P.abrupt("return",x);case 2:case"end":return P.stop()}},l)}));return function(u){return f.apply(this,arguments)}}(),V=function(){var f=A(y.mark(function l(u){var s,o,h,M,j,W;return y.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return s=u||{},o=s.fields,h=s.trigger,M=h===void 0?"all":h,j=L.value.filter(function(O){return Q(O.validateOnly)&&K(String(O.name),o)}).map(function(O){return O.validateOnly(M)}),F.next=1,Promise.all(j);case 1:return W=F.sent,F.abrupt("return",le(W));case 2:case"end":return F.stop()}},l)}));return function(u){return f.apply(this,arguments)}}(),$=k(),T=function(l){e.preventSubmitDefault&&l&&(l.preventDefault(),l.stopPropagation()),ue($.value).then(function(u){var s;(s=e.onSubmit)===null||s===void 0||s.call(e,{validateResult:u,firstError:J(u),e:l})}),$.value=void 0},Y=function(){var f=A(y.mark(function l(u){return y.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:$.value=u,De(R.value);case 1:case"end":return s.stop()}},l)}));return function(u){return f.apply(this,arguments)}}(),B=k(),z=function(l){var u;e.preventSubmitDefault&&l&&(l.preventDefault(),l.stopPropagation()),L.value.filter(function(s){var o;return Q(s.resetField)&&K(String(s.name),(o=B.value)===null||o===void 0?void 0:o.fields)}).forEach(function(s){var o;return s.resetField((o=B.value)===null||o===void 0?void 0:o.type)}),B.value=void 0,(u=e.onReset)===null||u===void 0||u.call(e,{e:l})},be=function(l){B.value=l,R.value.reset()},Se=function(l){L.value.forEach(function(u){Q(u.resetHandler)&&K(String(u.name),l)&&u.resetHandler()})},ie=function(l){var u=Object.keys(l);if(u.length){var s=L.value.filter(function(o){return Q(o.setValidateMessage)&&u.includes("".concat(o.name))}).map(function(o){return o.setValidateMessage(l[o.name])});Promise.all(s)}};return p({validate:ue,submit:Y,reset:be,clearValidate:Se,setValidateMessage:ie,validateOnly:V}),function(){return I("form",{id:e.id,ref:R,class:ne.value,onSubmit:function(l){return T(l)},onReset:function(l){return z(l)}},[w("default")])}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var nr={for:{type:String,default:""},help:{type:[String,Function]},label:{type:[String,Function],default:""},labelAlign:{type:String,validator:function(e){return e?["left","right","top"].includes(e):!0}},labelWidth:{type:[String,Number]},name:{type:String,default:""},requiredMark:{type:Boolean,default:void 0},rules:{type:Array},showErrorMessage:{type:Boolean,default:void 0},status:{type:String,default:""},statusIcon:{type:[Boolean,Function],default:void 0},successBorder:Boolean,tips:{type:[String,Function]}};/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */function lr(c,e){return c.replace(/\${(.*?)}/g,function(S,p){var w;return(w=e[p.trim()])!==null&&w!==void 0?w:""})}function Ve(c,e){var S=Object.keys(c);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(c);e&&(p=p.filter(function(w){return Object.getOwnPropertyDescriptor(c,w).enumerable})),S.push.apply(S,p)}return S}function Le(c){for(var e=1;e<arguments.length;e++){var S=arguments[e]!=null?arguments[e]:{};e%2?Ve(Object(S),!0).forEach(function(p){_(c,p,S[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(S)):Ve(Object(S)).forEach(function(p){Object.defineProperty(c,p,Object.getOwnPropertyDescriptor(S,p))})}return c}var ur=$e({name:"TFormItem",props:nr,setup:function(e,S){var p=S.slots,w=je(),m=Re(),fe=We("form"),U=fe.globalConfig,R=xe({CheckCircleFilledIcon:Ue,CloseCircleFilledIcon:rr,ErrorCircleFilledIcon:Ke}),L=R.CheckCircleFilledIcon,C=R.CloseCircleFilledIcon,de=R.ErrorCircleFilledIcon,r=ze(Ae,void 0),ee=Z(),re=Z("form-item"),ae=d(function(){var a,t,n=(a=(t=e.requiredMark)!==null&&t!==void 0?t:r==null?void 0:r.requiredMark)!==null&&a!==void 0?a:U.value.requiredMark,g=f.value.filter(function(i){return i.required}).length>0;return n??g}),me=d(function(){var a;return(a=r==null?void 0:r.requiredMarkPosition)!==null&&a!==void 0?a:U.value.requiredMarkPosition}),te=d(function(){return p.label||e.label}),ge=d(function(){return!!(r!=null&&r.colon&&te.value)}),N=Z("form__label"),D=d(function(){return ke(e.labelAlign)?r==null?void 0:r.labelAlign:e.labelAlign}),E=d(function(){return ke(e.labelWidth)?r==null?void 0:r.labelWidth:e.labelWidth}),ye=d(function(){return[m.value.label,_(_(_(_(_({},"".concat(N.value,"--required"),ae.value),"".concat(N.value,"--required-right"),ae.value&&me.value==="right"),"".concat(N.value,"--top"),te.value&&(D.value==="top"||!E.value)),"".concat(N.value,"--left"),D.value==="left"&&E.value),"".concat(N.value,"--right"),D.value==="right"&&E.value)]}),ne=d(function(){return"".concat(ee.value,"-is-").concat(e.status||"default"," ").concat(e.status==="success"?m.value.successBorder:"")}),pe=function(){if(Number(E.value)!==0){var t={};return E.value&&D.value!=="top"&&(Ie(E.value)?t={width:"".concat(E.value,"px")}:t={width:E.value}),I("div",{class:ye.value,style:t},[I("label",{for:e.for||null},[w("label")]),ge.value&&U.value.colonText])}},J=function(){var t=function(v){return I("span",{class:m.value.status},[I(v,null,null)])},n=V.value;if(T.value===q.SUCCESS)return t(L);if(n!=null&&n[0]){var g=n[0].type||"error",i={error:C,warning:de,success:L}[g];return t(i)}return null},he=function(){var t=e.statusIcon;if(t!==!1){var n=w("statusIcon",{defaultNode:J()});if(n)return I("span",{class:m.value.status},[n]);if(n!==!1&&(n=r==null?void 0:r.renderContent("statusIcon",{defaultNode:J(),params:e}),n))return n}},K=d(function(){if(!x.value)return"";if(T.value===q.SUCCESS)return e.successBorder?[m.value.success,m.value.successBorder].join(" "):m.value.success;if(V.value.length){var a=V.value[0].type||"error";return e.status?ne.value:a==="error"?m.value.error:m.value.warning}}),le=d(function(){return[m.value.controls,K.value]}),ue=d(function(){var a={};return E.value&&D.value!=="top"&&(Ie(E.value)?a={marginLeft:"".concat(E.value,"px")}:a={marginLeft:E.value}),a}),V=k([]),$=k([]),T=k(q.TO_BE_VALIDATED),Y=k(!1),B=k(!1),z=function(){B.value=!1,V.value=[],$.value=[],T.value=q.TO_BE_VALIDATED},be=function(){var t=Object.prototype.toString.call(ve(r==null?void 0:r.data,e.name)),n;return t==="[object String]"&&(n=""),t==="[object Array]"&&(n=[]),t==="[object Object]"&&(n={}),n},Se=function(){var a=A(y.mark(function t(){var n,g=arguments;return y.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=g.length>0&&g[0]!==void 0?g[0]:r==null?void 0:r.resetType,e.name){i.next=1;break}return i.abrupt("return");case 1:return n==="empty"?Oe(r==null?void 0:r.data,e.name,be()):n==="initial"&&Oe(r==null?void 0:r.data,e.name,M.value),i.next=2,er();case 2:Y.value?B.value=!0:z();case 3:case"end":return i.stop()}},t)}));return function(){return a.apply(this,arguments)}}(),ie=d(function(){var a;return(a=r==null?void 0:r.errorMessage)!==null&&a!==void 0?a:U.value.errorMessage}),f=d(function(){var a;if((a=e.rules)!==null&&a!==void 0&&a.length)return e.rules;if(!e.name)return[];var t="".concat(e.name).lastIndexOf(".")||-1,n="".concat(e.name).slice(t+1);return ve(r==null?void 0:r.rules,e.name)||ve(r==null?void 0:r.rules,n)||[]}),l=function(){var a=A(y.mark(function t(n){var g,i;return y.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(i={successList:[],errorList:[],rules:[],resultList:[],allowSetValue:!1},i.rules=n==="all"?f.value:f.value.filter(function(v){return(v.trigger||"change")===n}),!(f.value.length&&!((g=i.rules)!==null&&g!==void 0&&g.length))){b.next=1;break}return b.abrupt("return",i);case 1:return i.allowSetValue=!0,b.next=2,Ye(h.value,i.rules);case 2:return i.resultList=b.sent,i.errorList=i.resultList.filter(function(v){return v.result!==!0}).map(function(v){return Object.keys(v).forEach(function(G){if(!v.message&&ie.value[G]){var oe=Ge(e.label)?e.label:e.name;v.message=lr(ie.value[G],{name:oe,validate:v[G]})}}),v}),i.successList=i.resultList.filter(function(v){return v.result===!0&&v.message&&v.type==="success"}),b.abrupt("return",i);case 3:case"end":return b.stop()}},t)}));return function(n){return a.apply(this,arguments)}}(),u=function(){var a=A(y.mark(function t(n,g){var i,b,v,G,oe,Me;return y.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return Y.value=!0,O.value=g,X.next=1,l(n);case 1:return i=X.sent,b=i.successList,v=i.errorList,G=i.rules,oe=i.resultList,Me=i.allowSetValue,Me&&($.value=b,V.value=v),G.length&&(T.value=v.length?q.FAIL:q.SUCCESS),B.value&&z(),Y.value=!1,X.abrupt("return",_({},e.name,v.length===0?!0:oe));case 2:case"end":return X.stop()}},t)}));return function(n,g){return a.apply(this,arguments)}}(),s=function(){var a=A(y.mark(function t(n){var g,i,b;return y.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=1,l(n);case 1:return g=v.sent,i=g.errorList,b=g.resultList,v.abrupt("return",_({},e.name,i.length===0?!0:b));case 2:case"end":return v.stop()}},t)}));return function(n){return a.apply(this,arguments)}}(),o=function(t){!t&&!Ee(t)||(t.length===0&&(V.value=[],T.value=q.SUCCESS),V.value=t.map(function(n){return Le(Le({},n),{},{result:!1})}),T.value=q.FAIL)},h=d(function(){return(r==null?void 0:r.data)&&ve(r==null?void 0:r.data,e.name)}),M=k(void 0),j=Ce(e),W=j.name,F=Te({name:W,resetHandler:z,resetField:Se,validate:u,validateOnly:s,setValidateMessage:o});Qe(function(){M.value=He(h.value),r==null||r.children.push(F)}),Ze(function(){r&&(r.children=r==null?void 0:r.children.filter(function(a){return a!==F}))}),_e(h,A(y.mark(function a(){return y.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,u("change");case 1:case"end":return t.stop()}},a)})),{deep:!0}),_e(function(){return[e.name,JSON.stringify(e.rules)].join(",")},function(){u("change")});var O=k(void 0),x=d(function(){return we(O.value)?O.value:we(e.showErrorMessage)?e.showErrorMessage:r==null?void 0:r.showErrorMessage}),se=d(function(){return[m.value.formItem,Be(re.value,e.name),_(_({},m.value.formItemWithHelp,P.value),m.value.formItemWithExtra,H.value)]}),P=d(function(){var a=w("help");return a?I("div",{class:m.value.help},[a]):null}),H=d(function(){var a,t=function(i){return I("div",{class:m.value.extra,title:i},[i])},n=V.value;return x.value&&n!==null&&n!==void 0&&(a=n[0])!==null&&a!==void 0&&a.message?t(n[0].message):$.value.length?t($.value[0].message):null}),qe=d(function(){var a=w("tips");if(!a)return null;var t=["".concat(re.value,"-tips"),"".concat(ee.value,"-tips"),ne.value];return I("div",{class:t},[a])}),Ne=function(){var a=A(y.mark(function t(){return y.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,u("blur");case 1:case"end":return n.stop()}},t)}));return function(){return a.apply(this,arguments)}}();return ce(Xe,{handleBlur:Ne}),function(){return I("div",{class:se.value},[pe(),I("div",{class:le.value,style:ue.value},[I("div",{class:m.value.controlsContent},[w("default"),he()]),P.value,qe.value,H.value])])}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var mr=Pe(tr),gr=Pe(ur);export{gr as F,mr as a};
