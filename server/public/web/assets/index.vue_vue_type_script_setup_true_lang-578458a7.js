import{b as i,m as c,a as $}from"./config-716c863e.js";import{M as S}from"./index-6b6fbd51.js";import{U as w}from"./index-240de459.js";import{d as V,t as B,r as o,f as R,l as M,V as N,N as O,u as P}from"./vue-d500b9b9.js";const W={name:"WpUpload"},E=V({...W,props:{theme:String,initial:Object,name:String,app:String,accept:String},emits:["update"],setup(p,{emit:d}){const e=p,{accept:f,app:s,theme:v}=B(e),l=o(f.value),t=o();R(()=>{let a;if(e.initial[e.name]&&e.initial[e.name].startsWith("http")?a=e.initial[e.name]:a=i+e.initial[e.name],e.initial&&e.name&&e.initial[e.name])switch(e.theme){case"image":l.value="image/*",t.value=[{url:a}];break;case"file":l.value="file/*",t.value=[{name:e.initial[e.name],url:a}];break;case"custom":t.value=[{name:e.initial[e.name],url:a}];break;case"file-input":t.value=[{name:e.initial[e.name],url:a}];break;case"file-flow":t.value=[{name:e.initial[e.name],url:a}];break;case"image-flow":t.value=[{url:a}];break;default:l.value="image/*",t.value=[{url:a}]}else t.value=[]});const r=d,g=a=>a.code===0?(S.error(a.msg),null):(e.initial&&e.name&&r("update",{name:e.name,url:a.data.url}),a.data),h=()=>{r("update",{name:e.name,url:""})},n=o();(()=>{switch(s.value){case"admin":n.value=`${i}${$}`;break;case"merchant":n.value=`${i}${c}`;break;default:n.value=`${i}${c}`}})();const U=localStorage.getItem(s.value),{accessToken:b}=JSON.parse(U),m=o({});return s.value!==void 0&&(m.value={Authorization:`Bearer ${b}`}),(a,u)=>{const k=w;return M(),N(k,O(a.$attrs,{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=_=>t.value=_),action:n.value,headers:m.value,theme:P(v),accept:l.value,"format-response":g,clearable:"",onRemove:h}),null,16,["modelValue","action","headers","theme","accept"])}}});export{E as _};
