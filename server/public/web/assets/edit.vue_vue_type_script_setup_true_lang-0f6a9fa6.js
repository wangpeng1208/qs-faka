import{r as p,M as g}from"./index-5ae314bf.js";import{l as q}from"./category-a83184c3.js";import{f as C}from"./date-35f9fa82.js";import{T as F}from"./index-2468d71f.js";import{S as I}from"./index-c8633d5c.js";import{F as T,a as h}from"./index-9de6e4fb.js";import{I as N}from"./index-9b4540ef.js";import{D as P}from"./index-b62fd10b.js";import{R as j}from"./index-a9524ed3.js";import{D as A}from"./index-bf58812f.js";import{d as B,r as u,U as E,l as J,V as L,W as s,M as l,u as v}from"./vue-d500b9b9.js";function re(o){return p.post({url:"/adminapi/article/article/list",params:o})}function G(o){return p.post({url:"/adminapi/article/article/add",params:o})}function W(o){return p.post({url:"/adminapi/article/article/edit",params:o})}function ue(o){return p.post({url:"/adminapi/article/article/del",params:o})}const me=[{colKey:"id",title:"ID"},{colKey:"cate_name",title:"分类"},{colKey:"title",title:"名称"},{colKey:"views",title:"浏览量"},{colKey:"status",title:"状态",cell:(o,{row:n})=>o(F,{variant:"light",theme:n.status===1?"success":"danger"},()=>n.status===1?"正常":"禁用")},{colKey:"top",title:"置顶",cell:(o,{row:n})=>n.top?"是":"否"},{colKey:"create_at",title:"添加时间",cell(o,n){return o("span",C(n.row.create_at))}},{colKey:"operate",title:"操作",fixed:"right"}],z=[{label:"正常",value:1},{label:"禁用",value:0}],V=[{label:"是",value:1},{label:"否",value:0}],H={name:"EditPopup"},de=B({...H,emits:["success"],setup(o,{expose:n,emit:w}){const _=u([]);(async()=>{const{data:i}=await q();_.value=i})();const y={id:0,cate_id:null,title:"",content:"",status:1,top:0,create_at:Date.now(),is_system:0},t=u({...y}),U=(i,e)=>{var d;t.value.create_at=((d=e.dayjsValue)==null?void 0:d.valueOf())||0},m=u(!1),c=u("添加文章");n({init:i=>{const e=JSON.parse(JSON.stringify(i));(e==null?void 0:e.id)>0?(c.value="编辑文章",e.create_at*=1e3,t.value={...e}):(c.value="添加文章",t.value={...y},t.value.create_at=Date.now()),m.value=!0}});const D={cate_id:[{required:!0,message:"必填",type:"error"}],content:[{required:!0,message:"必填",type:"error"}],title:[{required:!0,message:"必填",type:"error"}]},O=w,b=u(),x=async()=>{const i=await b.value.validate();if(typeof i!="object"&&i){const e=t.value.id===0?await G(t.value):await W(t.value);e.code===1?(g.success(e.msg),m.value=!1,O("success")):g.error(e.msg)}};return(i,e)=>{const d=I,r=T,K=N,k=P,S=E("wp-editor"),f=j,M=h,R=A;return J(),L(R,{visible:m.value,"onUpdate:visible":e[7]||(e[7]=a=>m.value=a),"close-on-overlay-click":!1,"destroy-on-close":!0,header:c.value,"on-confirm":x,width:"900px"},{default:s(()=>[l(M,{ref_key:"formRef",ref:b,"label-align":"left",data:t.value,rules:D,"label-width":80},{default:s(()=>[l(r,{label:"文章栏目",name:"cate_id"},{default:s(()=>[l(d,{value:t.value.cate_id,"onUpdate:value":e[0]||(e[0]=a=>t.value.cate_id=a),placeholder:"请选择文章栏目",options:_.value,clearable:"",filterable:""},null,8,["value","options"])]),_:1}),l(r,{label:"文章标题",name:"title"},{default:s(()=>[l(K,{modelValue:t.value.title,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.title=a),clearable:"",placeholder:"请输入文章标题"},null,8,["modelValue"])]),_:1}),l(r,{label:"添加时间",name:"create_at"},{default:s(()=>[l(k,{modelValue:t.value.create_at,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.create_at=a),"enable-time-picker":"","allow-input":"",clearable:"",style:{width:"500px"},onChange:U},null,8,["modelValue"])]),_:1}),l(r,{label:"文章内容",name:"content"},{default:s(()=>[l(S,{"model-value":t.value.content,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.content=a),"user-type":"admin",height:"300px",width:"100%",mode:"simple"},null,8,["model-value"])]),_:1}),l(r,{label:"状态",name:"status"},{default:s(()=>[l(f,{modelValue:t.value.status,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.status=a),options:v(z)},null,8,["modelValue","options"])]),_:1}),l(r,{label:"置顶",name:"top"},{default:s(()=>[l(f,{modelValue:t.value.top,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.top=a),options:v(V)},null,8,["modelValue","options"])]),_:1}),l(r,{label:"系统调用",name:"is_system"},{default:s(()=>[l(f,{modelValue:t.value.is_system,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.is_system=a),options:v(V)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])}}});export{de as _,me as c,ue as d,re as l};
