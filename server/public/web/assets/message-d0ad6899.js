import{m as x}from"./user-ba2345e5.js";import{M as i,_ as A}from"./index-6b6fbd51.js";import{A as D}from"./index-3ace0e0e.js";import{D as M}from"./index-43af1be0.js";import{R}from"./index-ae3a9dfb.js";import{F as U,a as k}from"./index-0fff1870.js";import{I as F}from"./index-757197b9.js";import{D as I}from"./index-55947ee7.js";import{d as q,A as C,r as p,U as P,l as T,V as B,W as a,M as o,_ as N}from"./vue-d500b9b9.js";import"./libs-d79b82a8.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./omit-82a91481.js";import"./dep-0742ae64-0833915c.js";import"./dep-cc1906a8-b100bfdb.js";import"./dep-34b004f3-3e1a5725.js";import"./isNil-c75b1b34.js";import"./index-e205a427.js";import"./form-model-0fc8dc05.js";import"./_baseSet-c1826ef2.js";import"./close-circle-filled-3424a47b.js";import"./useLengthLimit-14a00f39.js";import"./browse-35e2443f.js";import"./dep-581cd4f1-15e6aa5c.js";import"./index-c63cfed1.js";const S={name:"MessagePopup"},j=q({...S,setup(z,{expose:d}){const u=[{label:"系统消息",value:"site"},{label:"电子邮件",value:"email"}],t=C({...{user_id:0,type:"site",title:"",content:""}}),l=p(!1);d({init:s=>{t.user_id=s,l.value=!0}});const _={type:[{required:!0,message:"必填",type:"error"}],content:[{required:!0,message:"必填",type:"error"}],title:[{required:!0,message:"必填",type:"error"}]},m=p(null),f=async()=>{const s=await m.value.validate();if(typeof s!="object"&&s)try{const e=await x(t);e.code===1?(i.success("发送成功"),l.value=!1):i.error(e.msg)}catch(e){i.error(e.msg)}};return(s,e)=>{const c=D,v=M,y=R,n=U,g=F,b=P("wp-editor"),V=k,w=I;return T(),B(w,{visible:l.value,"onUpdate:visible":e[3]||(e[3]=r=>l.value=r),size:"100%","close-on-overlay-click":!1,"destroy-on-close":!0,header:"发送消息","on-confirm":f},{default:a(()=>[o(c,{theme:"info"},{default:a(()=>[...e[4]||(e[4]=[N("系统消息仅可纯文本，标题请尽量简短",-1)])]),_:1}),o(v),o(V,{ref_key:"formRef",ref:m,"label-align":"left",data:t,rules:_,"label-width":80},{default:a(()=>[o(n,{label:"消息类型",name:"type"},{default:a(()=>[o(y,{modelValue:t.type,"onUpdate:modelValue":e[0]||(e[0]=r=>t.type=r),options:u},null,8,["modelValue"])]),_:1}),o(n,{label:"标题",name:"title"},{default:a(()=>[o(g,{modelValue:t.title,"onUpdate:modelValue":e[1]||(e[1]=r=>t.title=r),clearable:"",placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),o(n,{label:"内容",name:"content"},{default:a(()=>[o(b,{modelValue:t.content,"onUpdate:modelValue":e[2]||(e[2]=r=>t.content=r),height:"500px",width:"100%",mode:"simple","user-type":"admin"},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible"])}}});const fe=A(j,[["__scopeId","data-v-df0756f3"]]);export{fe as default};
