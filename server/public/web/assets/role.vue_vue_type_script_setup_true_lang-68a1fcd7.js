import{f as A}from"./role-aa79c301.js";import{h as V,i as x}from"./user-6eaedfbc.js";import{M as i}from"./index-5ae314bf.js";import{S as F}from"./index-c8633d5c.js";import{F as M,a as S}from"./index-9de6e4fb.js";import{D as T}from"./index-bf58812f.js";import{d as h,A as O,r,l as U,V as q,W as n,M as c}from"./vue-d500b9b9.js";const B={name:"EditPopup"},G=h({...B,emits:["success"],setup(C,{expose:f,emit:d}){const o=O({...{user_id:0,role_id:""}}),m=r([]),u=r(),a=r(!1),p=r("分配商户角色"),_=t=>{y(t),v(),a.value=!0},v=async()=>{const{data:t}=await A();m.value=t},y=async t=>{const{data:e}=await V({id:t});for(const s in o)e[s]!=null&&e[s]!==void 0&&(o[s]=e[s])};f({init:_});const g={name:[{required:!0,message:"必填",type:"error"}],title:[{required:!0,message:"必填",type:"error"}]},b=d,w=async()=>{const t=await u.value.validate();if(typeof t!="object"&&t)try{const e=await x(o);e.code===1?(i.success("操作成功"),a.value=!1,b("success")):i.error(e.msg)}catch(e){i.error(e.msg)}};return(t,e)=>{const s=F,D=M,R=S,k=T;return U(),q(k,{visible:a.value,"onUpdate:visible":e[1]||(e[1]=l=>a.value=l),"close-on-overlay-click":!1,"destroy-on-close":!0,header:p.value,"on-confirm":w},{default:n(()=>[c(R,{ref_key:"formRef",ref:u,"label-align":"left",data:o,rules:g,"label-width":80},{default:n(()=>[c(D,{label:"选择角色",name:"role_id"},{default:n(()=>[c(s,{modelValue:o.role_id,"onUpdate:modelValue":e[0]||(e[0]=l=>o.role_id=l),options:m.value},null,8,["modelValue","options"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])}}});export{G as _};
