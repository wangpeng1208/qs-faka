import{d as ee,a2 as le,r as h,U as te,l as d,V as r,W as a,M as t,u as s,m as y,G as x,a5 as C,_ as g,a4 as _,a0 as D}from"./vue-51c2f431.js";import{l as oe}from"./category-baa68958.js";import{g as ae,d as ne,a as ie,e as ue}from"./good-95e904d5.js";import{T as w,S as de,C as me,I as se,a as re,b as pe}from"./constant-6bc153e8.js";import{M as q,_ as _e}from"./index-ebc513dd.js";import{D as ve}from"./plugin-41574ab4.js";import{S as fe,O as ce}from"./index-31ca20e2.js";import{F as ye,a as ge}from"./index-3f5d4a71.js";import{I as Ve}from"./index-15716071.js";import{I as be}from"./index-8fdc26dc.js";import{I as he}from"./index-cda4d585.js";import{S as we}from"./index-b206f515.js";import{B as ke}from"./index-3b3d7414.js";import{T as Ue}from"./index-de8c6515.js";import{S as xe}from"./index-8ea8c9a9.js";import{R as Ce}from"./index-b07945fd.js";import{C as Re}from"./index-0945ca82.js";import"./libs-1cd01688.js";import"./plugins-ccea0c8f.js";import"./others-24e1b5c5.js";import"./echarts-a13411ed.js";import"./dialog-2582254b.js";import"./dep-cc1906a8-b100bfdb.js";import"./dep-581cd4f1-7aa320e3.js";import"./omit-7a5ea809.js";import"./dep-0742ae64-e2730b23.js";import"./fake-arrow-cad1ce15.js";import"./index-e2b6bb2b.js";import"./index-7eef5ecd.js";import"./_baseSet-75352e55.js";import"./index-f001b1b6.js";import"./dep-34b004f3-3e1a5725.js";import"./close-circle-filled-9eb22673.js";import"./index-d5e568e3.js";import"./index-9aa638bc.js";import"./form-model-7023f79a.js";import"./isNil-c75b1b34.js";import"./useLengthLimit-207427cf.js";import"./browse-ff8f6fe8.js";import"./dep-ef1abd17-ab5403a7.js";import"./add-06b22f1a.js";const Se={class:"more-setting"},qe={key:3,class:"more-content"},Ne={name:"GoodsAdd"},Ie=ee({...Ne,setup(Te){const v=le(),N=h("add"),l=h({cate_id:"",name:"",price:"",event_give:[],addtion_give:[],sms_payer:0,cost_price:"",limit_quantity:"",limit_quantity_max:"",inventory_notify:1,card_order:0,selectcard_fee:"",coupon_type:0,sold_notify:0,inventory_notify_type:1,take_card_type:0,contact_limit:"mobile",content:"",remark:"",sort:"0",wholesale_discount:0,wholesale_discount_list:[],theme:"default"}),k=h([]),$=async()=>{const{data:n}=await ae();v.currentRoute.value.query.id?k.value=n.filter(e=>e.id!=v.currentRoute.value.query.id):k.value=n},I=n=>{if(n&&k.value.length<2){q.warning("至少要有两个商品才能开启附加赠送");return}n?l.value.addtion_give.push({good_id:"",bug_num:"",give_num:""}):l.value.addtion_give=[]},L=n=>{l.value.addtion_give.splice(n,1),l.value.addtion_give.length===0&&(l.value.addtion_give=[])},T=n=>{n?l.value.event_give.push({num:"",give_num:""}):l.value.event_give=[]},M=n=>{l.value.event_give.splice(n,1),l.value.event_give.length===0&&(l.value.event_give=[])},A=n=>{n?l.value.wholesale_discount_list.push({num:"",price:""}):l.value.wholesale_discount_list=[]},P=n=>{l.value.wholesale_discount_list.splice(n,1),l.value.wholesale_discount_list.length===0&&(l.value.wholesale_discount=0)},E=h("添加商品"),Y=async()=>{if(v.currentRoute.value.query.id)try{const{data:n}=await ne({id:v.currentRoute.value.query.id});l.value={...n},N.value="edit",E.value="编辑商品"}catch(n){console.log(n)}},B=h([]),W=async()=>{const{data:n}=await oe();if(n.list.length===0){const e=ve({header:"提醒",body:"还没有商品分类，请先添加分类！",confirmBtn:"去分类页添加",closeOnOverlayClick:!1,theme:"warning",onConfirm:({e:m})=>{e.hide(),v.push("/merchant/goods/category")},onCloseBtnClick:({e:m})=>{e.hide(),v.push("/merchant/goods/category")},onCancel:({e:m})=>{e.hide(),v.push("/merchant/goods/category")}})}B.value=n.list},R=h(!1),j={cate_id:[{required:!0,message:"请选择分类",type:"error"}],name:[{required:!0,message:"请输入商品名",type:"error"}],price:[{required:!0,message:"请输入商品价格",type:"error"}],content:[{required:!0,message:"请输入商品详情",type:"error"}],remark:[{required:!0,message:"请输入商品备注",type:"error"}]},G=h(),z=async()=>{const n=await G.value.validate();if(typeof n!="object"&&n){const e=l.value;try{let m;N.value==="add"?m=await ie(e):m=await ue(e),m.code===1?q.success(m.msg):q.error(m.msg)}catch(m){console.error(m)}}},H=async()=>{z(),v.push("/merchant/goods/index")};return W(),Y(),$(),(n,e)=>{const m=fe,i=ye,S=Ve,p=be,O=he,V=we,U=te("wp-check-tag"),f=ke,K=ce,F=Ue,J=xe,b=Ce,Q=ge,X=Re;return d(),r(X,{title:E.value,class:"basic-container",bordered:!1},{default:a(()=>[t(Q,{ref_key:"form",ref:G,class:"base-form",data:l.value,rules:j,"label-align":"left","label-width":150,"scroll-to-first-error":"smooth","status-icon":"",onSubmit:z},{default:a(()=>[t(i,{label:"商品分类",name:"cate_id"},{default:a(()=>[t(m,{modelValue:l.value.cate_id,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.cate_id=o),placeholder:"请选择商品分类",size:"medium",style:{width:"600px"},options:B.value},null,8,["modelValue","options"])]),_:1}),t(i,{label:"商品名称",name:"name",tips:"输入商品名称，长度需在2-20位之间"},{default:a(()=>[t(S,{modelValue:l.value.name,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.name=o),maxlength:20,"show-limit-number":"",placeholder:"请输入商品名称",size:"medium",style:{width:"600px"}},null,8,["modelValue"])]),_:1}),t(i,{label:"销售价格",name:"price",tips:"必填，输入销售价格，范围在0.1-20000"},{default:a(()=>[t(O,{append:"元"},{default:a(()=>[t(p,{modelValue:l.value.price,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.price=o),max:2e4,min:.1,"decimal-places":2,placeholder:"请输入销售价格",theme:"normal",size:"medium"},null,8,["modelValue"])]),_:1})]),_:1}),t(i,{label:"成本价格",name:"cost_price",tips:"商品成本价不可高于商品价格！（成本价，方便统计）"},{default:a(()=>[t(O,{append:"元"},{default:a(()=>[t(p,{modelValue:l.value.cost_price,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.cost_price=o),"decimal-places":2,placeholder:"请输入成本价",theme:"normal",size:"medium"},null,8,["modelValue"])]),_:1})]),_:1}),t(i,{label:"限购设置",name:"event_give",tips:"0表示不限制购买数量"},{default:a(()=>[t(V,null,{default:a(()=>[t(p,{modelValue:l.value.limit_quantity,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.limit_quantity=o),theme:"normal",align:"center",label:"最少购买",suffix:"件",placeholder:"请输入最少购买数量",style:{width:"292px"},size:"medium"},null,8,["modelValue"]),t(p,{modelValue:l.value.limit_quantity_max,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.limit_quantity_max=o),theme:"normal",align:"center",label:"最多购买",suffix:"件",placeholder:"请输入最多购买数量",style:{width:"292px"},size:"medium"},null,8,["modelValue"])]),_:1})]),_:1}),t(i,{label:"优惠券",name:"coupon_type",tips:"选择开启则表示该商品可以使用优惠券"},{default:a(()=>[t(U,{modelValue:l.value.coupon_type,"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.coupon_type=o),items:s(w)},null,8,["modelValue","items"])]),_:1}),t(i,{label:"活动赠送",name:"event_give",tips:""},{default:a(()=>[t(U,{modelValue:l.value.event_give,"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.event_give=o),items:s(w),onActions:T},null,8,["modelValue","items"])]),_:1}),l.value.event_give.length?(d(),r(i,{key:0,label:"",name:"event_give"},{default:a(()=>[t(V,{direction:"vertical"},{default:a(()=>[(d(!0),y(x,null,C(l.value.event_give,(o,c)=>(d(),y("div",{key:c},[t(V,null,{default:a(()=>[t(p,{modelValue:o.num,"onUpdate:modelValue":u=>o.num=u,theme:"normal",align:"center",label:"买满：",suffix:"件",placeholder:"请输入买满数量",style:{width:"292px"}},null,8,["modelValue","onUpdate:modelValue"]),t(p,{modelValue:o.give_num,"onUpdate:modelValue":u=>o.give_num=u,theme:"normal",align:"center",label:"赠送：",suffix:"件",placeholder:"请输入赠送数量",style:{width:"292px"}},null,8,["modelValue","onUpdate:modelValue"]),t(f,{theme:"danger",variant:"outline",onClick:u=>M(c)},{default:a(()=>[...e[24]||(e[24]=[g("删除",-1)])]),_:1},8,["onClick"]),l.value.event_give.length?(d(),r(f,{key:0,variant:"outline",theme:"primary",onClick:e[8]||(e[8]=u=>T(1))},{default:a(()=>[...e[25]||(e[25]=[g(" 添加 ",-1)])]),_:1})):_("",!0)]),_:2},1024)]))),128))]),_:1})]),_:1})):_("",!0),t(i,{label:"附加赠送",name:"addtion_give",tips:""},{default:a(()=>[t(U,{modelValue:l.value.addtion_give,"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.addtion_give=o),items:s(w),onActions:I},null,8,["modelValue","items"])]),_:1}),l.value.addtion_give.length?(d(),r(i,{key:1,label:"",name:"addtion_give",tips:"若编辑（B商品，2,1）意思为买2个当前商品送B商品1个"},{default:a(()=>[l.value.addtion_give.length?(d(),r(V,{key:0,direction:"vertical"},{default:a(()=>[(d(!0),y(x,null,C(l.value.addtion_give,(o,c)=>(d(),y("div",{key:c},[t(V,null,{default:a(()=>[t(m,{modelValue:o.good_id,"onUpdate:modelValue":u=>o.good_id=u,style:{width:"292px"},placeholder:"请选择商品"},{default:a(()=>[(d(!0),y(x,null,C(k.value,(u,Z)=>(d(),r(K,{key:Z,value:u.id,label:u.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"]),t(S,{modelValue:o.bug_num,"onUpdate:modelValue":u=>o.bug_num=u,placeholder:"请输入购买数量",type:"number",theme:"normal","decimal-places":!1,min:1,style:{width:"138px"}},null,8,["modelValue","onUpdate:modelValue"]),t(S,{modelValue:o.give_num,"onUpdate:modelValue":u=>o.give_num=u,placeholder:"请输入赠送数量",type:"number",theme:"normal","decimal-places":!1,min:1,style:{width:"138px"}},null,8,["modelValue","onUpdate:modelValue"]),t(f,{theme:"danger",variant:"outline",onClick:u=>L(c)},{default:a(()=>[...e[26]||(e[26]=[g("删除",-1)])]),_:1},8,["onClick"]),l.value.addtion_give.length?(d(),r(f,{key:0,variant:"outline",theme:"primary",onClick:e[10]||(e[10]=u=>I(1))},{default:a(()=>[...e[27]||(e[27]=[g(" 添加 ",-1)])]),_:1})):_("",!0)]),_:2},1024)]))),128))]),_:1})):_("",!0)]),_:1})):_("",!0),t(i,{label:"批发优惠",name:"wholesale_discount_list",tips:""},{default:a(()=>[t(U,{modelValue:l.value.wholesale_discount_list,"onUpdate:modelValue":e[11]||(e[11]=o=>l.value.wholesale_discount_list=o),items:s(w),onActions:A},null,8,["modelValue","items"])]),_:1}),l.value.wholesale_discount_list.length?(d(),r(i,{key:2,label:"",name:"wholesale_discount_list"},{default:a(()=>[t(V,{direction:"vertical"},{default:a(()=>[(d(!0),y(x,null,C(l.value.wholesale_discount_list,(o,c)=>(d(),y("div",{key:c},[t(V,null,{default:a(()=>[t(p,{modelValue:o.num,"onUpdate:modelValue":u=>o.num=u,theme:"normal",align:"right",label:"数量：",suffix:"件",placeholder:"请输入购买数量",style:{width:"290px"}},null,8,["modelValue","onUpdate:modelValue"]),t(p,{modelValue:o.price,"onUpdate:modelValue":u=>o.price=u,theme:"normal",align:"right",label:"价格：",suffix:"元",placeholder:"请输入价格",style:{width:"290px"}},null,8,["modelValue","onUpdate:modelValue"]),t(f,{theme:"danger",variant:"outline",onClick:u=>P(c)},{default:a(()=>[...e[28]||(e[28]=[g("删除",-1)])]),_:1},8,["onClick"]),l.value.wholesale_discount_list.length?(d(),r(f,{key:0,variant:"outline",theme:"primary",onClick:e[12]||(e[12]=u=>A(1))},{default:a(()=>[...e[29]||(e[29]=[g(" 添加 ",-1)])]),_:1})):_("",!0)]),_:2},1024)]))),128))]),_:1})]),_:1})):_("",!0),t(i,{label:"商品描述",name:"content",tips:"必填，商品描述会在买家选择商品时展示，建议写上您商品的简介，官网以及常见的问题",style:{width:"760px"}},{default:a(()=>[t(F,{modelValue:l.value.content,"onUpdate:modelValue":e[13]||(e[13]=o=>l.value.content=o),placeholder:"商品描述会在买家选择商品时展示，建议写上您商品的简介，官网以及常见的问题，请保持在10-500字之间",size:"medium"},null,8,["modelValue"])]),_:1}),t(i,{label:"使用说明",name:"remark",tips:"必填，商品使用说明会在买家购买完成后展示，建议写上您的产品使用说明，售后联系方式等",style:{width:"760px"}},{default:a(()=>[t(F,{modelValue:l.value.remark,"onUpdate:modelValue":e[14]||(e[14]=o=>l.value.remark=o),placeholder:"请输入使用说明",size:"medium"},null,8,["modelValue"])]),_:1}),D("div",Se,[t(J,{modelValue:R.value,"onUpdate:modelValue":e[15]||(e[15]=o=>R.value=o)},null,8,["modelValue"]),e[30]||(e[30]=D("span",{class:"more-sett-text"},"显示更多设置",-1))]),R.value?(d(),y("div",qe,[t(i,{label:"短信费用",name:"sms_payer",tips:"选择由买家或者商家承担平台服务费。默认买家承担"},{default:a(()=>[t(b,{modelValue:l.value.sms_payer,"onUpdate:modelValue":e[16]||(e[16]=o=>l.value.sms_payer=o),options:s(de)},null,8,["modelValue","options"])]),_:1}),t(i,{label:"售卡顺序",name:"card_order"},{default:a(()=>[t(b,{modelValue:l.value.card_order,"onUpdate:modelValue":e[17]||(e[17]=o=>l.value.card_order=o),options:s(me)},null,8,["modelValue","options"])]),_:1}),t(i,{label:"售出通知",name:"sold_notify",tips:""},{default:a(()=>[t(b,{modelValue:l.value.sold_notify,"onUpdate:modelValue":e[18]||(e[18]=o=>l.value.sold_notify=o),options:s(w)},null,8,["modelValue","options"])]),_:1}),l.value.sold_notify?(d(),r(i,{key:0,span:8,label:"通知方式",name:"inventory_notify_type",tips:"默认站内信通知，邮件和微信通知需要绑定对应关系",class:"notify_type"},{default:a(()=>[t(b,{modelValue:l.value.inventory_notify_type,"onUpdate:modelValue":e[19]||(e[19]=o=>l.value.inventory_notify_type=o),options:s(se)},null,8,["modelValue","options"])]),_:1})):_("",!0),t(i,{label:"提货密码",name:"take_card_type",tips:"开启后，购买页面会提示买家填写取卡密码"},{default:a(()=>[t(b,{modelValue:l.value.take_card_type,"onUpdate:modelValue":e[20]||(e[20]=o=>l.value.take_card_type=o),options:s(re)},null,8,["modelValue","options"])]),_:1}),t(i,{label:"联系方式",name:"contact_limit",tips:""},{default:a(()=>[t(b,{modelValue:l.value.contact_limit,"onUpdate:modelValue":e[21]||(e[21]=o=>l.value.contact_limit=o),options:s(pe)},null,8,["modelValue","options"])]),_:1}),t(i,{label:"库存预警",name:"inventory_notify",tips:"设置后请确保邮箱正确，否则无法接收邮件"},{default:a(()=>[t(b,{modelValue:l.value.inventory_notify,"onUpdate:modelValue":e[22]||(e[22]=o=>l.value.inventory_notify=o),options:s(w)},null,8,["modelValue","options"])]),_:1}),t(i,{label:"商品排序",name:"sort",tips:""},{default:a(()=>[t(p,{modelValue:l.value.sort,"onUpdate:modelValue":e[23]||(e[23]=o=>l.value.sort=o),min:0,theme:"normal",placeholder:"",style:{width:"600px"},size:"medium"},null,8,["modelValue"])]),_:1})])):_("",!0),t(i,null,{default:a(()=>[t(f,{theme:"primary",class:"form-submit-confirm",type:"submit"},{default:a(()=>[...e[31]||(e[31]=[g(" 提交 ",-1)])]),_:1}),t(f,{theme:"default",class:"form-submit-confirm",onClick:H},{default:a(()=>[...e[32]||(e[32]=[g(" 提交并返回至商品列表 ",-1)])]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["title"])}}});const bl=_e(Ie,[["__scopeId","data-v-ad3f60a4"]]);export{bl as default};
