import{g as B,a as O,e as T}from"./collectionAccount-ab82d1ca.js";import{M as f}from"./index-5ae314bf.js";import{I as G}from"./index-9b4540ef.js";import{F as I,a as L}from"./index-9de6e4fb.js";import{T as P}from"./index-e3ca804a.js";import{R as S}from"./index-a9524ed3.js";import{D as $}from"./index-bf58812f.js";import{d as j,A as q,r as c,U as N,l as s,V as u,W as r,M as m,m as W,G as z,a5 as H}from"./vue-d500b9b9.js";const J={name:"AdminChannelCollectionAcctionEditPopup"},le=j({...J,emits:["success"],setup(K,{expose:b,emit:g}){const y=({name:o,url:e})=>{a.params[o]=e},h=[{label:"启用",value:1},{label:"禁用",value:0}],d={id:0,channel_id:0,name:"",status:1,params:{}},a=q({...d}),p=c(),i=c(!1),_=c(),V=async(o,e)=>{_.value=e?"编辑结算渠道账号":"添加结算渠道账号",a.channel_id=o;const{data:l}=await B({channel_id:a.channel_id});p.value=l,p.value.forEach(n=>{a.params[n.name]=""}),k(o,e),i.value=!0},k=async(o,e)=>{if(e){const{data:l}=await O({id:e});for(const n in a)l[n]!=null&&l[n]!==void 0&&(a[n]=l[n])}else for(const l in d)a[l]=d[l],a.channel_id=o};b({init:V});const U={name:[{required:!0,message:"账号备注必填",type:"error"}]},w=g,v=c(),x=async()=>{const o=await v.value.validate();if(typeof o!="object"&&o)try{const e=await T(a);e.code===1?(f.success(e.msg),i.value=!1,w("success")):f.error(e.msg)}catch(e){f.error(e.msg)}};return(o,e)=>{const l=G,n=I,F=N("wp-upload"),R=P,A=S,C=L,D=$;return s(),u(D,{visible:i.value,"onUpdate:visible":e[2]||(e[2]=t=>i.value=t),"close-on-overlay-click":!1,"destroy-on-close":!0,header:_.value,"on-confirm":x},{default:r(()=>[m(C,{ref_key:"formRef",ref:v,"label-align":"left",data:a,rules:U,"label-width":80},{default:r(()=>[m(n,{label:"账号备注",name:"name"},{default:r(()=>[m(l,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.name=t),clearable:"",placeholder:"请输入账号备注"},null,8,["modelValue"])]),_:1}),(s(!0),W(z,null,H(p.value,(t,E)=>(s(),u(n,{key:E,label:t.label,name:t.name},{default:r(()=>[t.label.includes("证书")?(s(),u(F,{key:0,initial:a.params,app:"admin",name:t.name,theme:"file-input",placeholder:`请上传${t.label}`,data:{type:"certificate"},onUpdate:y},null,8,["initial","name","placeholder"])):(s(),u(R,{key:1,modelValue:a.params[t.name],"onUpdate:modelValue":M=>a.params[t.name]=M,clearable:"",placeholder:`请输入${t.label}`},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","name"]))),128)),m(n,{label:"状态",name:"status"},{default:r(()=>[m(A,{modelValue:a.status,"onUpdate:modelValue":e[1]||(e[1]=t=>a.status=t),options:h},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])}}});export{le as _};
