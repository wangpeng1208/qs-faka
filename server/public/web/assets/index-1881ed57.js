import{n as h,G as ue,E as ce,g as ve,h as de,ar as se,at as fe,aX as me,ap as ge,p as ye,w as he}from"./index-1ae915eb.js";import{g as be,u as we}from"./dep-581cd4f1-74792024.js";import{r as y,b as s,d as Ce,w as L,J as Se,o as xe,h as Oe,M as d,N as Ee,T as _e,n as $}from"./vue-d500b9b9.js";/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Be={attach:{type:[String,Function]},body:{type:[String,Function]},cancelBtn:{type:[String,Object,Function]},closeBtn:{type:[String,Boolean,Function]},closeOnEscKeydown:{type:Boolean,default:void 0},closeOnOverlayClick:{type:Boolean,default:void 0},confirmBtn:{type:[String,Object,Function]},default:{type:[String,Function]},destroyOnClose:Boolean,drawerClassName:{type:String,default:""},footer:{type:[Boolean,Function],default:!0},header:{type:[String,Boolean,Function],default:!0},lazy:Boolean,mode:{type:String,default:"overlay",validator:function(e){return e?["overlay","push"].includes(e):!0}},placement:{type:String,default:"right",validator:function(e){return e?["left","right","top","bottom"].includes(e):!0}},preventScrollThrough:{type:Boolean,default:!0},showInAttachedElement:Boolean,showOverlay:{type:Boolean,default:!0},size:{type:String,default:void 0},sizeDraggable:{type:[Boolean,Object],default:!1},visible:Boolean,zIndex:{type:Number},onBeforeClose:Function,onBeforeOpen:Function,onCancel:Function,onClose:Function,onCloseBtnClick:Function,onConfirm:Function,onEscKeydown:Function,onOverlayClick:Function,onSizeDragEnd:Function};/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */function ze(o,e){return typeof o=="boolean"?{allowSizeDraggable:o,max:e.max,min:e.min}:{allowSizeDraggable:!0,max:o.max,min:o.min}}function p(o,e,r){return Math.min(Math.max(o,e),r)}function De(o,e){var r=e.x,l=e.y,i=e.max,u=e.min,b=e.maxWidth,E=e.maxHeight,v;switch(o){case"right":v=p(b-r,u,i);break;case"left":v=p(r,u,i);break;case"top":v=p(l,u,i);break;case"bottom":v=p(E-l,u,i);break;default:return v}return v}var pe=function(e){var r=y(!1),l=y(null),i=function(f){f.stopPropagation(),document.addEventListener("mouseup",u,!0),document.addEventListener("mousemove",b,!0),r.value=!0},u=function(){document.removeEventListener("mouseup",u,!0),document.removeEventListener("mousemove",b,!0),r.value=!1},b=function(f){var w,k=f.x,c=f.y,C=document.documentElement.clientHeight,_=document.documentElement.clientWidth,P=8,M=8,T=e.placement==="left"||e.placement==="right"?_:C,F=e.placement==="left"||e.placement==="right"?M:P,S=ze(e.sizeDraggable,{max:T,min:F}),z=S.allowSizeDraggable,N=S.max,j=S.min;if(!(!z||!r.value)){var x=De(e.placement,{x:k,y:c,maxWidth:_,maxHeight:C,max:N,min:j});typeof x>"u"||(l.value="".concat(x,"px"),(w=e.onSizeDragEnd)===null||w===void 0||w.call(e,{e:f,size:x}))}},E=s(function(){var m=["right","left"].includes(e.placement),f={left:"right",right:"left",top:"bottom",bottom:"top"};return h(h(h(h({zIndex:1,position:"absolute",background:"transparent"},f[e.placement],0),"width",m?"16px":"100%"),"height",m?"100%":"16px"),"cursor",m?"col-resize":"row-resize")}),v=s(function(){return r.value?{userSelect:"none"}:{}});return{draggedSizeValue:l,enableDrag:i,draggableLineStyles:E,draggingStyles:v}};/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */function H(o,e){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(o);e&&(l=l.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),r.push.apply(r,l)}return r}function K(o){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H(Object(r),!0).forEach(function(l){h(o,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(l){Object.defineProperty(o,l,Object.getOwnPropertyDescriptor(r,l))})}return o}var ke=1,Pe=Ce({name:"TDrawer",inheritAttrs:!1,props:Be,emits:["update:visible"],setup:function(e,r){var l=y(!1),i=y(!1),u=y(),b=y(),E=ue("drawer"),v=E.globalConfig,m=ce({CloseIcon:ge}),f=m.CloseIcon,w=ye(),k=ve(),c=de("drawer"),C=pe(e),_=C.draggedSizeValue,P=C.enableDrag,M=C.draggableLineStyles,T=C.draggingStyles,F=s(function(){return e.visible}),S=y(!1),z=se(function(){return e.attach}),N=function(a){var n;(n=e.onConfirm)===null||n===void 0||n.call(e,{e:a})},j=function(a){var n;(n=e.onCancel)===null||n===void 0||n.call(e,{e:a}),D({trigger:"cancel",e:a})},x=we({confirmBtnAction:N,cancelBtnAction:j}),X=x.getConfirmBtn,G=x.getCancelBtn,I=y(null),J=s(function(){return[c.value,"".concat(c.value,"--").concat(e.placement),h(h(h({},"".concat(c.value,"--open"),i.value),"".concat(c.value,"--attach"),e.showInAttachedElement),"".concat(c.value,"--without-mask"),!e.showOverlay),e.drawerClassName]}),O=s(function(){var t;if(_.value)return _.value;var a=(t=e.size)!==null&&t!==void 0?t:v.value.size,n=isNaN(Number(a))?a:"".concat(a,"px");return{small:"300px",medium:"500px",large:"760px"}[a]||n}),R=s(function(){return{transform:i.value?"translateX(0)":void 0,width:["left","right"].includes(e.placement)?O.value:"",height:["top","bottom"].includes(e.placement)?O.value:""}}),U=s(function(){return["".concat(c.value,"__content-wrapper"),"".concat(c.value,"__content-wrapper--").concat(e.placement)]}),B=s(function(){var t;return(t=I.value)===null||t===void 0?void 0:t.parentNode}),q=s(function(){return[e.mode,e.placement].join()}),Q=s(function(){return{display:"flex",justifyContent:e.placement==="right"?"flex-start":"flex-end"}}),A=function(a){var n;if(((n=e.closeOnEscKeydown)!==null&&n!==void 0?n:v.value.closeOnEscKeydown)&&a.key==="Escape"&&i.value&&te()){var g;(g=e.onEscKeydown)===null||g===void 0||g.call(e,{e:a}),D({trigger:"esc",e:a}),a.stopImmediatePropagation()}},V=function(){clearTimeout(b.value),b.value=setTimeout(function(){var a,n;(a=u.value)===null||a===void 0||(a=a.parentNode)===null||a===void 0||(n=a.removeChild)===null||n===void 0||n.call(a,u.value),u.value=null},150),$(function(){var a,n;(a=I.value)===null||a===void 0||(n=a.focus)===null||n===void 0||n.call(a)})},Y=function(){if(u.value){var a=window.innerWidth>document.documentElement.clientWidth,n=a?be():0;u.value=document.createElement("style"),u.value.dataset.id="td_drawer_".concat(+new Date,"_").concat(ke+=1),u.value.innerHTML=`
        html body {
          overflow-y: hidden;
          transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;
          `.concat(e.mode==="push"?"":"width: calc(100% - ".concat(n,"px);"),`
        }
      `)}},Z=function(){e.mode==="push"&&$(function(){B.value&&(B.value.style.cssText="transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;")})},ee=function(){if(!(!B.value||e.mode!=="push")){var a={left:{name:"margin-left",value:O.value},right:{name:"margin-right",value:"-".concat(O.value)},top:{name:"margin-top",value:O.value},bottom:{name:"margin-bottom",value:"-".concat(O.value)}}[e.placement];i.value?B.value.style.setProperty(a.name,a.value):B.value.style.removeProperty(a.name)}},ae=function(){var a=X({confirmBtn:e.confirmBtn,globalConfirm:v.value.confirm,className:"".concat(c.value,"__confirm")}),n=G({cancelBtn:e.cancelBtn,globalCancel:v.value.cancel,className:"".concat(c.value,"__cancel")});return d("div",{style:Q.value},[e.placement==="right"?a:null,n,e.placement!=="right"?a:null])},ne=fe("drawer",{visible:F}),te=ne.isTopInteractivePopup;L(q,Z,{immediate:!0});var le=function(a){if(a&&(S.value=!0),e.destroyOnClose){a?(l.value=!1,setTimeout(function(){return i.value=!0})):(i.value=!1,l.value&&(l.value=!1),setTimeout(function(){return l.value=!0},300));return}if(l.value&&a){l.value=!1,setTimeout(function(){return i.value=!0});return}setTimeout(function(){return i.value=a})},W=function(){!e.showInAttachedElement&&e.preventScrollThrough&&i.value&&(S.value||!e.lazy)&&(u.value||Y(),u.value&&!document.head.contains(u.value)&&document.head.appendChild(u.value))};L(function(){return e.visible},function(t){if(!me){if(t){var a;W(),(a=e.onBeforeOpen)===null||a===void 0||a.call(e)}else{var n;V(),(n=e.onBeforeClose)===null||n===void 0||n.call(e)}le(t)}},{immediate:!0});var re=function(a){var n;(n=e.onCloseBtnClick)===null||n===void 0||n.call(e,{e:a}),D({trigger:"close-btn",e:a})},oe=function(a){var n,g;(n=e.onOverlayClick)===null||n===void 0||n.call(e,{e:a}),((g=e.closeOnOverlayClick)!==null&&g!==void 0?g:v.value.closeOnOverlayClick)&&D({trigger:"overlay",e:a})},D=function(a){var n;(n=e.onClose)===null||n===void 0||n.call(e,a),r.emit("update:visible",!1)};Se(ee),xe(function(){W(),window.addEventListener("keydown",A)}),Oe(function(){V(),window.removeEventListener("keydown",A)});var ie=s(function(){return S.value?i.value||!l.value:!e.lazy});return function(){if(ie.value){var t=k("body","default"),a=w("header"),n=ae();return d(_e,{disabled:!e.attach||!z.value,to:z.value},{default:function(){return[d("div",Ee({ref:I,class:J.value,style:{zIndex:e.zIndex},onKeydown:A,tabindex:0},r.attrs),[e.showOverlay&&d("div",{class:"".concat(c.value,"__mask"),onClick:oe},null),d("div",{class:U.value,style:K(K({},R.value),T.value)},[a&&d("div",{class:"".concat(c.value,"__header")},[a]),e.closeBtn&&d("div",{class:"".concat(c.value,"__close-btn"),onClick:re},[w("closeBtn",d(f,null,null))]),d("div",{class:["".concat(c.value,"__body"),"narrow-scrollbar"]},[t]),e.footer&&d("div",{class:"".concat(c.value,"__footer")},[w("footer",n)]),e.sizeDraggable&&d("div",{style:M.value,onMousedown:P},null)])])]}})}}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Ne=he(Pe);export{Ne as D};
