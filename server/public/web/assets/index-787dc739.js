import{m as B,N as ve,K as _e,q as M,t as G,l as fe,b$ as he,w as K,r as W,M as q,_ as be}from"./index-ebc513dd.js";import{I as ye}from"./index-15716071.js";import{F as Ve,a as Ce}from"./index-3f5d4a71.js";import{R as ge}from"./index-b07945fd.js";import{T as xe}from"./index-de8c6515.js";import{d as L,t as H,b as S,I as N,M as a,i as R,r as A,ab as we,F as ke,a1 as Be,aa as Ie,A as J,U as Ue,l as O,V as D,W as t,a0 as X,a4 as z,_ as Ne}from"./vue-51c2f431.js";import{F as Re}from"./fake-arrow-cad1ce15.js";import{B as Se}from"./index-3b3d7414.js";import{C as Ae}from"./index-0945ca82.js";import"./libs-1cd01688.js";import"./plugins-ccea0c8f.js";import"./others-24e1b5c5.js";import"./echarts-a13411ed.js";import"./dep-cc1906a8-b100bfdb.js";import"./index-9aa638bc.js";import"./useLengthLimit-207427cf.js";import"./browse-ff8f6fe8.js";import"./close-circle-filled-9eb22673.js";import"./dep-0742ae64-e2730b23.js";import"./form-model-7023f79a.js";import"./_baseSet-75352e55.js";import"./isNil-c75b1b34.js";import"./omit-7a5ea809.js";import"./dep-34b004f3-3e1a5725.js";/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Pe={borderless:Boolean,defaultExpandAll:Boolean,disabled:Boolean,expandIcon:{type:[Boolean,Function],default:!0},expandIconPlacement:{type:String,default:"left",validator:function(u){return u?["left","right"].includes(u):!0}},expandMutex:Boolean,expandOnRowClick:{type:Boolean,default:!0},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array},onChange:Function};/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var qe=L({name:"TCollapse",props:Pe,setup:function(u){var l=B("collapse"),I=B("-border-less"),_=G(),f=H(u),r=f.value,x=f.expandMutex,w=f.borderless,U=f.modelValue,C=ve(r,U,u.defaultValue,u.onChange),h=_e(C,2),g=h[0],s=h[1],e=function(m){var b=[].concat(g.value||[]),y=b.indexOf(m);y>=0?b.splice(y,1):x.value?b=[m]:b.push(m),s(b)},i=S(function(){return[l.value,M({},I.value,!!w.value)]}),n=function(){var c=0;return function(){return c++}}();return N("collapseValue",g),N("updateCollapseValue",e),N("collapseProps",H(u)),N("getUniqId",n),N("renderParentTNode",_),function(){var c=_("default");return a("div",{class:i.value},[c])}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Ee={content:{type:[String,Function]},default:{type:[String,Function]},destroyOnCollapse:Boolean,disabled:{type:Boolean,default:void 0},expandIcon:{type:[Boolean,Function],default:void 0},header:{type:[String,Function]},headerRightContent:{type:[String,Function]},value:{type:[String,Number]}};/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */function Fe(v){return typeof v=="function"||Object.prototype.toString.call(v)==="[object Object]"&&!ke(v)}var Te=L({name:"TCollapsePanel",props:Ee,setup:function(u,l){var I=l.slots,_=G(),f=fe(),r=B("collapse-panel"),x=B("is-disabled"),w=B("is-clickable"),U=B("slide-down"),C=H(u),h=C.value,g=C.disabled,s=C.destroyOnCollapse,e=R("collapseValue"),i=R("updateCollapseValue"),n=R("getUniqId",function(){},!1),c=R("collapseProps"),m=c.defaultExpandAll,b=c.disabled,y=c.expandIconPlacement,P=c.expandOnRowClick,E=R("renderParentTNode"),k=h.value||n();m.value&&i(k);var V=he(),o=V.beforeEnter,Z=V.enter,Y=V.afterEnter,ee=V.beforeLeave,ae=V.leave,le=V.afterLeave,j=A(),F=S(function(){return g.value||b.value}),T=S(function(){return e.value instanceof Array?e.value.includes(k):e.value===k}),oe=S(function(){return[r.value,M({},x.value,F.value)]}),te=S(function(){return I.expandIcon||u.expandIcon}),$=function(p){var me=P.value||p.currentTarget===j.value;me&&!F.value&&i(k),p.stopPropagation()},ne=function(p){p.stopPropagation()},re=function(){return a(Re,{overlayClassName:"".concat(r.value,"__icon--default")},null)},Q=function(){var p=te.value===void 0?E:_;return a("div",{ref:j,class:"".concat(r.value,"__icon ").concat(r.value,"__icon--").concat(y.value," ").concat(T.value?"".concat(r.value,"__icon--active"):""),onClick:$},[p("expandIcon",re())])},se=function(){return a("div",{class:"".concat(r.value,"__header--blank")},null)},ue=function(){var p=_("headerRightContent");return p?a("div",{onClick:ne},[p]):null},de=function(){var p=["".concat(r.value,"__header"),M({},w.value,P.value&&!F.value)];return a("div",{class:p,onClick:$},[y.value==="left"&&Q(),_("header"),se(),ue(),y.value==="right"&&Q()])},ie=function(){return Be(a("div",{class:"".concat(r.value,"__body")},[a("div",{class:"".concat(r.value,"__content")},[f("default","content")])]),[[Ie,T.value]])},pe=function(){return T.value?a("div",{class:"".concat(r.value,"__body")},[a("div",{class:"".concat(r.value,"__content")},[f("default","content")])]):null},ce=function(){return s.value?pe():ie()};return function(){var d;return a("div",{class:oe.value},[a("div",{class:"".concat(r.value,"__wrapper")},[de(),a(we,{name:U.value,onBeforeEnter:o,onEnter:Z,onAfterEnter:Y,onBeforeLeave:ee,onLeave:ae,onAfterLeave:le},Fe(d=ce())?d:{default:function(){return[d]}})])])}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Oe=K(qe),De=K(Te);function Me(){return W.post({url:"/merchantapi/shop/config/index"})}function He(v){return W.post({url:"/merchantapi/shop/config/saveConfig",data:v})}const Le={class:"form-basic-item"},je={name:"ShopSet"},$e=L({...je,setup(v){const u=J({stockDisplay:[{label:"不显示库存数量",value:0,tips:"不显示库存数量"},{label:"显示库存数量",value:1,tips:"显示库存数量"},{label:"范围数量范围显示",value:2,tips:"范围数量范围显示：非常多(>100)；库存很多(30-100);库存一般(10-30);少量(<10)"}],fee_payer:[{label:"系统默认",value:0},{label:"商户承担",value:1},{label:"买家承担",value:2}]}),l=J({shop_name:"",shop_logo:"",show_contact:0,shop_contact:{qq:"",mobile:"",wechat:""},shop_notice:"",shop_notice_show:0,merchant_end_time:0,merchant_time:0,stock_display:1,fee_payer:0,shop_close:0,shop_close_notice:""}),I=({name:s,url:e})=>{l[s]=e},_=A(""),f=s=>{var e;_.value=(e=u.stockDisplay.find(i=>i.value===s))==null?void 0:e.tips},r=A(!0),x=async()=>{try{const{data:s}=await Me();Object.keys(l).forEach(e=>{s[e]&&(l[e]=s[e]),g(l.show_contact)})}finally{r.value=!1}},w=A(null),U={shop_name:[{required:!0,message:"请输入店铺名称"},{pattern:/^[\u4e00-\u9fa5_a-zA-Z0-9]{2,10}$/,message:"请输入2-10位中文、字母、数字、下划线"}]},C=async()=>{const s=await w.value.validate();if(typeof s!="object"&&s)try{const e=await He(l);e.code===1?(q.success(e.msg),x()):q.error(e.msg)}catch(e){q.error(e)}else q.error("请完善必填项")},h=A([]),g=s=>{s===1?h.value=["show_contact"]:h.value=[]};return x(),(s,e)=>{const i=ye,n=Ve,c=Ue("wp-upload"),m=ge,b=xe,y=De,P=Oe,E=Se,k=Ce,V=Ae;return O(),D(V,{title:"店铺设置",bordered:!1},{default:t(()=>[a(k,{ref_key:"form",ref:w,data:l,rules:U,"label-align":"left","label-width":160,"status-icon":!0,onSubmit:C},{default:t(()=>[X("div",Le,[a(n,{label:"店铺名称",name:"shop_name",help:"请输入2-10位中文、字母、数字、下划线"},{default:t(()=>[a(i,{modelValue:l.shop_name,"onUpdate:modelValue":e[0]||(e[0]=o=>l.shop_name=o),placeholder:"请输入店铺名称",class:"input-xl","show-limit-number":"",minlength:2,maxlength:10},null,8,["modelValue"])]),_:1}),a(n,{label:"店铺logo",name:"shop_logo",help:"建议尺寸：100*100"},{default:t(()=>[a(c,{theme:"image",initial:l,name:"shop_logo",app:"merchant",data:{type:"image"},onUpdate:I},null,8,["initial"])]),_:1}),a(n,{label:"营业状态",name:"shop_close",help:"休息状态下无法下单"},{default:t(()=>[a(m,{modelValue:l.shop_close,"onUpdate:modelValue":e[1]||(e[1]=o=>l.shop_close=o),options:[{label:"营业",value:0},{label:"休息",value:1}]},null,8,["modelValue"])]),_:1}),l.shop_close?(O(),D(n,{key:0,label:"休息提示",name:"shop_close_notice",help:"休息状态提示文字"},{default:t(()=>[a(i,{modelValue:l.shop_close_notice,"onUpdate:modelValue":e[2]||(e[2]=o=>l.shop_close_notice=o),placeholder:"休息状态提示文字",class:"input-xl"},null,8,["modelValue"])]),_:1})):z("",!0),a(n,{label:"公告开关",name:"shop_notice_show",help:"打开公告开关，店铺则显示公告"},{default:t(()=>[a(m,{modelValue:l.shop_notice_show,"onUpdate:modelValue":e[3]||(e[3]=o=>l.shop_notice_show=o),options:[{label:"开启",value:1},{label:"关闭",value:0}]},null,8,["modelValue"])]),_:1}),l.shop_notice_show===1?(O(),D(n,{key:1,label:"店铺公告",name:"shop_notice"},{default:t(()=>[a(b,{modelValue:l.shop_notice,"onUpdate:modelValue":e[4]||(e[4]=o=>l.shop_notice=o),placeholder:"店铺公告将在店铺页面展示",class:"input-xl"},null,8,["modelValue"])]),_:1})):z("",!0),a(n,{label:"联系方式",name:"show_contact",help:"开启后，店铺页面将显示联系方式"},{default:t(()=>[a(m,{modelValue:l.show_contact,"onUpdate:modelValue":e[5]||(e[5]=o=>l.show_contact=o),options:[{label:"开启",value:1},{label:"关闭",value:0}],onChange:g},null,8,["modelValue"])]),_:1}),a(P,{modelValue:h.value,"onUpdate:modelValue":e[9]||(e[9]=o=>h.value=o),"show-arrow":!1,"expand-icon":!1,borderless:!0,style:{padding:"0"}},{default:t(()=>[a(y,{value:"show_contact"},{default:t(()=>[X("div",null,[a(n,{label:"手机号码",name:"mobile",help:"非必填: 买家会透过联系方式与您联系，请准确填写"},{default:t(()=>[a(i,{modelValue:l.shop_contact.mobile,"onUpdate:modelValue":e[6]||(e[6]=o=>l.shop_contact.mobile=o),placeholder:"请输入手机号码",class:"input-xl"},null,8,["modelValue"])]),_:1}),a(n,{label:"QQ号",name:"qq",help:"非必填: 买家会透过联系方式与您联系，请准确填写"},{default:t(()=>[a(i,{modelValue:l.shop_contact.qq,"onUpdate:modelValue":e[7]||(e[7]=o=>l.shop_contact.qq=o),placeholder:"请输入QQ号",class:"input-xl"},null,8,["modelValue"])]),_:1}),a(n,{label:"微信号",name:"wechat",help:"非必填: 买家会透过联系方式与您联系，请准确填写"},{default:t(()=>[a(i,{modelValue:l.shop_contact.wechat,"onUpdate:modelValue":e[8]||(e[8]=o=>l.shop_contact.wechat=o),placeholder:"请输入微信号",class:"input-xl"},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["modelValue"]),a(n,{label:"库存展示",name:"stock_display",help:_.value},{default:t(()=>[a(m,{modelValue:l.stock_display,"onUpdate:modelValue":e[10]||(e[10]=o=>l.stock_display=o),options:u.stockDisplay,onChange:f},null,8,["modelValue","options"])]),_:1},8,["help"]),a(n,{label:"费率承担方",name:"rate_burden",help:"系统收取的费率，系统默认为商户承担；一般都是商户承担"},{default:t(()=>[a(m,{modelValue:l.fee_payer,"onUpdate:modelValue":e[11]||(e[11]=o=>l.fee_payer=o),options:u.fee_payer},null,8,["modelValue","options"])]),_:1}),a(n,null,{default:t(()=>[a(E,{theme:"primary",class:"form-submit-confirm",type:"submit"},{default:t(()=>[...e[12]||(e[12]=[Ne(" 提交 ",-1)])]),_:1})]),_:1})])]),_:1},8,["data"])]),_:1})}}});const _a=be($e,[["__scopeId","data-v-3b6dfdb7"]]);export{_a as default};
