import{d as q,r as f,a2 as K,A as M,l as m,V as v,W as o,a0 as S,M as e,u as r,_ as l,m as b,a3 as W,a4 as z}from"./vue-d500b9b9.js";import{f as H,l as J}from"./card-06e4f593.js";import{l as Q}from"./category-1e60480f.js";import{g as X}from"./good-2a884832.js";import{R as Y}from"./index-5c5ca650.js";import{t as Z}from"./table-01005e9b.js";import{u as h}from"./useBatchAction-9a1c38d8.js";import{s as tt,l as ot}from"./constant-0667977f.js";import et from"./detail-6a866ef9.js";import at from"./search-a8b831db.js";import{I as it}from"./index-3d8f650a.js";import{B as st}from"./index-227fbf78.js";import{S as rt}from"./index-c8633d5c.js";import{I as nt}from"./index-9b4540ef.js";import{S as lt}from"./index-7d217f2a.js";import{T as dt}from"./index-2468d71f.js";import{L as mt}from"./index-5a96e289.js";import{T as pt}from"./index-552daebe.js";import{C as ut}from"./index-7e8487d2.js";import{_ as ct}from"./index-5ae314bf.js";import"./no-list-e2f85d5e.js";import"./global-0d825ba6.js";import"./base-93829b7b.js";import"./plugin-e4c34710.js";import"./dialog-256f8652.js";import"./dep-cc1906a8-b100bfdb.js";import"./dep-581cd4f1-d83a7af3.js";import"./omit-e39915a9.js";import"./date-35f9fa82.js";import"./libs-035f127b.js";import"./index-bf58812f.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./index-2132cfb3.js";import"./dep-0742ae64-334d1564.js";import"./fake-arrow-468f6194.js";import"./index-5a6339b2.js";import"./_baseSet-6774bbcb.js";import"./close-circle-filled-8b5b4fa1.js";import"./index-63b59032.js";import"./dep-34b004f3-3e1a5725.js";import"./index-9034b695.js";import"./useLengthLimit-bf57acc2.js";import"./browse-50d5b530.js";import"./index-e5d2d240.js";import"./index-6f44b012.js";import"./index-4e516f6a.js";import"./dep-ef1abd17-ecd005e5.js";import"./add-ea894c63.js";import"./index-9691defa.js";import"./chevron-right-78d2a65d.js";import"./ellipsis-f81da9a5.js";import"./index-a9524ed3.js";import"./isNil-c75b1b34.js";import"./form-model-962c4be8.js";import"./dep-b10d5f92-053b17fa.js";const ft={key:0,class:"selected-count"},_t={class:"category-header"},gt={key:0,style:{color:"rgb(8, 43, 139)"}},vt={key:1},bt={name:"CardIndex"},ht=q({...bt,setup(yt){const y=f(),C=f();(async()=>{y.value=(await Q()).data.list??[],C.value=(await X()).data??[]})();const _=K(),s=M({cate_id:"",goods_id:"",number:"",status:""}),{pagination:D,fetchData:p,dataLoading:B,headerAffixedTop:I,rehandlePageChange:w,lists:T,searchData:N}=Z({fetchFun:J,params:s});p();const{query:k}=_.currentRoute.value;Object.keys(k).forEach(i=>{s[i]!==void 0&&(s[i]=Number(k[i]))});const n=f([]),O=i=>{n.value=i},V=f(null),$=async i=>{V.value.init(i)},U=i=>{h({title:"提醒",body:"是否确认删除？",ids:i.id,url:"/merchantapi/goods/card/del",fetchList:()=>{p(),n.value=[]}})},A=i=>{const{id:t,is_first:c}=i;H({id:t,status:c===1?0:1}).then(u=>{u.code===1&&p()})},P=()=>{h({title:"提醒",body:"是否确认删除？点击确认后删除的卡密将被放置回收站",ids:n.value,url:"/merchantapi/goods/card/del",fetchList:()=>{p(),n.value=[]}})},E=()=>{h({title:"提醒",body:"确定要清空卡密库存吗？点击确认后，卡密库存将被移至回收站！",ids:n.value,url:"/merchantapi/goods/card/clearGoodsCards",fetchList:()=>{p(),n.value=[]}})};return(i,t)=>{const c=it,d=st,u=rt,F=nt,x=lt,L=dt,g=mt,G=pt,j=ut;return m(),v(j,{class:"basic-container",bordered:!1},{title:o(()=>[t[9]||(t[9]=S("span",{style:{"padding-right":"20px"}},"库存列表",-1)),e(d,{theme:"primary",onClick:t[0]||(t[0]=a=>r(_).push("/merchant/goods/card/add"))},{icon:o(()=>[e(c,{name:"add"})]),default:o(()=>[t[6]||(t[6]=l(" 添加库存 ",-1))]),_:1}),e(d,{theme:"danger",onClick:E},{default:o(()=>[...t[7]||(t[7]=[l(" 全部清空 ",-1)])]),_:1}),e(d,{theme:"default",disabled:!n.value.length,onClick:P},{default:o(()=>[...t[8]||(t[8]=[l(" 批量删除 ",-1)])]),_:1},8,["disabled"]),n.value.length?(m(),b("p",ft,"已选"+W(n.value.length)+"项",1)):z("",!0)]),actions:o(()=>[e(d,{variant:"text",theme:"default",onClick:t[1]||(t[1]=a=>r(_).push("/merchant/goods/card/trash"))},{icon:o(()=>[e(c,{name:"delete"})]),default:o(()=>[t[10]||(t[10]=l(" 回收站 ",-1))]),_:1})]),default:o(()=>[S("div",_t,[e(x,null,{default:o(()=>[e(u,{modelValue:s.cate_id,"onUpdate:modelValue":t[2]||(t[2]=a=>s.cate_id=a),placeholder:"全部分类",clearable:"",options:y.value},null,8,["modelValue","options"]),e(u,{modelValue:s.goods_id,"onUpdate:modelValue":t[3]||(t[3]=a=>s.goods_id=a),placeholder:"全部商品",clearable:"",options:C.value,keys:{value:"id",label:"name"}},null,8,["modelValue","options"]),e(u,{modelValue:s.status,"onUpdate:modelValue":t[4]||(t[4]=a=>s.status=a),placeholder:"全部状态",clearable:"",options:r(tt)},null,8,["modelValue","options"]),e(F,{modelValue:s.number,"onUpdate:modelValue":t[5]||(t[5]=a=>s.number=a),placeholder:"请输入关键词",clearable:""},{"suffix-icon":o(()=>[e(r(at))]),_:1},8,["modelValue"]),e(d,{theme:"primary",onClick:r(N)},{default:o(()=>[...t[11]||(t[11]=[l("查询",-1)])]),_:1},8,["onClick"])]),_:1})]),e(G,{data:r(T),columns:r(ot),"row-key":"id",pagination:r(D),"selected-row-keys":n.value,loading:r(B),"header-affixed-top":r(I),"max-height":"auto","table-layout":"auto",onPageChange:r(w),onSelectChange:O},{status:o(({row:a})=>[a.status===2?(m(),v(L,{key:0,variant:"light",theme:"success"},{default:o(()=>[...t[12]||(t[12]=[l("已售",-1)])]),_:1})):(m(),v(L,{key:1,variant:"light",theme:"danger"},{default:o(()=>[...t[13]||(t[13]=[l("未售",-1)])]),_:1}))]),operation:o(({row:a})=>[e(x,null,{default:o(()=>[e(g,{theme:"primary",hover:"color",onClick:R=>A(a)},{default:o(()=>[a.is_first===1?(m(),b("span",gt," 取消优先 ")):(m(),b("span",vt," 优先销售 "))]),_:2},1032,["onClick"]),e(g,{theme:"primary",hover:"color",onClick:R=>$(a)},{default:o(()=>[...t[14]||(t[14]=[l("查看",-1)])]),_:1},8,["onClick"]),e(g,{theme:"danger",hover:"color",onClick:R=>U(a)},{default:o(()=>[...t[15]||(t[15]=[l("删除",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),empty:o(()=>[e(Y,{title:"",tip:"库存为空",type:"list"})]),_:1},8,["data","columns","pagination","selected-row-keys","loading","header-affixed-top","onPageChange"]),e(et,{ref_key:"cardDetailRef",ref:V},null,512)]),_:1})}}});const Ro=ct(ht,[["__scopeId","data-v-6babb5f6"]]);export{Ro as default};
