import{a as E,s as H,g as L,c as P}from"./cash-35947895.js";import{U as T}from"./icons-a8498fb6.js";import{M as _,T as z,R as A,F as D,l as G,B as J,e as Q,d as X,I as K,J as W,b as Y}from"./ui-ba7aaa7e.js";import{e as Z,l as $,d as x,r as p,a2 as ee,P as i,a3 as f,a4 as t,f as a,a7 as b,I as d,H as r,Q as ae,a9 as y}from"./vue-bf422dc1.js";import{_ as te}from"./index-8db2df2c.js";import"./libs-51817cd7.js";import"./plugins-ca970193.js";import"./others-9f318174.js";import"./echarts-bf9d612c.js";const le=[{label:"自动提现",value:1},{label:"手动提现",value:2}],oe=[{label:"中国工商银行",value:"中国工商银行"},{label:"中国建设银行",value:"中国建设银行"},{label:"中国农业银行",value:"中国农业银行"},{label:"中国邮政储蓄银行",value:"中国邮政储蓄银行"},{label:"招商银行",value:"招商银行"},{label:"农村信用合作社",value:"农村信用合作社"},{label:"兴业银行",value:"兴业银行"},{label:"广东发展银行",value:"广东发展银行"},{label:"深圳发展银行",value:"深圳发展银行"},{label:"民生银行",value:"民生银行"},{label:"交通银行",value:"交通银行"},{label:"中信银行",value:"中信银行"},{label:"光大银行",value:"光大银行"},{label:"中国银行",value:"中国银行"}],ne={class:"base-form"},se={class:"t-skeleton-demo-paragraph"},ce={class:"base-form"},ue={key:0},ie={name:"FinanceCollect"},de=Z({...ie,setup(re){const e=$({type:1,account:"",realname:"",idcard_number:"",collect_img:"",allow_update:0,bankname:""}),n=$({user:{money:0,freeze_money:0,cash_type:1},limit_num:0,cash_fee_type:0,cash_fee:0,auto_cash_fee:0,cash_limit_time:"",cash_min_money:0,auto_cash_money:0});(async()=>{const{data:l}=await E();Object.assign(n,l)})();const I=x(()=>n.user.cash_type===1?`自动提现：每日自动结算，最低提现${n.auto_cash_money}元，手续费${n.auto_cash_fee}`:n.user.cash_type===2?`手动提现：允许提现时间次日${n.cash_limit_time}，最低提现${n.cash_min_money}元，手续费${n.cash_fee}`:""),B=async()=>{const l=await H({cash_type:n.user.cash_type});_.success(l.msg)},q=()=>e.type===1?"支付宝账号":e.type===2?"微信账号":e.type===3?"银行卡账号":"支付宝账号",u=x(()=>e.allow_update===0),h=p(!0),g=p([]);(async()=>{const{data:l}=await L();g.value=l.cashTypesOptions,l.info&&(e.account=l.info.info.account,e.realname=l.info.info.realname,e.idcard_number=l.info.info.idcard_number,e.collect_img=l.info.collect_img,e.type=l.info.type,e.allow_update=l.info.allow_update),h.value=!1})();const F={cash_type:[{required:!0,message:"请选择收款方式"}],account:[{required:!0,message:"请输入收款账号"}],realname:[{required:!0,message:"请输入收款人姓名"}],idcard_number:[{required:!0,message:"请输入身份证号"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的身份证号"}],collect_img:[{required:!0,message:"请上传收款二维码"}]},v=p(null),O=async()=>{const l=await v.value.validate();if(typeof l!="object"&&l){(e.type===1||e.type===2)&&delete e.bankname;const o=await P(e);o.code===1?_.success(o.msg):_.error(o.msg)}},N=({name:l,url:o})=>{e[l]=o};return(l,o)=>{const V=z,R=A,c=D,C=G,k=J,w=Q,U=X,m=K,S=ee("wp-upload"),M=W,j=Y;return i(),f(j,{title:"收款设置",class:"basic-container",bordered:!1},{default:t(()=>[a(M,{loading:h.value},{default:t(()=>[b("div",ne,[a(V,{class:"header-tag",theme:"primary",variant:"light"},{icon:t(()=>[a(d(T))]),default:t(()=>[r(" 提现设置 ")]),_:1}),a(w,{"label-align":"left","label-width":150},{default:t(()=>[a(c,{label:"提现设置",name:"cash_type",help:I.value},{default:t(()=>[a(R,{modelValue:n.user.cash_type,"onUpdate:modelValue":o[0]||(o[0]=s=>n.user.cash_type=s),options:d(le)},null,8,["modelValue","options"])]),_:1},8,["help"]),a(c,null,{default:t(()=>[a(k,{theme:"primary",onClick:B},{icon:t(()=>[a(C,{name:"edit"})]),default:t(()=>[r(" 保存 ")]),_:1})]),_:1})]),_:1})]),b("div",se,[b("div",ce,[a(V,{class:"header-tag",theme:"success",variant:"light"},{icon:t(()=>[a(d(T))]),default:t(()=>[r(" 收款信息(请务必检查正确) "),u.value?(i(),ae("span",ue," [修改收款方式请联系客服]")):y("",!0)]),_:1}),a(w,{ref_key:"form",ref:v,data:e,rules:F,"label-align":"left","label-width":150,onSubmit:O},{default:t(()=>[a(c,{label:"收款方式",name:"type"},{default:t(()=>[a(U,{modelValue:e.type,"onUpdate:modelValue":o[1]||(o[1]=s=>e.type=s),options:g.value,disabled:u.value},null,8,["modelValue","options","disabled"])]),_:1}),e.type==3?(i(),f(c,{key:0,label:"开户银行",name:"bank"},{default:t(()=>[a(U,{modelValue:e.bankname,"onUpdate:modelValue":o[2]||(o[2]=s=>e.bankname=s),options:d(oe),disabled:u.value},null,8,["modelValue","options","disabled"])]),_:1})):y("",!0),a(c,{label:q,name:"account"},{default:t(()=>[a(m,{modelValue:e.account,"onUpdate:modelValue":o[3]||(o[3]=s=>e.account=s),placeholder:"请输入收款账号",disabled:u.value},null,8,["modelValue","disabled"])]),_:1}),a(c,{label:"收款人姓名",name:"realname"},{default:t(()=>[a(m,{modelValue:e.realname,"onUpdate:modelValue":o[4]||(o[4]=s=>e.realname=s),placeholder:"请输入收款人姓名",disabled:u.value},null,8,["modelValue","disabled"])]),_:1}),a(c,{label:"身份证号",name:"idcard_number"},{default:t(()=>[a(m,{modelValue:e.idcard_number,"onUpdate:modelValue":o[5]||(o[5]=s=>e.idcard_number=s),placeholder:"请输入身份证号",disabled:u.value},null,8,["modelValue","disabled"])]),_:1}),a(c,{label:"收款二维码",name:"collect_img"},{default:t(()=>[a(S,{theme:"image",initial:e,app:"merchant",name:"collect_img",data:{type:"image"},onUpdate:N},null,8,["initial"])]),_:1}),u.value?y("",!0):(i(),f(c,{key:1},{default:t(()=>[a(k,{theme:"primary",class:"form-submit-confirm",type:"submit"},{icon:t(()=>[a(C,{name:"edit"})]),default:t(()=>[r(" 保存 ")]),_:1})]),_:1}))]),_:1},8,["data"])])])]),_:1},8,["loading"])]),_:1})}}});const ke=te(de,[["__scopeId","data-v-dc2beaf9"]]);export{ke as default};
