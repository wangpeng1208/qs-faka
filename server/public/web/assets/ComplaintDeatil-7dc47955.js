import{s as A}from"./complaint-6d1259bb.js";import{e as E}from"./index-c2baa02d.js";import{f as k}from"./date-35f9fa82.js";import{M as V,_ as F}from"./index-1ae915eb.js";import{D as G,a as O}from"./index-bb883454.js";import{B as S}from"./index-bfd2121f.js";import{C as W}from"./index-5f406983.js";import{L as q,a as J}from"./index-fa2aab93.js";import{C as K}from"./index-37731a62.js";import{D as Q}from"./index-1881ed57.js";import{d as X,r as v,A as Y,U as Z,l as p,V as f,W as o,M as s,_ as a,a3 as i,u as C,m as w,a0 as I,a4 as h,G as D,a5 as ee,e as te}from"./vue-d500b9b9.js";import"./libs-035f127b.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./isNil-c75b1b34.js";import"./omit-a270a1e2.js";import"./dep-581cd4f1-74792024.js";const oe={key:0},se={key:1},ne={class:"form-container"},le=["innerHTML"],re={name:"RowDetail"},ae=X({...re,setup(ie,{expose:T}){const b=v(!1),e=Y({}),B=v(0),_=v(0),g=te(),L=[{value:"admin",label:"管理员"},{value:"merchant",label:"商户"},{value:"buyer",label:"买家"},{value:"agent",label:"上级卖家"}],M=l=>{const r=L.find(n=>n.value===l);return r?r.label:"未知"},u=v(""),N=async()=>{if(u.value==="")return;const l=await A({id:_.value,content:u.value});l.code===1?(V.success(l.msg),u.value=""):V.error(l.msg)},[U,H]=E();return T({init:l=>{var c;b.value=!0,B.value=l.complaint.user_id,_.value=l.complaint.id,Object.assign(e,l),(g==null?void 0:g.appContext.config.globalProperties.$ws({userId:_.value})).subscribe(`private-group-complaint-${_.value}`).on("message",y=>{e.messages.unshift(y)}),e&&H((c=e==null?void 0:e.complaint)==null?void 0:c.expire_at)}}),(l,r)=>{const n=G,c=O,y=Z("wp-editor"),P=S,x=W,R=q,$=J,j=K,z=Q;return p(),f(z,{visible:b.value,"onUpdate:visible":r[1]||(r[1]=d=>b.value=d),header:"投诉详情",size:"80%"},{default:o(()=>{var d;return[s(c,null,{default:o(()=>[s(n,{label:"订单编号"},{default:o(()=>{var t;return[a(i((t=e==null?void 0:e.complaint)==null?void 0:t.trade_no),1)]}),_:1}),s(n,{label:"举报原因"},{default:o(()=>{var t;return[a(i((t=e==null?void 0:e.complaint)==null?void 0:t.type),1)]}),_:1}),s(n,{label:"投诉说明"},{default:o(()=>{var t;return[a(i((t=e==null?void 0:e.complaint)==null?void 0:t.desc),1)]}),_:1}),s(n,{label:"联系方式 "},{default:o(()=>{var t;return[a(i((t=e==null?void 0:e.complaint)==null?void 0:t.mobile),1)]}),_:1}),s(n,{label:"投诉状态"},{default:o(()=>{var t,m;return[a(i(((t=e==null?void 0:e.complaint)==null?void 0:t.status)===0?"处理中":((m=e==null?void 0:e.complaint)==null?void 0:m.status)==-1?"已撤销":"已处理"),1)]}),_:1}),s(n,{label:"投诉结果 "},{default:o(()=>{var t,m;return[a(i(((t=e==null?void 0:e.complaint)==null?void 0:t.result)==0?"处理中":((m=e==null?void 0:e.complaint)==null?void 0:m.result)==1?"商家胜诉":"买家胜诉"),1)]}),_:1}),s(n,{label:"投诉时间"},{default:o(()=>{var t;return[a(i(C(k)((t=e==null?void 0:e.complaint)==null?void 0:t.create_at)),1)]}),_:1}),s(n,{label:"剩余时间"},{default:o(()=>{var t;return[((t=e==null?void 0:e.complaint)==null?void 0:t.result)==1?(p(),w("span",oe,"已结束")):(p(),w("span",se,i(C(U)),1))]}),_:1})]),_:1}),((d=e==null?void 0:e.complaint)==null?void 0:d.status)===0?(p(),f(x,{key:0},{content:o(()=>[I("div",ne,[s(y,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=t=>u.value=t),height:"200px",width:"100%",mode:"simple","user-type":"merchant"},null,8,["modelValue"]),s(P,{class:"form-submit",onClick:N},{default:o(()=>[...r[2]||(r[2]=[a("发送内容",-1)])]),_:1})])]),_:1})):h("",!0),s(j,{title:"聊天内容",class:"message-list"},{default:o(()=>[s($,{split:!0,style:{height:"500px"},scroll:{type:"virtual"}},{default:o(()=>[(p(!0),w(D,null,ee(e==null?void 0:e.messages,(t,m)=>(p(),f(R,{key:m},{content:o(()=>[s(x,{author:M(t==null?void 0:t.type),datetime:C(k)(t.create_at)},{content:o(()=>[I("div",{innerHTML:t.content},null,8,le)]),_:2},1032,["author","datetime"])]),_:2},1024))),128))]),_:1})]),_:1})]}),_:1},8,["visible"])}}});const Le=F(ae,[["__scopeId","data-v-12e6ce95"]]);export{Le as default};
