import{d as z,r as S,P as it,o as ct,M as l,j as lt,b as st,N as ut,O as ft,n as K,a2 as pt,$ as dt,l as D,V as $,W as y,u as k,a1 as M,_ as F,a3 as mt}from"./vue-d500b9b9.js";import{s as vt,b as gt}from"./category-1e60480f.js";import{R as yt}from"./index-5c5ca650.js";import{t as ht}from"./table-01005e9b.js";import{u as _t}from"./useBatchAction-9a1c38d8.js";import{f as Ct}from"./date-35f9fa82.js";import bt from"./move-8f9ddfa8.js";import{_ as Ot}from"./edit.vue_vue_type_script_setup_true_lang-44273550.js";import xt from"./link-cb9373eb.js";import{B as kt}from"./index-227fbf78.js";import{L as wt}from"./index-5a96e289.js";import{S as Pt}from"./index-7d217f2a.js";import{S as jt}from"./index-5bf49d35.js";import{T as It}from"./index-552daebe.js";import{C as St}from"./index-7e8487d2.js";import{h as tt,G as Et,E as Nt,aq as Tt,W as Dt,ap as $t,g as Ft,n as G,p as Bt,A as At,aS as Xt}from"./index-5ae314bf.js";import"./no-list-e2f85d5e.js";import"./global-0d825ba6.js";import"./base-93829b7b.js";import"./plugin-e4c34710.js";import"./dialog-256f8652.js";import"./dep-cc1906a8-b100bfdb.js";import"./dep-581cd4f1-d83a7af3.js";import"./omit-e39915a9.js";import"./libs-035f127b.js";import"./index-2132cfb3.js";import"./index-9b4540ef.js";import"./index-9034b695.js";import"./useLengthLimit-bf57acc2.js";import"./browse-50d5b530.js";import"./close-circle-filled-8b5b4fa1.js";import"./index-9de6e4fb.js";import"./dep-0742ae64-334d1564.js";import"./form-model-962c4be8.js";import"./_baseSet-6774bbcb.js";import"./isNil-c75b1b34.js";import"./index-4e516f6a.js";import"./dep-ef1abd17-ecd005e5.js";import"./add-ea894c63.js";import"./index-bf58812f.js";import"./link-da22a463.js";import"./link-2b2fc0b4.js";import"./index-a9524ed3.js";import"./dep-34b004f3-3e1a5725.js";import"./index-2468d71f.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./index-e5d2d240.js";import"./index-5a6339b2.js";import"./index-63b59032.js";import"./index-c8633d5c.js";import"./fake-arrow-468f6194.js";import"./index-6f44b012.js";import"./index-9691defa.js";import"./chevron-right-78d2a65d.js";import"./ellipsis-f81da9a5.js";import"./dep-b10d5f92-053b17fa.js";/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Lt={closeBtn:{type:[String,Boolean,Function],default:void 0},content:{type:[String,Function]},default:{type:[String,Function]},duration:{type:Number,default:3e3},footer:{type:[String,Function]},icon:{type:[Boolean,Function],default:!0},theme:{type:String,default:"info",validator:function(t){return t?["info","success","warning","error"].includes(t):!0}},title:{type:[String,Function]},onCloseBtnClick:Function,onDurationEnd:Function};/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Mt=6e3,P="16px",et={"top-left":{left:P,top:P},"top-right":{right:P,top:P},"bottom-right":{right:P,bottom:P},"bottom-left":{left:P,bottom:P}},nt=Object.keys(et);/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var ot={duration:200,easing:"linear"},Kt=function(t,e,n){if(!nt.includes(t))return null;if(t==="top-right")return[{opacity:0,transform:"translateX(".concat(e,"px)")},{opacity:1,transform:"translateX(0px)"}];if(t==="bottom-right")return[{opacity:0,transform:"translateX(".concat(e,"px)"),marginBottom:"-".concat(n,"px")},{opacity:1,transform:"translateX(0px)"}];if(t==="top-left")return[{opacity:0,transform:"translateX(-".concat(e,"px)")},{opacity:1,transform:"translateX(0px)"}];if(t==="bottom-left")return[{opacity:0,transform:"translateX(-".concat(e,"px)"),marginBottom:"-".concat(n,"px")},{opacity:1,transform:"translateX(0px)"}]},Rt=function(t,e,n){if(!nt.includes(t))return null;if(t==="top-right")return[{opacity:1,transform:"translateX(0px)"},{opacity:0,transform:"translateX(".concat(e,"px)"),marginBottom:"-".concat(n,"px")}];if(t==="bottom-right")return[{opacity:1,transform:"translateX(0px)"},{opacity:0,transform:"translateX(".concat(e,"px)")}];if(t==="top-left")return[{opacity:1,transform:"translateX(0px)"},{opacity:0,transform:"translateX(-".concat(e,"px)"),marginBottom:"-".concat(n,"px")}];if(t==="bottom-left")return[{opacity:1,transform:"translateX(0px)"},{opacity:0,transform:"translateX(-".concat(e,"px)")}]},Vt=function(t,e){if(t){var n=(t==null?void 0:t.offsetHeight)||0,c=(t==null?void 0:t.offsetWidth)||0,f=Kt(e,c,n);f&&t.animate&&t.animate(f,ot)}},q=function(t,e,n){if(t){var c=(t==null?void 0:t.offsetHeight)||0,f=(t==null?void 0:t.offsetWidth)||0,d=Rt(e,f,c);if(!d)return n();var u=t.animate&&t.animate(d,ot);u?u.onfinish=function(){n()}:(t.style.display="none",n())}};/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */function J(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);t&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable})),e.push.apply(e,n)}return e}function Z(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?J(Object(e),!0).forEach(function(n){G(o,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):J(Object(e)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(e,n))})}return o}var Ut=z({name:"TNotification",props:Z(Z({},Lt),{},{placement:String}),setup:function(t,e){var n=e.slots,c=e.expose,f=tt("notification"),d=Et("classPrefix"),u=d.classPrefix,b=Nt({InfoCircleFilledIcon:Tt,CheckCircleFilledIcon:Dt,CloseIcon:$t}),I=b.InfoCircleFilledIcon,h=b.CheckCircleFilledIcon,w=b.CloseIcon,_=Bt(),C=Ft(),N=S(null),j=S(null),p=function(s){var O=j.value;q(O,t.placement,function(){var T;(T=t.onCloseBtnClick)===null||T===void 0||T.call(t,{e:s})})},i=function(){var s;if(t.icon===!1)return null;if(At(t.icon))s=t.icon(lt);else if(n.icon)s=n.icon(null);else if(t.theme){var O=t.theme==="success"?l(h,{class:"".concat(u.value,"-is-").concat(t.theme)},null):l(I,{class:"".concat(u.value,"-is-").concat(t.theme)},null);s=l("div",{class:"".concat(u.value,"-notification__icon")},[O])}return s},g=function(){var s=l(w,null,null);return l("span",{class:"".concat(u.value,"-message__close"),onClick:p},[_("closeBtn",s)])},X=function(){return l("div",{class:"".concat(f.value,"__content")},[C("default","content")])},a=function(){t.duration&&clearTimeout(N.value)},r=function(){t.duration&&(N.value=Number(setTimeout(function(){a();var s=j.value;q(s,t.placement,function(){var O;(O=t.onDurationEnd)===null||O===void 0||O.call(t)})},t.duration)))};return it(function(){t.duration&&r()}),ct(function(){var m=j.value;Vt(m,t.placement)}),c({close:p}),function(){return l("div",{ref:j,class:"".concat(f.value),onMouseenter:a,onMouseleave:r},[i(),l("div",{class:"".concat(f.value,"__main")},[l("div",{class:"".concat(f.value,"__title__wrap")},[l("span",{class:"".concat(f.value,"__title")},[_("title")]),g()]),X(),_("footer")])])}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */function Q(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);t&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable})),e.push.apply(e,n)}return e}function V(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Q(Object(e),!0).forEach(function(n){G(o,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):Q(Object(e)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(e,n))})}return o}var zt=z({props:{placement:{type:String,default:"top-right",validator:function(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)>-1}}},setup:function(t,e){var n=e.expose,c=tt("notification-list"),f=t.placement,d=S([]),u=S([]),b=st(function(){return V({zIndex:Mt},et[f])}),I=function(i){return d.value.push(i),d.value.length-1},h=function(i){d.value.splice(i,1)},w=function(){d.value=[]},_=function(i){if(i)return isNaN(Number(i))?i:"".concat(i,"px")},C=function(i){var g={marginBottom:P};return i.offset&&(g.position="relative",g.left=_(i.offset[0]),g.top=_(i.offset[1])),i.zIndex&&(g["z-index"]=i.zIndex),g},N=function(i,g){return V(V({},g),{},{onCloseBtnClick:function(a){return g.onCloseBtnClick&&g.onCloseBtnClick(a),h(i)},onDurationEnd:function(){return g.onDurationEnd&&g.onDurationEnd(),h(i)}})},j=function(i){i&&u.value.push(i)};return n({add:I,remove:h,removeAll:w,list:d,notificationList:u}),function(){if(d.value.length)return l("div",{class:"".concat(c.value,"__show"),style:b.value},[d.value.map(function(p,i){return l(Ut,ut({ref:j,key:p.id,style:C(p)},N(i,p)),null)})])}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */function W(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);t&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable})),e.push.apply(e,n)}return e}function U(o){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?W(Object(e),!0).forEach(function(n){G(o,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):W(Object(e)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(e,n))})}return o}var Y=0,B=new Map,Gt=function(t,e){Y+=1;var n=U({placement:"top-right",zIndex:6e3,attach:"body",id:Y},t);n.content=t.content?t.content:"";var c=Xt(n.attach);B.get(c)||B.set(c,{});var f=B.get(c)[n.placement];if(f)f.component.exposed.add(n);else{var d=document.createElement("div"),u=l(zt,{placement:n.placement});(e??E._context)&&(u.appContext=e??E._context),c.appendChild(d),ft(u,d),u.component.exposed.add(n),B.get(c)[n.placement]=u,f=u}return new Promise(function(b){var I=B.get(c)[n.placement];K(function(){var h,w=(h=I.component.exposed.notificationList.value)!==null&&h!==void 0?h:[];b(w==null?void 0:w.find(function(_){var C;return((C=_.$)===null||C===void 0||(C=C.vnode)===null||C===void 0?void 0:C.key)===n.id}))})})},A=function(t,e,n){var c=U(U({},e),{},{theme:t});return Gt(c,n)},R={info:function(t,e){return A("info",t,e)},success:function(t,e){return A("success",t,e)},warning:function(t,e){return A("warning",t,e)},error:function(t,e){return A("error",t,e)},close:function(t){t.then(function(e){return e.close()})},closeAll:function(){B.forEach(function(t){Object.keys(t).forEach(function(e){t[e].component.exposed.removeAll()})})}},E=A;E.install=function(o){o.config.globalProperties.$notify=A,Object.keys(R).forEach(function(t){o.config.globalProperties.$notify[t]=R[t]}),E._context=o._context};Object.keys(R).forEach(function(o){E[o]=R[o]});const Ht=[{title:"排序",colKey:"drag",width:"5%",cell:o=>o(bt),align:"center",ellipsis:!0},{title:"分类名称",align:"left",colKey:"name",ellipsis:!0},{title:"商品数量",colKey:"goods_count",ellipsis:!0},{title:"状态",colKey:"status",ellipsis:!0},{title:"首页显示",colKey:"is_show",ellipsis:!0},{title:"创建时间",colKey:"create_at",cell(o,t){return o("span",Ct(t.row.create_at))}},{align:"left",colKey:"operation",title:"操作",width:"200px",fixed:"right",ellipsis:!0}],qt={name:"GoodsCategory"},Ye=z({...qt,setup(o){const t=pt(),{pagination:e,fetchData:n,dataLoading:c,headerAffixedTop:f,rehandlePageChange:d,lists:u}=ht({fetchFun:gt,params:{name:"",status:""}});n();const b=S([]),I=a=>{b.value=a},h=S(),w=async a=>{var r,m,s;await K(),(r=h.value)==null||r.featchCategoryLink(a.id),(m=h.value)==null||m.getTemplate(),(s=h.value)==null||s.getUserTemplate(a.id)},_=S(),C=async a=>{var r,m;await K(),(r=_.value)==null||r.open("edit"),(m=_.value)==null||m.getDetail(a)},N=async()=>{var a;await K(),(a=_.value)==null||a.open("add")},j=async a=>{_t({title:"提醒",body:"是否确认删除？",ids:a.id,url:"/merchantapi/goods/category/del",fetchList:()=>{n(),b.value=[]}})},p=async a=>{const r=await vt(a);r.code===1?(n(),E.success({title:"提醒",content:r.msg})):E.error({title:"提醒",content:r.msg})},i=async a=>{const{id:r,status:m}=a;p({id:r,field:"status",value:m})},g=async a=>{const r={id:a.id,field:"is_show",value:a.is_show};p(r)},X=a=>{if(a.currentIndex-a.targetIndex>0){const r={id:a.current.id,field:"sort",value:a.target.sort+1};p(r)}else{const r={id:a.current.id,field:"sort",value:a.target.sort-1};p(r)}};return(a,r)=>{const m=kt,s=wt,O=Pt,T=jt,rt=It,at=St,L=dt("perms");return D(),$(at,{title:"商品分类",class:"basic-container",bordered:!1},{default:y(()=>{var H;return[l(rt,{data:k(u),"drag-sort":"row-handler",columns:k(Ht),"row-key":"id","vertical-align":"middle",hover:((H=k(u))==null?void 0:H.length)>0,"selected-row-keys":b.value,loading:k(c),"lazy-load":"","header-affixed-top":k(f),"max-height":"90%",pagination:k(e),onDragSort:X,onPageChange:k(d),onSelectChange:I},{topContent:y(()=>[M((D(),$(m,{style:{"margin-bottom":"15px"},onClick:r[0]||(r[0]=v=>N())},{default:y(()=>[...r[1]||(r[1]=[F(" 添加 ",-1)])]),_:1})),[[L,["merchantapi/goods/category/add"]]])]),goods_count:y(({row:v})=>[l(O,null,{default:y(()=>[l(s,{theme:"primary",onClick:x=>k(t).push(`/merchant/goods/index?cate_id=${v.id}`)},{default:y(()=>[F(mt(v.goods_count),1)]),_:2},1032,["onClick"])]),_:2},1024)]),status:y(({row:v})=>[l(T,{modelValue:v.status,"onUpdate:modelValue":x=>v.status=x,"custom-value":[1,0],onClick:x=>i(v)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),is_show:y(({row:v})=>[l(T,{modelValue:v.is_show,"onUpdate:modelValue":x=>v.is_show=x,"custom-value":[1,0],onClick:x=>g(v)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),operation:y(({row:v})=>[l(O,null,{default:y(()=>[M((D(),$(s,{theme:"primary",hover:"color",onClick:x=>w(v)},{default:y(()=>[...r[2]||(r[2]=[F("链接",-1)])]),_:1},8,["onClick"])),[[L,["merchantapi/goods/category"]]]),M((D(),$(s,{theme:"primary",hover:"color",onClick:x=>k(t).push(`/merchant/goods/card?cate_id=${v.id}`)},{default:y(()=>[...r[3]||(r[3]=[F("库存",-1)])]),_:1},8,["onClick"])),[[L,["merchantapi/goods/card"]]]),M((D(),$(s,{theme:"primary",hover:"color",onClick:x=>C(v)},{default:y(()=>[...r[4]||(r[4]=[F("编辑",-1)])]),_:1},8,["onClick"])),[[L,["merchantapi/goods/category/edit"]]]),M((D(),$(s,{theme:"danger",hover:"color",onClick:x=>j(v)},{default:y(()=>[...r[5]||(r[5]=[F("删除",-1)])]),_:1},8,["onClick"])),[[L,["merchantapi/goods/category/del"]]])]),_:2},1024)]),empty:y(()=>[l(yt,{title:"",tip:"商品分类为空",type:"list"})]),_:1},8,["data","columns","hover","selected-row-keys","loading","header-affixed-top","pagination","onPageChange"]),l(xt,{ref_key:"linkRef",ref:h},null,512),l(Ot,{ref_key:"editRef",ref:_,onSuccess:k(n)},null,8,["onSuccess"])]}),_:1})}}});export{Ye as default};
