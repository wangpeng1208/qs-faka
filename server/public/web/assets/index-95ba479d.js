import{u as te,j as oe,k as ne}from"./user-cad69e65.js";import{t as re}from"./table-d7bc18a8.js";import ie from"./collect-dd4e018a.js";import{f as ae}from"./date-35f9fa82.js";import{_ as le}from"./detail.vue_vue_type_script_setup_true_lang-60e14aa4.js";import{_ as ce}from"./edit.vue_vue_type_script_setup_true_lang-7530b904.js";import se from"./message-47855ae5.js";import{_ as me}from"./money.vue_vue_type_script_setup_true_lang-e266e562.js";import{_ as ue}from"./rate.vue_vue_type_script_setup_true_lang-fae88ffa.js";import{_ as fe}from"./role.vue_vue_type_script_setup_true_lang-81a07fe6.js";import{_ as de}from"./row-search.vue_vue_type_script_setup_true_lang-ab02b4b7.js";import{G as pe,h as ve,E as ge,aq as _e,X as ye,B as he,C as Ce,g as be,n as ke,p as we,Q as xe,w as Be,M as A}from"./index-1ae915eb.js";import{B as Pe}from"./index-bfd2121f.js";import{I as Re}from"./index-34a2bb7b.js";import{L as Oe}from"./index-dd29d0a0.js";import{P as Ie}from"./index-ca6ec6df.js";import{u as $e}from"./dep-581cd4f1-74792024.js";import{d as H,t as Se,b as Fe,M as n,N as Ve,r as C,A as je,$ as Te,l as m,V as u,W as r,a0 as D,a1 as y,_ as c,u as h}from"./vue-d500b9b9.js";import{D as Ae}from"./index-e6da58d2.js";import{S as De}from"./index-898a5e08.js";import{T as Ne}from"./index-5571e347.js";import{T as Ke}from"./index-9e154440.js";import{C as Ee}from"./index-37731a62.js";import"./global-0d825ba6.js";import"./index-615192d6.js";import"./omit-a270a1e2.js";import"./dep-0742ae64-c1faefd0.js";import"./dep-cc1906a8-b100bfdb.js";import"./dep-34b004f3-3e1a5725.js";import"./isNil-c75b1b34.js";import"./index-4d676a86.js";import"./index-0100952e.js";import"./form-model-ef5bf9d4.js";import"./_baseSet-7d17e61f.js";import"./close-circle-filled-52c8e9f4.js";import"./index-3f8df98e.js";import"./useLengthLimit-f75e20cf.js";import"./browse-58fd0d18.js";import"./index-9a98a6df.js";import"./index-6889856c.js";import"./dialog-b324d954.js";import"./libs-035f127b.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./index-750122d6.js";import"./index-1881ed57.js";import"./index-044da480.js";import"./index-bb883454.js";import"./index-757c1662.js";import"./fake-arrow-6b326c36.js";import"./index-ea41187d.js";import"./index-012f82c2.js";import"./dep-ef1abd17-e2c5098b.js";import"./add-4cdc8168.js";import"./role-6f690db5.js";import"./index-58da0dd4.js";import"./index-7d80c0e7.js";import"./index-3d002e46.js";import"./index-817224be.js";import"./chevron-right-c3c09f0e.js";import"./ellipsis-880d44a3.js";import"./plugin-7ba31650.js";import"./dep-b10d5f92-42a6e073.js";/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Me={cancelBtn:{type:[String,Object,Function],default:""},confirmBtn:{type:[String,Object,Function],default:""},content:{type:[String,Function]},default:{type:[String,Function]},destroyOnClose:{type:Boolean,default:!0},icon:{type:Function},placement:{type:String,default:"top",validator:function(o){return o?["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"].includes(o):!0}},popupProps:{type:Object},showArrow:{type:Boolean,default:!0},theme:{type:String,default:"default",validator:function(o){return o?["default","warning","danger"].includes(o):!0}},triggerElement:{type:[String,Function]},visible:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultVisible:Boolean,onCancel:Function,onConfirm:Function,onVisibleChange:Function};/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */function W(s,o){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);o&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),i.push.apply(i,l)}return i}function ze(s){for(var o=1;o<arguments.length;o++){var i=arguments[o]!=null?arguments[o]:{};o%2?W(Object(i),!0).forEach(function(l){ke(s,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(i,l))})}return s}var Ge=H({name:"TPopconfirm",props:Me,setup:function(o){var i=pe("popconfirm"),l=i.globalConfig,f=ve("popconfirm"),P=ge({InfoCircleFilledIcon:_e,ErrorCircleFilledIcon:ye}),R=P.InfoCircleFilledIcon,O=P.ErrorCircleFilledIcon,w=Se(o),N=w.visible,K=w.modelValue,I=he(N,K,o.defaultVisible,o.onVisibleChange,"visible"),$=Ce(I,2),S=$[0],x=$[1],F=function(d){var t;(t=o.onConfirm)===null||t===void 0||t.call(o,{e:d}),x(!1,{e:d,trigger:"confirm"})},E=function(d){var t;(t=o.onCancel)===null||t===void 0||t.call(o,{e:d}),x(!1,{e:d,trigger:"cancel"})},B=$e({confirmBtnAction:F,cancelBtnAction:E}),M=B.getConfirmBtn,k=B.getCancelBtn,z=we(),V=Fe(function(){return ze({showArrow:o.showArrow,overlayClassName:f.value,trigger:"click",destroyOnClose:o.destroyOnClose,placement:o.placement},o.popupProps)}),G=xe(),L=function(){var d=k({cancelBtn:o.cancelBtn,globalCancel:l.value.cancel,className:"".concat(f.value,"__cancel"),size:"small"}),t=M({theme:o.theme,confirmBtn:o.confirmBtn,globalConfirm:l.value.confirm,globalConfirmBtnTheme:l.value.confirmBtnTheme,className:"".concat(f.value,"__confirm"),size:"small"}),e=function(){var v={default:R,warning:O,danger:O}[o.theme],p=o.theme||"default";return G("icon",n(v,{class:"".concat(f.value,"__icon--").concat(p)},null))};return n("div",{class:"".concat(f.value,"__content")},[n("div",{class:"".concat(f.value,"__body")},[e(),n("div",{class:"".concat(f.value,"__inner")},[z("content")])]),!!(d||t)&&n("div",{class:"".concat(f.value,"__buttons")},[d,t])])},X=function(d,t){x(d,t)},j=be();return function(){return n(Ie,Ve({visible:S.value},V.value,{onVisibleChange:X}),{default:function(){return[j("default","triggerElement")]},content:L})}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Le=Be(Ge);const Xe=[{colKey:"id",title:"ID",width:"80px"},{colKey:"username",title:"账号",width:"180px"},{colKey:"mobile",title:"手机",width:"180px"},{colKey:"idcard_number",title:"身份证号码",width:"180px"},{colKey:"money",title:"余额",width:"90px"},{colKey:"freeze_money",title:"冻结金额",width:"160px"},{colKey:"status",title:"状态",width:"90px"},{colKey:"is_freeze",title:"冻结",width:"90px"},{colKey:"complaint_count",title:"投诉数",width:"90px"},{colKey:"create_at",title:"注册时间",cell(s,o){return s("span",ae(o.row.create_at))},width:"180px"},{colKey:"operate",title:"操作",width:"120px",fixed:"right"}],Je={class:"category-header c-flex"},qe={class:"category-header c-flex"},Qe={class:"l"},We={calss:"edit",style:{float:"left",height:"30px"}},ao=H({__name:"index",setup(s){const{pagination:o,fetchData:i,dataLoading:l,headerAffixedTop:f,rehandlePageChange:P,lists:R,searchData:O}=re({fetchFun:ne});i();const w=C(),N=t=>{var e;(e=w.value)==null||e.init(t)},K=async t=>{const e=await te({user_id:t});e.code===1?(A.success(e.msg),i()):A.error(e.msg)},I=C(),$=t=>{var e;(e=I.value)==null||e.init(t)},S=C(),x=t=>{var e;(e=S.value)==null||e.init(t)},F=C(),E=t=>{var e;(e=F.value)==null||e.init(t)},B=C(),M=t=>{var e;(e=B.value)==null||e.init(t)},k=C([""]),z=t=>{k.value.includes(t)?k.value=[]:k.value=[t]},V=C(),G=t=>{var e;(e=V.value)==null||e.init(t)},L=je({}),X=t=>{Object.assign(L,t),O()},j=C(),b=t=>{var e;(e=j.value)==null||e.init(t)},d=async t=>{const e=await oe({id:t});e.code===1?(A.success(e.msg),i()):A.error(e.msg)};return(t,e)=>{const J=Pe,v=Re,p=Oe,U=Le,Y=Ae,q=De,T=Ne,Z=Ke,ee=Ee,g=Te("perms");return m(),u(ee,{title:"用户管理",class:"basic-container",bordered:!1},{default:r(()=>{var Q;return[D("div",Je,[n(de,{ref:"searchFormRef",onSuccess:X},null,512)]),D("div",qe,[D("div",Qe,[y((m(),u(J,{theme:"primary",onClick:e[0]||(e[0]=a=>b(0))},{default:r(()=>[...e[1]||(e[1]=[c("添加",-1)])]),_:1})),[[g,["adminapi/merchant/user/add"]]])])]),n(Z,{data:h(R),columns:h(Xe),"row-key":"id","expand-on-row-click":!1,"expanded-row-keys":k.value,"expand-icon":!1,hover:((Q=h(R))==null?void 0:Q.length)>0,pagination:h(o),"header-affixed-top":h(f),"max-height":"100%",loading:h(l),onPageChange:h(P)},{expandedRow:r(({row:a})=>[D("div",We,[n(q,null,{separator:r(()=>[n(Y,{layout:"vertical"})]),default:r(()=>[y((m(),u(p,{theme:"primary",hover:"color",onClick:_=>b(a.id)},{default:r(()=>[n(v,{name:"edit"}),e[2]||(e[2]=c(" 编辑 ",-1))]),_:1},8,["onClick"])),[[g,["adminapi/merchant/user/eidt"]]]),y((m(),u(p,{theme:"primary",hover:"color",onClick:_=>G(a.id)},{default:r(()=>[n(v,{name:"chat-message"}),e[3]||(e[3]=c(" 发送消息 ",-1))]),_:1},8,["onClick"])),[[g,["adminapi/merchant/user/message"]]]),y((m(),u(p,{theme:"primary",hover:"color",onClick:_=>M(a.id)},{default:r(()=>[n(v,{name:"currency-exchange"}),e[4]||(e[4]=c(" 资金管理 ",-1))]),_:1},8,["onClick"])),[[g,["adminapi/merchant/user/money"]]]),y((m(),u(p,{theme:"primary",hover:"color",onClick:_=>$(a.id)},{default:r(()=>[n(v,{name:"currency-exchange"}),e[5]||(e[5]=c(" 收款信息 ",-1))]),_:1},8,["onClick"])),[[g,["adminapi/merchant/user/collectDetail"]]]),y((m(),u(p,{theme:"primary",hover:"color",onClick:_=>E(a.id)},{default:r(()=>[n(v,{name:"bookmark"}),e[6]||(e[6]=c(" 分配角色 ",-1))]),_:1},8,["onClick"])),[[g,["adminapi/merchant/user/role"]]]),y((m(),u(p,{theme:"primary",hover:"color",onClick:_=>x(a)},{default:r(()=>[n(v,{name:"application"}),e[7]||(e[7]=c(" 设置费率 ",-1))]),_:1},8,["onClick"])),[[g,["adminapi/merchant/user/rate"]]]),y((m(),u(p,{theme:"primary",hover:"color",onClick:_=>K(a.id)},{default:r(()=>[n(v,{name:"lock-off"}),e[8]||(e[8]=c(" 登录解锁 ",-1))]),_:1},8,["onClick"])),[[g,["adminapi/merchant/user/unlock"]]]),n(U,{content:"确认删除吗",onConfirm:_=>d(a.id)},{default:r(()=>[y((m(),u(p,{theme:"danger",hover:"color"},{default:r(()=>[n(v,{name:"delete"}),e[9]||(e[9]=c(" 删除 ",-1))]),_:1})),[[g,["adminapi/merchant/user/del"]]])]),_:1},8,["onConfirm"])]),_:2},1024)])]),status:r(({row:a})=>[a.status===1?(m(),u(T,{key:0,variant:"light",theme:"success"},{default:r(()=>[...e[10]||(e[10]=[c("启用",-1)])]),_:1})):(m(),u(T,{key:1,variant:"light",theme:"danger"},{default:r(()=>[...e[11]||(e[11]=[c("禁用",-1)])]),_:1}))]),is_freeze:r(({row:a})=>[a.is_freeze===1?(m(),u(T,{key:0,variant:"light",theme:"danger"},{default:r(()=>[...e[12]||(e[12]=[c("是",-1)])]),_:1})):(m(),u(T,{key:1,variant:"light",theme:"success"},{default:r(()=>[...e[13]||(e[13]=[c("否",-1)])]),_:1}))]),operate:r(({row:a})=>[n(q,null,{default:r(()=>[n(p,{theme:"primary",size:"small",onClick:_=>N(a)},{default:r(()=>[...e[14]||(e[14]=[c("详情",-1)])]),_:1},8,["onClick"]),n(p,{theme:"primary",size:"small",onClick:_=>z(a.id)},{default:r(()=>[...e[15]||(e[15]=[c("操作",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:1},8,["data","columns","expanded-row-keys","hover","pagination","header-affixed-top","loading","onPageChange"]),n(ce,{ref_key:"editRef",ref:j,onSuccess:h(i)},null,8,["onSuccess"]),n(me,{ref_key:"moneyRef",ref:B,onSuccess:h(i)},null,8,["onSuccess"]),n(se,{ref_key:"messageRef",ref:V},null,512),n(fe,{ref_key:"roleRef",ref:F},null,512),n(ue,{ref_key:"rateRef",ref:S},null,512),n(ie,{ref_key:"collectRef",ref:I},null,512),n(le,{ref_key:"detailRef",ref:w},null,512)]}),_:1})}}});export{ao as default};
