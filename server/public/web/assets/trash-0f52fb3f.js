import{d as U,a2 as E,A as F,r as c,o as K,l as x,V as W,W as e,a0 as L,M as o,_ as l,u as r,m as j,a3 as q,a4 as H}from"./vue-d500b9b9.js";import{g as J}from"./card-2fe89aea.js";import{l as O}from"./category-0a39d79d.js";import{g as Q}from"./good-d4ddceee.js";import{R as X}from"./index-bef910b5.js";import{t as Y}from"./table-48199bef.js";import{u as _}from"./useBatchAction-590dba1a.js";import{t as Z}from"./constant-464c480e.js";import tt from"./detail-6c608530.js";import{B as et}from"./index-c63cfed1.js";import{I as ot}from"./index-ea2a85c9.js";import{S as at}from"./index-18bbad02.js";import{S as it}from"./index-0fc44882.js";import{L as rt}from"./index-95260792.js";import{T as st}from"./index-98194870.js";import{C as lt}from"./index-c2a11f34.js";import{_ as nt}from"./index-6b6fbd51.js";import"./no-list-e2f85d5e.js";import"./global-0d825ba6.js";import"./base-9eb484ec.js";import"./plugin-cad85236.js";import"./dialog-8ec74ee0.js";import"./dep-cc1906a8-b100bfdb.js";import"./dep-581cd4f1-15e6aa5c.js";import"./omit-82a91481.js";import"./date-69e2f1fa.js";import"./libs-d79b82a8.js";import"./index-f937956d.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./dep-0742ae64-0833915c.js";import"./fake-arrow-d40b6f7e.js";import"./index-424a7ec0.js";import"./index-757197b9.js";import"./index-e205a427.js";import"./useLengthLimit-14a00f39.js";import"./browse-35e2443f.js";import"./close-circle-filled-3424a47b.js";import"./_baseSet-c1826ef2.js";import"./index-b8d4edf9.js";import"./dep-34b004f3-3e1a5725.js";import"./index-5be2c846.js";import"./index-03ea1434.js";import"./index-d6e54721.js";import"./index-912dcce2.js";import"./dep-ef1abd17-afe34463.js";import"./add-291eb586.js";import"./index-9bccbd74.js";import"./chevron-right-6ae15ba3.js";import"./ellipsis-1db91eb9.js";import"./index-ae3a9dfb.js";import"./isNil-c75b1b34.js";import"./form-model-0fc8dc05.js";import"./dep-b10d5f92-c98df075.js";const dt={key:0,class:"selected-count"},mt={class:"category-header c-flex"},pt={name:"CardTrash"},ct=U({...pt,setup(ut){const V=E(),d=F({cate_id:"",goods_id:""}),{pagination:B,fetchData:p,dataLoading:D,headerAffixedTop:S,rehandlePageChange:T,lists:u,searchData:R}=Y({fetchFun:J,params:d}),g=c([]),w=async()=>{const{data:a}=await O();g.value=a.list},h=c([]),A=async()=>{const{data:a}=await Q();h.value=a},i=c([]),f=a=>{i.value=a},v=async a=>{a&&f(a.id),_({title:"确认删除当前所选内容？",body:"删除后，所选信息将被清空，且无法恢复",ids:i.value,url:"/merchantapi/goods/card/trashBatchDel",fetchList:()=>{p(),i.value=[]}})},N=a=>{a>0&&f(a),_({title:"确认恢复当前所选内容？",body:"恢复后，所选信息将被恢复，且无法恢复",ids:i.value,url:"/merchantapi/goods/card/trashBatchRestore",fetchList:()=>{p(),i.value=[]}})},$=()=>{_({title:"确认清空回收站？",body:"清空后，回收站将被清空，且无法恢复",ids:i.value,url:"/merchantapi/goods/card/clear",fetchList:()=>{p(),i.value=[]}})};K(()=>{p(),w(),A()});const y=c(null),G=async a=>{y.value.init(a)};return(a,t)=>{const m=et,I=ot,C=at,b=it,k=rt,P=st,z=lt;return x(),W(z,{class:"basic-container",bordered:!1},{title:e(()=>{var n;return[t[7]||(t[7]=L("span",{style:{"padding-right":"20px"}},"库存回收站",-1)),o(m,{variant:"base",disabled:!i.value.length,onClick:N},{default:e(()=>[...t[4]||(t[4]=[l(" 批量恢复 ",-1)])]),_:1},8,["disabled"]),o(m,{variant:"base",theme:"danger",disabled:!i.value.length,onClick:t[0]||(t[0]=s=>v(""))},{default:e(()=>[...t[5]||(t[5]=[l(" 批量删除 ",-1)])]),_:1},8,["disabled"]),o(m,{theme:"danger",disabled:!((n=r(u))!=null&&n.length),onClick:$},{default:e(()=>[...t[6]||(t[6]=[l("清空回收站",-1)])]),_:1},8,["disabled"]),i.value.length?(x(),j("p",dt,"已选"+q(i.value.length)+"项",1)):H("",!0)]}),actions:e(()=>[o(m,{variant:"text",theme:"default",onClick:t[1]||(t[1]=n=>r(V).push("/merchant/goods/card"))},{icon:e(()=>[o(I,{name:"rollback"})]),default:e(()=>[t[8]||(t[8]=l(" 返回 ",-1))]),_:1})]),default:e(()=>{var n;return[L("div",mt,[o(b,null,{default:e(()=>[o(C,{modelValue:d.cate_id,"onUpdate:modelValue":t[2]||(t[2]=s=>d.cate_id=s),placeholder:"全部分类",type:"search",clearable:"",options:g.value},null,8,["modelValue","options"]),o(C,{modelValue:d.goods_id,"onUpdate:modelValue":t[3]||(t[3]=s=>d.goods_id=s),placeholder:"全部商品",type:"search",clearable:"",options:h.value,keys:{value:"id",label:"name"}},null,8,["modelValue","options"]),o(m,{theme:"primary",onClick:r(R)},{default:e(()=>[...t[9]||(t[9]=[l("查询",-1)])]),_:1},8,["onClick"])]),_:1})]),o(P,{data:r(u),columns:r(Z),"row-key":"id",hover:!!((n=r(u))!=null&&n.length),pagination:r(B),"selected-row-keys":i.value,loading:r(D),"header-affixed-top":r(S),"table-layout":"auto","max-height":"auto",onPageChange:r(T),onSelectChange:f},{operation:e(({row:s})=>[o(b,null,{default:e(()=>[o(k,{size:"small",variant:"outline",theme:"primary",onClick:M=>G(s)},{default:e(()=>[...t[10]||(t[10]=[l("查看",-1)])]),_:1},8,["onClick"]),o(k,{size:"small",variant:"outline",theme:"danger",onClick:M=>v(s)},{default:e(()=>[...t[11]||(t[11]=[l("删除",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),empty:e(()=>[o(X,{title:"",tip:"库存回收站为空",type:"list"})]),_:1},8,["data","columns","hover","pagination","selected-row-keys","loading","header-affixed-top","onPageChange"]),o(tt,{ref_key:"cardDetailRef",ref:y},null,512)]}),_:1})}}});const _e=nt(ct,[["__scopeId","data-v-be3745f7"]]);export{_e as default};
