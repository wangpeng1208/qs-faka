import{d as $,a2 as H,r as S,A as j,U as A,l as c,V as v,W as o,M as s,u as d,_ as r,a3 as i,a0 as f,a4 as E,m as F,G,a5 as O}from"./vue-d500b9b9.js";import{s as P,d as W}from"./complaint-466ef89e.js";import{e as z}from"./index-c2baa02d.js";import{bI as J,M as C,_ as K}from"./index-1ae915eb.js";import{f as x}from"./date-35f9fa82.js";import{I as Q}from"./index-34a2bb7b.js";import{B as X}from"./index-bfd2121f.js";import{D as Y,a as Z}from"./index-bb883454.js";import{C as h}from"./index-5f406983.js";import{L as D,a as ee}from"./index-fa2aab93.js";import{C as te}from"./index-37731a62.js";import"./libs-035f127b.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./isNil-c75b1b34.js";import"./omit-a270a1e2.js";const oe={class:"form-container"},se={class:"message-list"},ne=["innerHTML"],ae={name:"RowDetail"},re=$({...ae,setup(le){const{wss:w}=J(),p=H(),k=p.currentRoute.value.query.id;w.subscribe(`private-group-complaint-${k}`).on("message",a=>{e.messages.unshift(a)});const V=[{value:"admin",label:"管理员"},{value:"merchant",label:"商户"},{value:"buyer",label:"买家"},{value:"agent",label:"上级卖家"}],I=a=>{const n=V.find(_=>_.value===a);return n?n.label:"未知"},u=S(""),T=async()=>{if(u.value==="")return;const a=await P({id:p.currentRoute.value.query.id,content:u.value});a.code===1?(C.success(a.msg),u.value=""):C.error(a.msg)},e=j({}),[B,L]=z();return(async()=>{var n;const{data:a}=await W({id:p.currentRoute.value.query.id});Object.assign(e,a),e&&L((n=e==null?void 0:e.complaint)==null?void 0:n.expire_at)})(),(a,n)=>{const _=Q,g=X,l=Y,M=Z,R=A("wp-editor"),y=h,N=D,q=ee,U=te;return c(),v(U,{title:"投诉详情",class:"basic-container",bordered:!1},{actions:o(()=>[s(g,{variant:"text",theme:"default",onClick:n[0]||(n[0]=b=>d(p).push("/merchant/order/complaint"))},{icon:o(()=>[s(_,{name:"rollback"})]),default:o(()=>[n[2]||(n[2]=r(" 返回 ",-1))]),_:1})]),default:o(()=>{var b;return[s(M,null,{default:o(()=>[s(l,{label:"订单编号"},{default:o(()=>{var t;return[r(i((t=e==null?void 0:e.complaint)==null?void 0:t.trade_no),1)]}),_:1}),s(l,{label:"举报原因"},{default:o(()=>{var t;return[r(i((t=e==null?void 0:e.complaint)==null?void 0:t.type),1)]}),_:1}),s(l,{label:"投诉说明"},{default:o(()=>{var t;return[r(i((t=e==null?void 0:e.complaint)==null?void 0:t.desc),1)]}),_:1}),s(l,{label:"联系方式 "},{default:o(()=>{var t;return[r(i((t=e==null?void 0:e.complaint)==null?void 0:t.mobile),1)]}),_:1}),s(l,{label:"投诉状态"},{default:o(()=>{var t,m;return[r(i(((t=e==null?void 0:e.complaint)==null?void 0:t.status)===0?"处理中":((m=e==null?void 0:e.complaint)==null?void 0:m.status)==-1?"已撤销":"已处理"),1)]}),_:1}),s(l,{label:"投诉结果 "},{default:o(()=>{var t,m;return[r(i(((t=e==null?void 0:e.complaint)==null?void 0:t.result)==0?"处理中":((m=e==null?void 0:e.complaint)==null?void 0:m.result)==1?"商家胜诉":"买家胜诉"),1)]}),_:1}),s(l,{label:"投诉时间"},{default:o(()=>{var t;return[r(i(d(x)((t=e==null?void 0:e.complaint)==null?void 0:t.create_at)),1)]}),_:1}),s(l,{label:"剩余时间"},{default:o(()=>[r(i(d(B)),1)]),_:1})]),_:1}),((b=e==null?void 0:e.complaint)==null?void 0:b.status)===0?(c(),v(y,{key:0},{content:o(()=>[f("div",oe,[s(R,{modelValue:u.value,"onUpdate:modelValue":n[1]||(n[1]=t=>u.value=t),height:"300px",mode:"simple","user-type":"merchant",path:"upload/merchant/order/complaint/"},null,8,["modelValue"]),s(g,{class:"form-submit",onClick:T},{default:o(()=>[...n[3]||(n[3]=[r("发送内容",-1)])]),_:1})])]),_:1})):E("",!0),f("div",se,[s(q,{split:!0},{default:o(()=>[(c(!0),F(G,null,O(e==null?void 0:e.messages,(t,m)=>(c(),v(N,{key:m},{content:o(()=>[s(y,{author:I(t==null?void 0:t.type),datetime:d(x)(t.create_at)},{content:o(()=>[f("div",{innerHTML:t.content},null,8,ne)]),_:2},1032,["author","datetime"])]),_:2},1024))),128))]),_:1})])]}),_:1})}}});const Be=K(re,[["__scopeId","data-v-d1d584e4"]]);export{Be as default};
