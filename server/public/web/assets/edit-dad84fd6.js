import{a as B,e as q,b as N}from"./collection-588e5c8d.js";import{M as c,_ as P}from"./index-ebc513dd.js";import{I as C}from"./index-15716071.js";import{F as G,a as L}from"./index-3f5d4a71.js";import{T as j}from"./index-de8c6515.js";import{O as W,S as z}from"./index-31ca20e2.js";import{R as H}from"./index-b07945fd.js";import{I as J}from"./index-8fdc26dc.js";import{D as K}from"./index-c22455b5.js";import{d as Q,A as X,r as p,f as Y,l as _,V,W as a,M as o,m as Z,G as $,a5 as ee,a0 as m,a3 as te}from"./vue-51c2f431.js";import"./libs-1cd01688.js";import"./plugins-ccea0c8f.js";import"./others-24e1b5c5.js";import"./echarts-a13411ed.js";import"./dep-cc1906a8-b100bfdb.js";import"./index-9aa638bc.js";import"./useLengthLimit-207427cf.js";import"./browse-ff8f6fe8.js";import"./close-circle-filled-9eb22673.js";import"./dep-0742ae64-e2730b23.js";import"./form-model-7023f79a.js";import"./_baseSet-75352e55.js";import"./isNil-c75b1b34.js";import"./omit-7a5ea809.js";import"./fake-arrow-cad1ce15.js";import"./index-e2b6bb2b.js";import"./index-7eef5ecd.js";import"./index-f001b1b6.js";import"./dep-34b004f3-3e1a5725.js";import"./index-d5e568e3.js";import"./index-3b3d7414.js";import"./dep-ef1abd17-ab5403a7.js";import"./add-06b22f1a.js";import"./dialog-2582254b.js";import"./dep-581cd4f1-7aa320e3.js";const le={class:"tdesign-demo__user-option"},oe=["src"],ae={class:"tdesign-demo__user-option-info"},se={name:"AdminMenuEditPopup"},re=Q({...se,props:{payTypeOptions:{}},emits:["success"],setup(g,{expose:w,emit:U}){const x=[{label:"启用",value:1},{label:"禁用",value:0}],k=[{label:"手机",value:1},{label:"电脑",value:2},{label:"通用",value:0}],u={id:0,title:"",code:"",show_name:"",account_fields:"",status:1,is_available:1,sort:0,lowrate:0,type:1,paytype:""},t=X({...u}),f=g,b=p(f.payTypeOptions);Y(()=>{b.value=f.payTypeOptions});const y=p(),i=p(!1),d=p("添加收款渠道"),T=n=>{if(n)d.value="编辑收款渠道",O(n);else{d.value="添加收款渠道";for(const e in u)t[e]=u[e]}i.value=!0},O=async n=>{const{data:e}=await B({id:n});for(const s in t)e[s]!=null&&e[s]!==void 0&&(t[s]=e[s])};w({init:T});const D={title:[{required:!0,message:"必填",type:"error"}],code:[{required:!0,message:"接口代码必选",type:"error"}],paytype:[{required:!0,message:"分类必选，此处图标会显示在购卡页面",type:"error"}]},I=U,R=async()=>{const n=await y.value.validate();if(typeof n!="object"&&n)try{let e;t.id>0?e=await q(t):e=await N(t),e.code===1?(c.success("操作成功"),i.value=!1,I("success")):c.error(e.msg)}catch(e){c.error(e.msg)}};return(n,e)=>{const s=C,r=G,h=j,E=W,F=z,v=H,M=J,S=L,A=K;return _(),V(A,{visible:i.value,"onUpdate:visible":e[9]||(e[9]=l=>i.value=l),"close-on-overlay-click":!1,"destroy-on-close":!0,header:d.value,"on-confirm":R},{default:a(()=>[o(S,{ref_key:"formRef",ref:y,"label-align":"left",data:t,rules:D,"label-width":80},{default:a(()=>[o(r,{label:"接口名称",name:"title"},{default:a(()=>[o(s,{modelValue:t.title,"onUpdate:modelValue":e[0]||(e[0]=l=>t.title=l),clearable:"",placeholder:"请输入接口名称"},null,8,["modelValue"])]),_:1}),o(r,{label:"充值费率",name:"lowrate",tips:"单位：千分之"},{default:a(()=>[o(s,{modelValue:t.lowrate,"onUpdate:modelValue":e[1]||(e[1]=l=>t.lowrate=l),theme:"normal",type:"number",clearable:"",placeholder:"请输入充值费率",suffix:"‰"},null,8,["modelValue"])]),_:1}),o(r,{label:"代码接口",name:"code",tips:"请输入接口名称(英文标识)，必须是home/collection里的文件名"},{default:a(()=>[o(s,{modelValue:t.code,"onUpdate:modelValue":e[2]||(e[2]=l=>t.code=l),clearable:"",placeholder:"请输入接口名称(英文标识)"},null,8,["modelValue"])]),_:1}),o(r,{label:"显示名称",name:"show_name",tips:"用于店铺售卡页支付方式名显示"},{default:a(()=>[o(s,{modelValue:t.show_name,"onUpdate:modelValue":e[3]||(e[3]=l=>t.show_name=l),clearable:"",placeholder:"显示名称"},null,8,["modelValue"])]),_:1}),o(r,{label:"账户字段",name:"account_fields",tips:"含证书字符的将自动识别为证书上传框"},{default:a(()=>[o(h,{modelValue:t.account_fields,"onUpdate:modelValue":e[4]||(e[4]=l=>t.account_fields=l),clearable:"",placeholder:"用户添加渠道账户所需的字段，用“|”分割字段,用:分隔名称，如：应用号:appid|应用秘钥:appsecret"},null,8,["modelValue"])]),_:1}),o(r,{label:"分类",name:"paytype"},{default:a(()=>[o(F,{modelValue:t.paytype,"onUpdate:modelValue":e[5]||(e[5]=l=>t.paytype=l),clearable:"",placeholder:"请选择分类"},{default:a(()=>[(_(!0),Z($,null,ee(b.value,l=>(_(),V(E,{key:l.value,value:l.value,label:l.label},{default:a(()=>[m("div",le,[m("img",{src:l.ico,style:{width:"16px"}},null,8,oe),m("div",ae,[m("div",null,te(l.label),1)])])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"状态",name:"status"},{default:a(()=>[o(v,{modelValue:t.status,"onUpdate:modelValue":e[6]||(e[6]=l=>t.status=l),options:x},null,8,["modelValue"])]),_:1}),o(r,{label:"适用终端",name:"is_available"},{default:a(()=>[o(v,{modelValue:t.is_available,"onUpdate:modelValue":e[7]||(e[7]=l=>t.is_available=l),options:k},null,8,["modelValue"])]),_:1}),o(r,{label:"排序",name:"sort",tips:"排序(越大越靠前)"},{default:a(()=>[o(M,{modelValue:t.sort,"onUpdate:modelValue":e[8]||(e[8]=l=>t.sort=l),theme:"normal",min:0,clearable:"",placeholder:"请输入排序"},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])}}});const Le=P(re,[["__scopeId","data-v-4042b1e6"]]);export{Le as default};
