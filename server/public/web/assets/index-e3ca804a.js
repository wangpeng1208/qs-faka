import{h as P,B as me,C as fe,m as he,D as ge,n as h,a2 as X,aF as $,J as F,I as xe,aU as k,be as ye,j as be,p as Se,bf as pe,bg as J,w as _e}from"./index-5ae314bf.js";import{a as Te}from"./index-9034b695.js";import{u as we}from"./useLengthLimit-bf57acc2.js";import{o as Ce}from"./omit-e39915a9.js";import{d as Ve,b as g,t as Ie,r as A,i as Ne,w as T,n as B,o as ze,M as b,N as Y}from"./vue-d500b9b9.js";/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Fe={allowInputOverMax:Boolean,autofocus:Boolean,autosize:{type:[Boolean,Object],default:!1},disabled:{type:Boolean,default:void 0},maxcharacter:{type:Number},maxlength:{type:[String,Number]},name:{type:String,default:""},placeholder:{type:String,default:void 0},readonly:{type:Boolean,default:void 0},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},tips:{type:[String,Function]},value:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultValue:{type:[String,Number]},onBlur:Function,onChange:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function,onValidate:Function};/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Ae=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,i;function q(S){var e,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;i||(i=document.createElement("textarea"),document.body.appendChild(i));var x=pe(S),c=x.paddingSize,o=x.borderSize,w=x.boxSizing,C=x.sizingStyle;i.setAttribute("style","".concat(C,";").concat(Ae)),i.value=S.value||S.placeholder||"";var v=i.scrollHeight,_={},V=w==="border-box",K=w==="content-box";V?v+=o:K&&(v-=c),i.value="";var I=i.scrollHeight-c;(e=i)===null||e===void 0||(e=e.parentNode)===null||e===void 0||e.removeChild(i),i=null;var r=function(z){var s=I*z;return V&&(s=s+c+o),s};if(!J(p)){var N=r(p);v=Math.max(N,v),_.minHeight="".concat(N,"px")}return J(f)||(v=Math.min(r(f),v)),_.height="".concat(v,"px"),_}var Be=Ve({name:"TTextarea",inheritAttrs:!1,props:Fe,setup:function(e,p){var f=p.attrs,x=p.expose,c=P(),o=P("textarea"),w=g(function(){return"".concat(o.value,"__tips")}),C=g(function(){return"".concat(o.value,"__limit")}),v=Ie(e),_=v.value,V=v.modelValue,K=me(_,V,e.defaultValue,e.onChange),I=fe(K,2),r=I[0],N=I[1],y=he(),z=ge(),s=A({}),l=A(),M=A(!1),E=A(!1),G=function(){var a;return(a=l.value)===null||a===void 0?void 0:a.focus()},Q=function(){var a;return(a=l.value)===null||a===void 0?void 0:a.blur()},d=function(){var a;if(e.autosize===!0)B(function(){s.value=q(l.value)});else if(e.autosize&&F(e.autosize)==="object"){var n=e.autosize,u=n.minRows,m=n.maxRows;B(function(){s.value=q(l.value,u,m)})}else f.rows?s.value={height:"auto",minHeight:"auto"}:f.style&&(a=l.value)!==null&&a!==void 0&&(a=a.style)!==null&&a!==void 0&&a.height&&(s.value={height:l.value.style.height})},W=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=l.value,u=String(a);n&&n.value!==u&&(n.value=u,r.value=u)},L=function(a){var n=a.target,u=n.value;if(e.maxcharacter&&e.maxcharacter>=0){var m=$(u,e.maxcharacter);e.allowInputOverMax||(u=F(m)==="object"&&m.characters)}!E.value&&N(u,{e:a}),B(function(){return W(u)}),d()},Z=function(a){L(a)},ee=function(){E.value=!0},ae=function(a){E.value=!1,L(a)},H=function(a,n){var u;if(!y.value){var m="on".concat(a[0].toUpperCase()).concat(a.slice(1));(u=e[m])===null||u===void 0||u.call(e,r.value,{e:n})}},te=function(a){H("keydown",a)},ne=function(a){H("keyup",a)},ue=function(a){H("keypress",a)},re=function(a){var n;d(),!y.value&&(M.value=!0,(n=e.onFocus)===null||n===void 0||n.call(e,r.value,{e:a}))},R=Ne(Te,void 0),le=function(a){var n;a.target&&(d(),M.value=!1,(n=e.onBlur)===null||n===void 0||n.call(e,r.value,{e:a}),R==null||R.handleBlur())},ie=g(function(){return[o.value,h(h({},"".concat(c.value,"-is-disabled"),y.value),"".concat(c.value,"-is-readonly"),z.value)]}),oe=g(function(){return X({autofocus:e.autofocus,disabled:y.value,readonly:z.value,placeholder:e.placeholder,maxlength:!e.allowInputOverMax&&e.maxlength||void 0,name:e.name||void 0})}),ve=g(function(){var t=$(String(r.value||""));return F(t)==="object"?t.length:t}),se=g(function(){return{value:[void 0,null].includes(r.value)?void 0:String(r.value),status:e.status,maxlength:Number(e.maxlength),maxcharacter:e.maxcharacter,allowInputOverMax:e.allowInputOverMax,onValidate:e.onValidate}}),ce=we(se),O=ce.tStatus;T(function(){return r.value},function(){return d()}),T(l,function(t){t&&(d(),e.autofocus&&t.focus())}),T(s,function(t){var a=f.style;xe(a)?k(l.value,ye(a,t)):k(l.value,t)}),T(r,function(){B(function(){return d()})}),T(function(){return e.autosize},d,{deep:!0}),x({focus:G,blur:Q}),ze(function(){d()});var de=Se();return function(){var t,a=X({onFocus:re,onBlur:le,onKeydown:te,onKeyup:ne,onKeypress:ue}),n=be(),u=n.STATUS,m=g(function(){return["".concat(o.value,"__inner"),h(h(h(h({},"".concat(c.value,"-is-").concat(O.value),O.value),u.value.disabled,y.value),u.value.focused,M.value),"".concat(c.value,"-resize-none"),F(e.autosize)==="object")]}),D=de("tips"),j=D&&b("div",{class:"".concat(w.value," ").concat(o.value,"__tips--").concat(e.status||"normal")},[D]),U=e.maxcharacter&&b("span",{class:C.value},["".concat(ve.value,"/").concat(e.maxcharacter)])||!e.maxcharacter&&e.maxlength&&b("span",{class:C.value},["".concat(r.value?(t=String(r.value))===null||t===void 0?void 0:t.length:0,"/").concat(e.maxlength)]);return b("div",Y({class:ie.value},Ce(f,["style"])),[b("textarea",Y({onInput:Z,onCompositionstart:ee,onCompositionend:ae,ref:l,value:r.value,class:m.value},a,oe.value),null),j||U?b("div",{class:["".concat(o.value,"__info_wrapper"),h({},"".concat(o.value,"__info_wrapper_align"),!j)]},[j,U]):null])}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var je=_e(Be);export{je as T};
