import{e as F,a8 as Z,l as H,r as f,d as M,P as r,a3 as u,a4 as t,a7 as h,f as a,I as l,H as o,ab as d,a9 as y,Q as w}from"./vue-bf422dc1.js";import{l as K}from"./order-236db475.js";import{R as Q}from"./index-efe651b4.js";import{p as Y}from"./global-0d825ba6.js";import{u as j,c as z}from"./index-c2dd6a24.js";import{f as G}from"./date-20546ee0.js";import{T as J,f as W,C,Z as X,E as ee}from"./icons-a8498fb6.js";import{d as te,I as ae,B as le,S as oe,L as se,Z as ne,T as re,a as ie,b as ce}from"./ui-ba7aaa7e.js";import"./no-list-e2f85d5e.js";import"./libs-51817cd7.js";import"./plugins-ca970193.js";import"./others-9f318174.js";import"./echarts-bf9d612c.js";const ue=[{colKey:"trade_no",title:"订单"},{colKey:"goods_name",title:"商品名称",width:"15%"},{colKey:"order_type",title:"类型",width:"80px"},{colKey:"paytype",title:"支付方式",width:"100px"},{colKey:"total_product_price",title:"价格",width:"15%"},{colKey:"contact",title:"联系方式",width:"140px"},{colKey:"status",title:"状态",width:"120px"},{colKey:"take_status_text",title:"取卡状态",width:"10%"},{colKey:"take_card_password",title:"取卡密码",width:"100px"},{colKey:"create_at",title:"交易时间",width:"14%"},{colKey:"operation",title:"操作",width:"10%",fixed:"right"}],de=[{label:"联系方式搜索",value:"contact"},{label:"订单编号搜索",value:"trade_no"},{label:"商品名称搜索",value:"goods_name"}],pe=[{label:"待支付",value:0},{label:"已支付",value:1},{label:"已取消",value:2},{label:"已退款",value:3}],_e={class:"category-header c-flex"},me={class:"l"},fe={key:0},he={key:0},ye={name:"OrderOrderList"},Be=F({...ye,setup(ve){const x=Z(),i=H({status:"",keywords:"",type:""}),{query:b}=x.currentRoute.value;b.status&&(i.status=b.status);const P=j(),S=f([]),p=f({defaultPageSize:15,total:0,defaultCurrent:1}),I=f(""),v=f(!1),m=async(s={})=>{const n={page:p.value.defaultCurrent,limit:p.value.defaultPageSize,name:I.value,...i,...s};v.value=!0;try{const{data:_}=await K(n);S.value=_.list,p.value={...p.value,total:_.total}}catch(_){console.log(_)}finally{v.value=!1}};m();const B=s=>{x.push({name:"merchantOrderOrderCard",query:{id:s}})},T=f([]),R="index",U=s=>{T.value=s},L=(s,n)=>{p.value.defaultCurrent=s.current,p.value.defaultPageSize=s.pageSize,m()},N=(s,n)=>{},O=M(()=>({offsetTop:P.isUseTabsRouter?48:0,container:`.${Y}-layout`}));return(s,n)=>{const _=te,E=ae,$=le,g=oe,k=se,q=ne,c=re,A=ie,D=ce;return r(),u(D,{title:"订单管理",class:"basic-container",bordered:!1},{default:t(()=>[h("div",_e,[h("div",me,[a(g,null,{default:t(()=>[a(_,{modelValue:i.type,"onUpdate:modelValue":n[0]||(n[0]=e=>i.type=e),clear:m,placeholder:"全部分类",clearable:"",options:l(de)},null,8,["modelValue","options"]),a(_,{modelValue:i.status,"onUpdate:modelValue":n[1]||(n[1]=e=>i.status=e),clear:m,placeholder:"全部状态",clearable:"",options:l(pe)},null,8,["modelValue","options"]),a(E,{modelValue:i.keywords,"onUpdate:modelValue":n[2]||(n[2]=e=>i.keywords=e),placeholder:"请输入关键词",clearable:""},{"suffix-icon":t(()=>[a(l(J))]),_:1},8,["modelValue"]),a($,{theme:"default",variant:"outline",onClick:m},{default:t(()=>[o("查询")]),_:1})]),_:1})])]),a(A,{size:"small",data:S.value,columns:l(ue),"row-key":R,"vertical-align":"middle",hover:l(K).length>0,pagination:p.value,"selected-row-keys":T.value,loading:v.value,"header-affixed-top":O.value,"max-height":"100%",onPageChange:L,onChange:N,onSelectChange:U},{trade_no:t(({row:e})=>[a(g,{size:"small",direction:"vertical"},{default:t(()=>[a(q,{placement:"top",content:"点击复制"},{default:t(()=>[a(k,{theme:"primary",onClick:V=>l(z)(e.trade_no)},{default:t(()=>[o(d(e.trade_no),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),take_card_password:t(({row:e})=>[e.take_card_password?(r(),u(c,{key:0,shape:"square",tip:"点击复制",onClick:V=>l(z)(e.take_card_password)},{default:t(()=>[o(d(e.take_card_password),1)]),_:2},1032,["onClick"])):y("",!0)]),status:t(({row:e})=>[h("span",null,[e.status===0?(r(),u(c,{key:0,variant:"light-outline",theme:"danger"},{default:t(()=>[a(l(W)),o("未付款")]),_:1})):e.status===1?(r(),u(c,{key:1,variant:"light-outline",theme:"success"},{default:t(()=>[a(l(C)),o("已付款")]),_:1})):e.status===2?(r(),u(c,{key:2,variant:"light-outline",theme:"danger"},{default:t(()=>[a(l(X)),o("已关闭")]),_:1})):e.status===3?(r(),u(c,{key:3,variant:"light-outline",theme:"danger"},{default:t(()=>[a(l(ee)),o("已退款")]),_:1})):y("",!0)])]),take_status_text:t(({row:e})=>[e.take_status_text=="未取"?(r(),u(c,{key:0,variant:"outline",theme:"danger"},{default:t(()=>[a(l(C)),o(d(e.take_status_text),1)]),_:2},1024)):e.take_status_text=="已取"?(r(),u(c,{key:1,variant:"outline",theme:"success"},{default:t(()=>[a(l(C)),o(d(e.take_status_text),1)]),_:2},1024)):y("",!0)]),total_product_price:t(({row:e})=>[a(g,{size:"small",direction:"vertical"},{default:t(()=>[h("span",null," 总价："+d(e.total_product_price),1),h("span",null," 实付："+d(e.total_price),1)]),_:2},1024)]),paytype:t(({row:e})=>[a(c,{variant:"light-outline",theme:"primary",size:"small"},{default:t(()=>[o(d(e.paytype),1)]),_:2},1024)]),create_at:t(({row:e})=>[o(d(l(G)(e.create_at)),1)]),operation:t(({row:e})=>[e.status==1?(r(),w("span",fe,[a(k,{hover:"color",size:"small",variant:"outline",theme:"primary",onClick:V=>B(e.id)},{default:t(()=>[o("查看卡密")]),_:2},1032,["onClick"]),e.cards_count==0?(r(),w("span",he,[a(k,{hover:"color",size:"small",variant:"outline",theme:"success"},{default:t(()=>[o("导出")]),_:1})])):y("",!0)])):y("",!0)]),empty:t(()=>[a(Q,{title:"",tip:"订单列表为空",type:"list"})]),_:1},8,["data","columns","hover","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1})}}});export{Be as default};
