import{d as U,a2 as E,A as F,r as c,o as K,l as x,V as W,W as e,a0 as L,M as o,_ as l,u as r,m as j,a3 as q,a4 as H}from"./vue-d500b9b9.js";import{g as J}from"./card-06e4f593.js";import{l as O}from"./category-1e60480f.js";import{g as Q}from"./good-2a884832.js";import{R as X}from"./index-5c5ca650.js";import{t as Y}from"./table-01005e9b.js";import{u as _}from"./useBatchAction-9a1c38d8.js";import{t as Z}from"./constant-0667977f.js";import tt from"./detail-6a866ef9.js";import{B as et}from"./index-227fbf78.js";import{I as ot}from"./index-3d8f650a.js";import{S as at}from"./index-c8633d5c.js";import{S as it}from"./index-7d217f2a.js";import{L as rt}from"./index-5a96e289.js";import{T as st}from"./index-552daebe.js";import{C as lt}from"./index-7e8487d2.js";import{_ as nt}from"./index-5ae314bf.js";import"./no-list-e2f85d5e.js";import"./global-0d825ba6.js";import"./base-93829b7b.js";import"./plugin-e4c34710.js";import"./dialog-256f8652.js";import"./dep-cc1906a8-b100bfdb.js";import"./dep-581cd4f1-d83a7af3.js";import"./omit-e39915a9.js";import"./date-35f9fa82.js";import"./libs-035f127b.js";import"./index-bf58812f.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./dep-0742ae64-334d1564.js";import"./fake-arrow-468f6194.js";import"./index-5a6339b2.js";import"./index-9b4540ef.js";import"./index-9034b695.js";import"./useLengthLimit-bf57acc2.js";import"./browse-50d5b530.js";import"./close-circle-filled-8b5b4fa1.js";import"./_baseSet-6774bbcb.js";import"./index-2468d71f.js";import"./dep-34b004f3-3e1a5725.js";import"./index-63b59032.js";import"./index-e5d2d240.js";import"./index-6f44b012.js";import"./index-4e516f6a.js";import"./dep-ef1abd17-ecd005e5.js";import"./add-ea894c63.js";import"./index-9691defa.js";import"./chevron-right-78d2a65d.js";import"./ellipsis-f81da9a5.js";import"./index-a9524ed3.js";import"./isNil-c75b1b34.js";import"./form-model-962c4be8.js";import"./dep-b10d5f92-053b17fa.js";const dt={key:0,class:"selected-count"},mt={class:"category-header c-flex"},pt={name:"CardTrash"},ct=U({...pt,setup(ut){const V=E(),d=F({cate_id:"",goods_id:""}),{pagination:B,fetchData:p,dataLoading:D,headerAffixedTop:S,rehandlePageChange:T,lists:u,searchData:R}=Y({fetchFun:J,params:d}),g=c([]),w=async()=>{const{data:a}=await O();g.value=a.list},h=c([]),A=async()=>{const{data:a}=await Q();h.value=a},i=c([]),f=a=>{i.value=a},v=async a=>{a&&f(a.id),_({title:"确认删除当前所选内容？",body:"删除后，所选信息将被清空，且无法恢复",ids:i.value,url:"/merchantapi/goods/card/trashBatchDel",fetchList:()=>{p(),i.value=[]}})},N=a=>{a>0&&f(a),_({title:"确认恢复当前所选内容？",body:"恢复后，所选信息将被恢复，且无法恢复",ids:i.value,url:"/merchantapi/goods/card/trashBatchRestore",fetchList:()=>{p(),i.value=[]}})},$=()=>{_({title:"确认清空回收站？",body:"清空后，回收站将被清空，且无法恢复",ids:i.value,url:"/merchantapi/goods/card/clear",fetchList:()=>{p(),i.value=[]}})};K(()=>{p(),w(),A()});const y=c(null),G=async a=>{y.value.init(a)};return(a,t)=>{const m=et,I=ot,C=at,b=it,k=rt,P=st,z=lt;return x(),W(z,{class:"basic-container",bordered:!1},{title:e(()=>{var n;return[t[7]||(t[7]=L("span",{style:{"padding-right":"20px"}},"库存回收站",-1)),o(m,{variant:"base",disabled:!i.value.length,onClick:N},{default:e(()=>[...t[4]||(t[4]=[l(" 批量恢复 ",-1)])]),_:1},8,["disabled"]),o(m,{variant:"base",theme:"danger",disabled:!i.value.length,onClick:t[0]||(t[0]=s=>v(""))},{default:e(()=>[...t[5]||(t[5]=[l(" 批量删除 ",-1)])]),_:1},8,["disabled"]),o(m,{theme:"danger",disabled:!((n=r(u))!=null&&n.length),onClick:$},{default:e(()=>[...t[6]||(t[6]=[l("清空回收站",-1)])]),_:1},8,["disabled"]),i.value.length?(x(),j("p",dt,"已选"+q(i.value.length)+"项",1)):H("",!0)]}),actions:e(()=>[o(m,{variant:"text",theme:"default",onClick:t[1]||(t[1]=n=>r(V).push("/merchant/goods/card"))},{icon:e(()=>[o(I,{name:"rollback"})]),default:e(()=>[t[8]||(t[8]=l(" 返回 ",-1))]),_:1})]),default:e(()=>{var n;return[L("div",mt,[o(b,null,{default:e(()=>[o(C,{modelValue:d.cate_id,"onUpdate:modelValue":t[2]||(t[2]=s=>d.cate_id=s),placeholder:"全部分类",type:"search",clearable:"",options:g.value},null,8,["modelValue","options"]),o(C,{modelValue:d.goods_id,"onUpdate:modelValue":t[3]||(t[3]=s=>d.goods_id=s),placeholder:"全部商品",type:"search",clearable:"",options:h.value,keys:{value:"id",label:"name"}},null,8,["modelValue","options"]),o(m,{theme:"primary",onClick:r(R)},{default:e(()=>[...t[9]||(t[9]=[l("查询",-1)])]),_:1},8,["onClick"])]),_:1})]),o(P,{data:r(u),columns:r(Z),"row-key":"id",hover:!!((n=r(u))!=null&&n.length),pagination:r(B),"selected-row-keys":i.value,loading:r(D),"header-affixed-top":r(S),"table-layout":"auto","max-height":"auto",onPageChange:r(T),onSelectChange:f},{operation:e(({row:s})=>[o(b,null,{default:e(()=>[o(k,{size:"small",variant:"outline",theme:"primary",onClick:M=>G(s)},{default:e(()=>[...t[10]||(t[10]=[l("查看",-1)])]),_:1},8,["onClick"]),o(k,{size:"small",variant:"outline",theme:"danger",onClick:M=>v(s)},{default:e(()=>[...t[11]||(t[11]=[l("删除",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),empty:e(()=>[o(X,{title:"",tip:"库存回收站为空",type:"list"})]),_:1},8,["data","columns","hover","pagination","selected-row-keys","loading","header-affixed-top","onPageChange"]),o(tt,{ref_key:"cardDetailRef",ref:y},null,512)]}),_:1})}}});const _e=nt(ct,[["__scopeId","data-v-be3745f7"]]);export{_e as default};
