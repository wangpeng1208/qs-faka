import{d as W,a2 as j,A,r as E,U as F,l as u,V as _,W as s,M as n,_ as i,a3 as m,u as y,m as b,a0 as x,a4 as V,G,a5 as O}from"./vue-51c2f431.js";import{w as P,s as z,d as J}from"./complaint-e16ed231.js";import{e as K}from"./index-17ee05f4.js";import{f as T}from"./date-97dddb73.js";import{M as p,_ as Q}from"./index-ebc513dd.js";import{D as X,a as Y}from"./index-06e12687.js";import{B as Z}from"./index-3b3d7414.js";import{C as D}from"./index-95c49289.js";import{D as h}from"./index-7416fda7.js";import{S as ee}from"./index-b206f515.js";import{L as te,a as oe}from"./index-20d71f46.js";import{C as se}from"./index-0945ca82.js";import"./libs-1cd01688.js";import"./plugins-ccea0c8f.js";import"./others-24e1b5c5.js";import"./echarts-a13411ed.js";import"./isNil-c75b1b34.js";import"./omit-7a5ea809.js";const ne={key:0},le={key:1},re={class:"form-container"},ae=["innerHTML"],ie={name:"RowDetail"},me=W({...ie,setup(ue){const c=j(),e=A({}),B=[{value:"admin",label:"管理员"},{value:"merchant",label:"商户"},{value:"buyer",label:"买家"},{value:"agent",label:"上级卖家"}],L=l=>{const o=B.find(r=>r.value===l);return o?o.label:"未知"},f=async l=>{const o=await P({id:c.currentRoute.value.query.id,result:l});o.code===1?(p.success(o.msg),g()):p.error(o.msg)},d=E(""),M=async()=>{if(d.value==="")return;const l=await z({id:c.currentRoute.value.query.id,content:d.value});l.code===1?(p.success(l.msg),d.value=""):p.error(l.msg)},[R,N]=K(),g=async()=>{var o;const l=await J({id:c.currentRoute.value.query.id});l.code===0&&p.error(l.msg),Object.assign(e,l.data),e&&N((o=e==null?void 0:e.complaint)==null?void 0:o.expire_at)};return g(),(l,o)=>{const r=X,q=Y,I=F("wp-editor"),v=Z,C=D,k=h,S=ee,$=te,H=oe,w=se;return u(),_(w,{title:"投诉详情",class:"basic-container",bordered:!1},{default:s(()=>[n(q,null,{default:s(()=>[n(r,{label:"订单编号"},{default:s(()=>{var t;return[i(m((t=e==null?void 0:e.complaint)==null?void 0:t.trade_no),1)]}),_:1}),n(r,{label:"举报原因"},{default:s(()=>{var t;return[i(m((t=e==null?void 0:e.complaint)==null?void 0:t.type),1)]}),_:1}),n(r,{label:"投诉说明"},{default:s(()=>{var t;return[i(m((t=e==null?void 0:e.complaint)==null?void 0:t.desc),1)]}),_:1}),n(r,{label:"联系方式 "},{default:s(()=>{var t;return[i(m((t=e==null?void 0:e.complaint)==null?void 0:t.mobile),1)]}),_:1}),n(r,{label:"投诉状态"},{default:s(()=>{var t,a;return[i(m(((t=e==null?void 0:e.complaint)==null?void 0:t.status)===0?"处理中":((a=e==null?void 0:e.complaint)==null?void 0:a.status)==-1?"已撤销":"已处理"),1)]}),_:1}),n(r,{label:"投诉结果 "},{default:s(()=>{var t,a;return[i(m(((t=e==null?void 0:e.complaint)==null?void 0:t.result)==0?"处理中":((a=e==null?void 0:e.complaint)==null?void 0:a.result)==1?"商家胜诉":"买家胜诉"),1)]}),_:1}),n(r,{label:"投诉时间"},{default:s(()=>{var t;return[i(m(y(T)((t=e==null?void 0:e.complaint)==null?void 0:t.create_at)),1)]}),_:1}),n(r,{label:"剩余时间"},{default:s(()=>{var t;return[((t=e==null?void 0:e.complaint)==null?void 0:t.result)==1?(u(),b("span",ne,"已结束")):(u(),b("span",le,m(y(R)),1))]}),_:1})]),_:1}),n(C,null,{content:s(()=>[x("div",re,[n(I,{modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=t=>d.value=t),height:"300px",width:"100%",mode:"simple","user-type":"admin"},null,8,["modelValue"]),n(v,{class:"form-submit",onClick:M},{default:s(()=>[...o[3]||(o[3]=[i("发送内容",-1)])]),_:1})])]),_:1}),n(S,null,{default:s(()=>{var t,a;return[n(k),((t=e==null?void 0:e.complaint)==null?void 0:t.status)===0?(u(),_(v,{key:0,theme:"success",onClick:o[1]||(o[1]=U=>f(1))},{default:s(()=>[...o[4]||(o[4]=[i("商家胜诉",-1)])]),_:1})):V("",!0),((a=e==null?void 0:e.complaint)==null?void 0:a.status)===0?(u(),_(v,{key:1,theme:"danger",onClick:o[2]||(o[2]=U=>f(2))},{default:s(()=>[...o[5]||(o[5]=[i("买家胜诉",-1)])]),_:1})):V("",!0),n(k)]}),_:1}),n(w,{title:"聊天内容",class:"message-list"},{default:s(()=>[n(H,{split:!0,style:{height:"500px"},scroll:{type:"virtual"}},{default:s(()=>[(u(!0),b(G,null,O(e==null?void 0:e.messages,(t,a)=>(u(),_($,{key:a},{content:s(()=>[n(C,{author:L(t==null?void 0:t.type),datetime:y(T)(t.create_at)},{content:s(()=>[x("div",{innerHTML:t.content},null,8,ae)]),_:2},1032,["author","datetime"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}}});const Re=Q(me,[["__scopeId","data-v-1d2e07ed"]]);export{Re as default};
