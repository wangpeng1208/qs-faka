import{r as U,_ as M}from"./index-b0aabda4.js";import{M as c,I as P,F as $,g as j,_ as E,$ as O,B as R,e as T,b as z}from"./ui-ba7aaa7e.js";import{e as L,l as g,r as d,a2 as w,P as _,a3 as r,a4 as t,f as o,a7 as y,a9 as x,H as Z}from"./vue-bf422dc1.js";import"./libs-51817cd7.js";import"./plugins-ca970193.js";import"./others-9f318174.js";import"./echarts-bf9d612c.js";import"./icons-a8498fb6.js";function G(){return U.post({url:"/merchantapi/shop/config/index"})}function J(h){return U.post({url:"/merchantapi/shop/config/saveConfig",data:h})}const K={class:"form-basic-item"},W={name:"ShopSet"},X=L({...W,setup(h){const i=g({stockDisplay:[{label:"不显示库存数量",value:0,tips:"不显示库存数量"},{label:"显示库存数量",value:1,tips:"显示库存数量"},{label:"范围数量范围显示",value:2,tips:"范围数量范围显示：非常多(>100)；库存很多(30-100);库存一般(10-30);少量(<10)"}],fee_payer:[{label:"系统默认",value:0},{label:"商户承担",value:1},{label:"买家承担",value:2}]}),l=g({shop_name:"",shop_logo:"",show_contact:0,shop_contact:{qq:"",mobile:"",wechat:""},shop_notice:"",shop_notice_show:0,merchant_end_time:0,merchant_time:0,stock_display:1,fee_payer:0,shop_close:0,shop_close_notice:""}),k=({name:s,url:e})=>{l[s]=e},f=d(""),q=s=>{var e;f.value=(e=i.stockDisplay.find(p=>p.value===s))==null?void 0:e.tips},C=d(!0),b=async()=>{try{const{data:s}=await G();Object.keys(l).forEach(e=>{s[e]&&(l[e]=s[e]),v(l.show_contact)})}catch(s){console.log(s)}C.value=!1},V=d(null),D={shop_name:[{required:!0,message:"请输入店铺名称"},{pattern:/^[\u4e00-\u9fa5_a-zA-Z0-9]{2,10}$/,message:"请输入2-10位中文、字母、数字、下划线"}]},I=async()=>{const s=await V.value.validate();if(typeof s!="object"&&s)try{const e=await J(l);e.code===1?(c.success(e.msg),b()):c.error(e.msg)}catch(e){c.error(e)}else c.error("请完善必填项")},m=d([]),v=s=>{s===1?m.value=["show_contact"]:m.value=[]};return b(),(s,e)=>{const p=P,n=$,S=w("wp-upload"),u=w("wp-check-tag"),B=j,F=E,N=O,Q=R,A=T,H=z;return _(),r(H,{title:"店铺设置",bordered:!1},{default:t(()=>[o(A,{ref_key:"form",ref:V,data:l,rules:D,"label-align":"left","label-width":160,"status-icon":!0,onSubmit:I},{default:t(()=>[y("div",K,[o(n,{label:"店铺名称",name:"shop_name",help:"请输入2-10位中文、字母、数字、下划线"},{default:t(()=>[o(p,{modelValue:l.shop_name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.shop_name=a),placeholder:"请输入店铺名称",class:"input-xl","show-limit-number":"",minlength:2,maxlength:10},null,8,["modelValue"])]),_:1}),o(n,{label:"店铺logo",name:"shop_logo",help:"建议尺寸：100*100"},{default:t(()=>[o(S,{theme:"image",initial:l,name:"shop_logo",app:"merchant",data:{type:"image"},onUpdate:k},null,8,["initial"])]),_:1}),o(n,{label:"营业状态",name:"shop_close",help:"休息状态下无法下单"},{default:t(()=>[o(u,{modelValue:l.shop_close,"onUpdate:modelValue":e[1]||(e[1]=a=>l.shop_close=a),items:[{label:"营业",value:0},{label:"休息",value:1}]},null,8,["modelValue"])]),_:1}),l.shop_close?(_(),r(n,{key:0,label:"休息提示",name:"shop_close_notice",help:"休息状态提示文字"},{default:t(()=>[o(p,{modelValue:l.shop_close_notice,"onUpdate:modelValue":e[2]||(e[2]=a=>l.shop_close_notice=a),placeholder:"休息状态提示文字",class:"input-xl"},null,8,["modelValue"])]),_:1})):x("",!0),o(n,{label:"公告开关",name:"shop_notice_show",help:"打开公告开关，店铺则显示公告"},{default:t(()=>[o(u,{modelValue:l.shop_notice_show,"onUpdate:modelValue":e[3]||(e[3]=a=>l.shop_notice_show=a),items:[{label:"开启",value:1},{label:"关闭",value:0}]},null,8,["modelValue"])]),_:1}),l.shop_notice_show===1?(_(),r(n,{key:1,label:"店铺公告",name:"shop_notice"},{default:t(()=>[o(B,{modelValue:l.shop_notice,"onUpdate:modelValue":e[4]||(e[4]=a=>l.shop_notice=a),placeholder:"店铺公告将在店铺页面展示",class:"input-xl"},null,8,["modelValue"])]),_:1})):x("",!0),o(n,{label:"联系方式",name:"show_contact",help:"开启后，店铺页面将显示联系方式"},{default:t(()=>[o(u,{modelValue:l.show_contact,"onUpdate:modelValue":e[5]||(e[5]=a=>l.show_contact=a),items:[{label:"开启",value:1},{label:"关闭",value:0}],onActions:v},null,8,["modelValue"])]),_:1}),o(N,{modelValue:m.value,"onUpdate:modelValue":e[9]||(e[9]=a=>m.value=a),"show-arrow":!1,"expand-icon":!1,borderless:!0,style:{padding:"0"}},{default:t(()=>[o(F,{value:"show_contact"},{default:t(()=>[y("div",null,[o(n,{label:"手机号码",name:"mobile",help:"非必填: 买家会透过联系方式与您联系，请准确填写"},{default:t(()=>[o(p,{modelValue:l.shop_contact.mobile,"onUpdate:modelValue":e[6]||(e[6]=a=>l.shop_contact.mobile=a),placeholder:"请输入手机号码",class:"input-xl"},null,8,["modelValue"])]),_:1}),o(n,{label:"QQ号",name:"qq",help:"非必填: 买家会透过联系方式与您联系，请准确填写"},{default:t(()=>[o(p,{modelValue:l.shop_contact.qq,"onUpdate:modelValue":e[7]||(e[7]=a=>l.shop_contact.qq=a),placeholder:"请输入QQ号",class:"input-xl"},null,8,["modelValue"])]),_:1}),o(n,{label:"微信号",name:"wechat",help:"非必填: 买家会透过联系方式与您联系，请准确填写"},{default:t(()=>[o(p,{modelValue:l.shop_contact.wechat,"onUpdate:modelValue":e[8]||(e[8]=a=>l.shop_contact.wechat=a),placeholder:"请输入微信号",class:"input-xl"},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["modelValue"]),o(n,{label:"库存展示",name:"stock_display",help:f.value},{default:t(()=>[o(u,{modelValue:l.stock_display,"onUpdate:modelValue":e[10]||(e[10]=a=>l.stock_display=a),items:i.stockDisplay,onActions:q},null,8,["modelValue","items"])]),_:1},8,["help"]),o(n,{label:"费率承担方",name:"rate_burden",help:"系统收取的费率，系统默认为商户承担；一般都是商户承担"},{default:t(()=>[o(u,{modelValue:l.fee_payer,"onUpdate:modelValue":e[11]||(e[11]=a=>l.fee_payer=a),items:i.fee_payer},null,8,["modelValue","items"])]),_:1}),o(n,null,{default:t(()=>[o(Q,{theme:"primary",class:"form-submit-confirm",type:"submit"},{default:t(()=>[Z(" 提交 ")]),_:1})]),_:1})])]),_:1},8,["data"])]),_:1})}}});const pe=M(X,[["__scopeId","data-v-14107fbe"]]);export{pe as default};
