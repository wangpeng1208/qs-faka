import{e as Z,r as l,l as ee,d as B,M as te,P as i,a3 as s,a4 as t,f as a,H as n,ab as ae,a7 as g,A as c,B as oe,I as ne}from"./vue-bf422dc1.js";import{u as ie,j as se,k as re}from"./user-8ed5a501.js";import{p as le}from"./global-0d825ba6.js";import{u as ce,_ as me}from"./index-b0aabda4.js";import de from"./collect-255a5754.js";import{f as fe}from"./date-20546ee0.js";import{_ as ue}from"./detail.vue_vue_type_script_setup_true_lang-70e22419.js";import{_ as pe}from"./edit.vue_vue_type_script_setup_true_lang-5952cb93.js";import _e from"./message-73b53de9.js";import{_ as he}from"./money.vue_vue_type_script_setup_true_lang-d6f0b4fe.js";import{_ as ve}from"./rate.vue_vue_type_script_setup_true_lang-49177381.js";import{_ as ye}from"./role.vue_vue_type_script_setup_true_lang-df95da26.js";import{_ as ke}from"./row-search.vue_vue_type_script_setup_true_lang-b23325c0.js";import{M as C,L as ge,B as xe,l as Ce,P as Re,p as we,S as $e,T as Se,j as be,b as Ke}from"./ui-ba7aaa7e.js";import"./libs-51817cd7.js";import"./plugins-ca970193.js";import"./others-9f318174.js";import"./echarts-bf9d612c.js";import"./icons-a8498fb6.js";import"./role-ca3f80a4.js";const ze=[{colKey:"id",title:"ID",width:"80px"},{colKey:"username",title:"账号",width:"180px"},{colKey:"mobile",title:"手机",width:"180px"},{colKey:"idcard_number",title:"身份证号码",width:"180px"},{colKey:"money",title:"余额",width:"90px"},{colKey:"freeze_money",title:"冻结金额",width:"160px"},{colKey:"status",title:"状态",width:"90px"},{colKey:"is_freeze",title:"冻结",width:"90px"},{colKey:"complaint_count",title:"投诉数",width:"90px"},{colKey:"create_at",title:"注册时间",cell(R,h){return R("span",fe(h.row.create_at))},width:"180px"},{colKey:"operate",title:"操作",width:"120px",fixed:"right"}],Pe={class:"category-header c-flex"},Te={class:"category-header c-flex"},De={class:"l"},Be={calss:"edit",style:{float:"right",height:"30px"}},Ie=Z({__name:"index",setup(R){const h=l(),I=e=>{h.value.init(e)},M=async e=>{const m=await ie({user_id:e});m.code===1?(C.success(m.msg),_()):C.error(m.msg)},w=l(),j=e=>{w.value.init(e)},$=l(),N=e=>{$.value.init(e)},S=l(),V=e=>{S.value.init(e)},b=l(),A=e=>{b.value.init(e)},v=l([""]),F=e=>{v.value.includes(e)?v.value=[]:v.value=[e]},K=l(),L=e=>{K.value.init(e)},z=ee({}),H=e=>{Object.assign(z,e),_()},y=l(!1),O=B(()=>y.value?"收起搜索":"展开搜索"),p=l({defaultPageSize:20,total:0,defaultCurrent:1}),x=l([]),_=async()=>{const{data:e}=await se({page:p.value.defaultCurrent,limit:p.value.defaultPageSize,...z});x.value=e.list,p.value={...p.value,total:e.total}};_();const U=e=>{p.value.defaultCurrent=e.current,p.value.defaultPageSize=e.pageSize,_()},q=ce(),E=B(()=>({offsetTop:q.isUseTabsRouter?48:0,container:`.${le}-layout`})),P=l(),T=e=>{P.value.init(e)},G=async e=>{(await re({id:e})).code===1&&(C.success("删除成功"),_())};return(e,m)=>{const r=ge,J=xe,u=Ce,Q=Re,W=we,D=$e,k=Se,X=be,Y=Ke,d=te("perms");return i(),s(Y,{title:"用户管理",class:"basic-container",bordered:!1},{actions:t(()=>[a(r,{hover:"color",theme:"primary",onClick:m[0]||(m[0]=o=>y.value=!y.value)},{default:t(()=>[n(ae(O.value),1)]),_:1})]),default:t(()=>[g("div",Pe,[c(a(ke,{ref:"searchFormRef",onSuccess:H},null,512),[[oe,y.value]])]),g("div",Te,[g("div",De,[c((i(),s(J,{theme:"primary",onClick:m[1]||(m[1]=o=>T(0))},{default:t(()=>[n("添加")]),_:1})),[[d,["adminapi/merchant/user/add"]]])])]),a(X,{data:x.value,columns:ne(ze),"row-key":"id","expand-on-row-click":!1,"expanded-row-keys":v.value,"expand-icon":!1,hover:x.value.length>0,pagination:p.value,"header-affixed-top":E.value,"max-height":"100%",onPageChange:U},{expandedRow:t(({row:o})=>[g("div",Be,[a(D,null,{separator:t(()=>[a(W,{layout:"vertical"})]),default:t(()=>[c((i(),s(r,{theme:"primary",hover:"color",onClick:f=>T(o.id)},{default:t(()=>[a(u,{name:"edit"}),n(" 编辑 ")]),_:2},1032,["onClick"])),[[d,["adminapi/merchant/user/eidt"]]]),c((i(),s(r,{theme:"primary",hover:"color",onClick:f=>L(o.id)},{default:t(()=>[a(u,{name:"chat-message"}),n(" 发送消息 ")]),_:2},1032,["onClick"])),[[d,["adminapi/merchant/user/message"]]]),c((i(),s(r,{theme:"primary",hover:"color",onClick:f=>A(o.id)},{default:t(()=>[a(u,{name:"currency-exchange"}),n(" 资金管理 ")]),_:2},1032,["onClick"])),[[d,["adminapi/merchant/user/money"]]]),c((i(),s(r,{theme:"primary",hover:"color",onClick:f=>j(o.id)},{default:t(()=>[a(u,{name:"currency-exchange"}),n(" 收款信息 ")]),_:2},1032,["onClick"])),[[d,["adminapi/merchant/user/collectDetail"]]]),c((i(),s(r,{theme:"primary",hover:"color",onClick:f=>V(o.id)},{default:t(()=>[a(u,{name:"bookmark"}),n(" 分配角色 ")]),_:2},1032,["onClick"])),[[d,["adminapi/merchant/user/role"]]]),c((i(),s(r,{theme:"primary",hover:"color",onClick:f=>N(o)},{default:t(()=>[a(u,{name:"application"}),n(" 设置费率 ")]),_:2},1032,["onClick"])),[[d,["adminapi/merchant/user/rate"]]]),c((i(),s(r,{theme:"primary",hover:"color",onClick:f=>M(o.id)},{default:t(()=>[a(u,{name:"lock-off"}),n(" 登录解锁 ")]),_:2},1032,["onClick"])),[[d,["adminapi/merchant/user/unlock"]]]),a(Q,{content:"确认删除吗",onConfirm:f=>G(o.id)},{default:t(()=>[c((i(),s(r,{theme:"danger",hover:"color"},{default:t(()=>[a(u,{name:"delete"}),n(" 删除 ")]),_:1})),[[d,["adminapi/merchant/user/del"]]])]),_:2},1032,["onConfirm"])]),_:2},1024)])]),status:t(({row:o})=>[o.status===1?(i(),s(k,{key:0,variant:"light",theme:"success"},{default:t(()=>[n("启用")]),_:1})):(i(),s(k,{key:1,variant:"light",theme:"danger"},{default:t(()=>[n("禁用")]),_:1}))]),is_freeze:t(({row:o})=>[o.is_freeze===1?(i(),s(k,{key:0,variant:"light",theme:"danger"},{default:t(()=>[n("是")]),_:1})):(i(),s(k,{key:1,variant:"light",theme:"success"},{default:t(()=>[n("否")]),_:1}))]),operate:t(({row:o})=>[a(D,null,{default:t(()=>[a(r,{theme:"primary",size:"small",onClick:f=>I(o)},{default:t(()=>[n("详情")]),_:2},1032,["onClick"]),a(r,{theme:"primary",size:"small",onClick:f=>F(o.id)},{default:t(()=>[n("操作")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","columns","expanded-row-keys","hover","pagination","header-affixed-top"]),a(pe,{ref_key:"editRef",ref:P,onSuccess:_},null,512),a(he,{ref_key:"moneyRef",ref:b,onSuccess:_},null,512),a(_e,{ref_key:"messageRef",ref:K},null,512),a(ye,{ref_key:"roleRef",ref:S},null,512),a(ve,{ref_key:"rateRef",ref:$},null,512),a(de,{ref_key:"collectRef",ref:w},null,512),a(ue,{ref_key:"detailRef",ref:h},null,512)]),_:1})}}});const tt=me(Ie,[["__scopeId","data-v-cdf99460"]]);export{tt as default};
