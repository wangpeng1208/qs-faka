import{a as D,e as M}from"./collection-37798a5a.js";import{M as d}from"./index-1ae915eb.js";import{I as A}from"./index-3f8df98e.js";import{F,a as h}from"./index-4d676a86.js";import{T as I}from"./index-7224a192.js";import{R as T}from"./index-615192d6.js";import{D as q}from"./index-6889856c.js";import{d as B,A as C,r as c,l as E,V as P,W as n,M as l}from"./vue-d500b9b9.js";const S={name:"AdminMenuEditPopup"},K=B({...S,emits:["success"],setup(j,{expose:f,emit:_}){const b=[{label:"启用",value:1},{label:"禁用",value:0}],i={id:0,title:"",code:"",show_name:"",account_fields:"",applyurl:"",status:1,is_available:1,sort:0,lowrate:0,type:1,paytype:""},t=C({...i}),m=c(!1),u=c("添加打款渠道"),v=o=>{if(o)u.value="编辑打款渠道",V(o);else{u.value="添加打款渠道";for(const e in i)t[e]=i[e]}m.value=!0},V=async o=>{const{data:e}=await D({id:o});for(const s in t)e[s]!=null&&e[s]!==void 0&&(t[s]=e[s])};f({init:v});const y={name:[{required:!0,message:"必填",type:"error"}],title:[{required:!0,message:"必填",type:"error"}]},g=_,p=c(),w=async()=>{const o=await p.value.validate();if(typeof o!="object"&&o)try{const e=await M(t);e.code===1?(d.success(e.msg),m.value=!1,g("success")):d.error(e.msg)}catch(e){d.error(e.msg)}};return(o,e)=>{const s=A,r=F,U=I,k=T,x=h,R=q;return E(),P(R,{visible:m.value,"onUpdate:visible":e[5]||(e[5]=a=>m.value=a),"close-on-overlay-click":!1,"destroy-on-close":!0,header:u.value,"on-confirm":w},{default:n(()=>[l(x,{ref_key:"formRef",ref:p,"label-align":"left",data:t,rules:y,"label-width":80},{default:n(()=>[l(r,{label:"接口名称",name:"title"},{default:n(()=>[l(s,{modelValue:t.title,"onUpdate:modelValue":e[0]||(e[0]=a=>t.title=a),clearable:"",placeholder:"请输入接口名称"},null,8,["modelValue"])]),_:1}),l(r,{label:"代码接口",name:"code",tips:"请输入接口名称(英文标识)，必须是home/settlement里的文件名"},{default:n(()=>[l(s,{modelValue:t.code,"onUpdate:modelValue":e[1]||(e[1]=a=>t.code=a),clearable:"",placeholder:"请输入接口名称(英文标识)"},null,8,["modelValue"])]),_:1}),l(r,{label:"显示名称",name:"show_name"},{default:n(()=>[l(s,{modelValue:t.show_name,"onUpdate:modelValue":e[2]||(e[2]=a=>t.show_name=a),clearable:"",placeholder:"显示名称"},null,8,["modelValue"])]),_:1}),l(r,{label:"账户字段",name:"account_fields"},{default:n(()=>[l(U,{modelValue:t.account_fields,"onUpdate:modelValue":e[3]||(e[3]=a=>t.account_fields=a),clearable:"",placeholder:"用户添加渠道账户所需的字段，用“|”分割字段,用:分隔名称，如：应用号:appid|应用秘钥:appsecret"},null,8,["modelValue"])]),_:1}),l(r,{label:"状态",name:"status"},{default:n(()=>[l(k,{modelValue:t.status,"onUpdate:modelValue":e[4]||(e[4]=a=>t.status=a),options:b},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])}}});export{K as _};
