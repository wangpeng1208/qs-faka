import{c2 as A,M as l,c3 as F,_ as I}from"./index-ebc513dd.js";import{u as M}from"./index-17ee05f4.js";import{I as U}from"./index-15716071.js";import{F as V,a as N}from"./index-3f5d4a71.js";import{B as S}from"./index-3b3d7414.js";import{D as Z}from"./index-c22455b5.js";import{d as q,A as R,r as d,l as $,V as j,W as o,a0 as b,a3 as g,M as a,u,_ as p}from"./vue-51c2f431.js";import"./libs-1cd01688.js";import"./plugins-ccea0c8f.js";import"./others-24e1b5c5.js";import"./echarts-a13411ed.js";import"./dep-cc1906a8-b100bfdb.js";import"./index-9aa638bc.js";import"./useLengthLimit-207427cf.js";import"./browse-ff8f6fe8.js";import"./close-circle-filled-9eb22673.js";import"./dep-0742ae64-e2730b23.js";import"./form-model-7023f79a.js";import"./_baseSet-75352e55.js";import"./isNil-c75b1b34.js";import"./dialog-2582254b.js";import"./dep-581cd4f1-7aa320e3.js";import"./omit-7a5ea809.js";const L={class:"dialog-header"},O={class:"dialog-title"},P={name:"EmailDialog"},T=q({...P,emits:["success","close"],setup(W,{expose:y,emit:C}){const w=C,x=()=>{i.value=!1},[n,z]=M(),s=R({email:"",code:""}),D=async()=>{try{const t=await A({email:s.email});t.code===1?(l.success(t.msg),z()):l.error(t.msg)}catch{l.error("发送失败。接口错误")}},E={email:[{required:!0,message:"请输入邮箱",type:"error"},{pattern:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,message:"请输入正确的邮箱",type:"error"}],code:[{required:!0,message:"请输入验证码",type:"error"},{pattern:/^[0-9]{6}$/,message:"请输入正确的验证码",type:"error"}]},f=d(null),k=async()=>{const t=await f.value.validate();if(typeof t!="object"&&t){const e=await F(s);e.code===1?(l.success(e.msg),w("success")):l.error(e.msg)}},i=d(!1),_=d("绑定邮箱");return y({open:t=>{i.value=!0,s.email=t,t&&(_.value="修改邮箱")}}),(t,e)=>{const v=U,m=V,c=S,h=N,B=Z;return $(),j(B,{visible:i.value,"onUpdate:visible":e[2]||(e[2]=r=>i.value=r),"destroy-on-close":!0,"close-on-overlay-click":!0,width:"500",footer:!1,"close-btn":!1},{header:o(()=>[b("div",L,[b("div",O,g(_.value),1)])]),body:o(()=>[a(h,{ref_key:"form",ref:f,data:s,rules:E,class:"set-form","label-width":"80px","label-align":"left",onSubmit:k},{default:o(()=>[a(m,{label:"邮箱账号",name:"email"},{default:o(()=>[a(v,{value:s.email,"onUpdate:value":e[0]||(e[0]=r=>s.email=r),placeholder:"请输入邮箱账号",size:"large"},null,8,["value"])]),_:1}),a(m,{label:"验证码",name:"code",class:"email"},{default:o(()=>[a(v,{value:s.code,"onUpdate:value":e[1]||(e[1]=r=>s.code=r),placeholder:"请输入验证码",size:"large"},null,8,["value"]),a(c,{variant:"outline",disabled:u(n)>0,type:"button",onClick:D},{default:o(()=>[p(g(u(n)==0?"获取验证码":`${u(n)}秒后可重发`),1)]),_:1},8,["disabled"])]),_:1}),a(m,{class:"button","label-width":"0"},{default:o(()=>[a(c,{class:"form-submit-cancel",theme:"default",size:"large",variant:"base",onClick:x},{default:o(()=>[...e[3]||(e[3]=[p(" 取消 ",-1)])]),_:1}),a(c,{theme:"primary",size:"large",class:"form-submit-confirm",type:"submit"},{default:o(()=>[...e[4]||(e[4]=[p(" 提交 ",-1)])]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible"])}}});const be=I(T,[["__scopeId","data-v-56cdff0e"]]);export{be as default};
