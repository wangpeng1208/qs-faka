import{d as P,a2 as $,A as j,r as _,o as D,U as O,l as s,V as d,W as a,M as l,u as z,_ as c,a4 as f,m as u,G as T,a5 as W,a3 as X}from"./vue-d500b9b9.js";import{a as H}from"./card-2fe89aea.js";import{g as J}from"./good-d4ddceee.js";import{M as g,_ as K}from"./index-6b6fbd51.js";import{I as Q}from"./index-ea2a85c9.js";import{B as Y}from"./index-c63cfed1.js";import{S as Z}from"./index-18bbad02.js";import{F as ee,a as te}from"./index-0fff1870.js";import{T as oe}from"./index-591150e2.js";import{L as le}from"./index-95260792.js";import{U as ae}from"./index-240de459.js";import{C as re}from"./index-c2a11f34.js";import"./libs-d79b82a8.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./dep-cc1906a8-b100bfdb.js";import"./dep-0742ae64-0833915c.js";import"./fake-arrow-d40b6f7e.js";import"./index-424a7ec0.js";import"./index-757197b9.js";import"./index-e205a427.js";import"./useLengthLimit-14a00f39.js";import"./browse-35e2443f.js";import"./close-circle-filled-3424a47b.js";import"./_baseSet-c1826ef2.js";import"./omit-82a91481.js";import"./index-b8d4edf9.js";import"./dep-34b004f3-3e1a5725.js";import"./index-5be2c846.js";import"./form-model-0fc8dc05.js";import"./isNil-c75b1b34.js";import"./index-23b191ec.js";import"./index-7acebda6.js";import"./index-0fc44882.js";import"./dep-ef1abd17-afe34463.js";import"./index-f937956d.js";import"./dialog-8ec74ee0.js";import"./dep-581cd4f1-15e6aa5c.js";import"./index-03ea1434.js";import"./add-291eb586.js";import"./delete-fc1af4e4.js";import"./dep-b10d5f92-c98df075.js";const se={key:0,style:{padding:"0"}},ne={key:0},me={name:"GoodsCardAdd"},ie=P({...me,setup(pe){const w=[{label:"手动输入",value:1},{label:"txt文件",value:2}],C=[{label:"仅卡密",value:""},{label:"卡号+逗号+卡密",value:","},{label:"卡号+“|”+卡密",value:"|"},{label:"卡号+“----”+卡密",value:"----"},{label:"卡号+____”+卡密",value:"_____"}],L=[{label:"顺序插入",value:1},{label:"随机插入",value:2}],v=[{label:"关闭",value:0},{label:"开启",value:1}],y=$(),t=j({goods_id:null,order_type:1,import_type:1,split_type:",",files:[],is_pre:0,check_card:0,content:""}),{query:V}=y.currentRoute.value;Object.keys(V).forEach(r=>{t[r]!==void 0&&(t[r]=Number(V[r]))});const k=_([]),F=async()=>{const{data:r}=await J();k.value=r},x=_(null),S={goods_id:[{required:!0,message:"请选择商品",type:"error"}],content:[{required:!0,message:"请输入虚拟卡内容",type:"error"}],split_type:[{required:!1,message:"请选择导入格式",type:"error"}]},m=_("请输入虚拟卡内容"),B=r=>{r===","?m.value=`请输入虚拟卡内容，每行一个
    例如：
    卡号1111,卡密2222
    卡号3333,卡密4444`:r==="|"?m.value=`请输入虚拟卡内容，每行一个
    例如：
    卡号1111|卡密2222
    卡号3333|卡密4444`:r==="----"?m.value=`请输入虚拟卡内容，每行一个
    例如：
    卡号1111----卡密2222
    卡号3333----卡密4444`:r==="_____"?m.value=`请输入虚拟卡内容，每行一个
    例如：
    卡号1111_____卡密2222
    卡号3333_____卡密4444`:r===""&&(m.value=`请输入虚拟卡内容，每行一个
    （卡号卡密是写在一起的形式，或者只有卡密、卡号）
    例如：
    卡号1111卡密2222
    卡号3333卡密4444
    卡密4444
    卡密5555555555`)};D(()=>{F()});const M=async()=>{const r=await x.value.validate();if(typeof r!="object"&&r){const e={...t};try{const i=await H(e);i.code===1?(g.success("新增成功"),y.push("/merchant/goods/card")):g.error(`新增失败：${i.msg}`)}catch{g.error("新增失败")}}},U=_(0),q=r=>{U.value=r};return(r,e)=>{const i=Q,b=Y,A=Z,n=ee,p=O("wp-check-tag"),I=oe,N=le,R=ae,E=te,G=re;return s(),d(G,{title:"添加库存",class:"basic-container",bordered:!1},{actions:a(()=>[l(b,{variant:"text",theme:"default",onClick:e[0]||(e[0]=o=>z(y).push("/merchant/goods/card"))},{icon:a(()=>[l(i,{name:"rollback"})]),default:a(()=>[e[9]||(e[9]=c(" 返回 ",-1))]),_:1})]),default:a(()=>[l(E,{ref_key:"form",ref:x,class:"base-form",data:t,rules:S,"label-align":"left","label-width":150,onSubmit:M},{default:a(()=>[l(n,{label:"选择商品",name:"goods_id"},{default:a(()=>[l(A,{modelValue:t.goods_id,"onUpdate:modelValue":e[1]||(e[1]=o=>t.goods_id=o),placeholder:"请选择商品",options:k.value,keys:{value:"id",label:"name"},style:{width:"800px"}},null,8,["modelValue","options"])]),_:1}),l(n,{label:"插入方式",name:"order_type",help:""},{default:a(()=>[l(p,{modelValue:t.order_type,"onUpdate:modelValue":e[2]||(e[2]=o=>t.order_type=o),items:L},null,8,["modelValue"])]),_:1}),l(n,{label:"导入方式",name:"import_type",help:""},{default:a(()=>[l(p,{modelValue:t.import_type,"onUpdate:modelValue":e[3]||(e[3]=o=>t.import_type=o),items:w},null,8,["modelValue"])]),_:1}),l(n,{label:"导入格式",name:"split_type"},{default:a(()=>[l(p,{modelValue:t.split_type,"onUpdate:modelValue":e[4]||(e[4]=o=>t.split_type=o),items:C,onActions:B},null,8,["modelValue"])]),_:1}),t.import_type===1?(s(),d(n,{key:0,label:"虚拟卡内容",name:"content",style:{width:"960px"}},{default:a(()=>[l(I,{modelValue:t.content,"onUpdate:modelValue":e[5]||(e[5]=o=>t.content=o),placeholder:m.value,style:{height:"400px"},tips:"除了名称和内容之间有空格 其他地方不允许有空格 手动输入一次最多添加500张"},null,8,["modelValue","placeholder"])]),_:1})):f("",!0),t.import_type===2?(s(),d(n,{key:1,label:"TXT文件",name:"file",help:""},{default:a(()=>[l(R,{modelValue:t.files,"onUpdate:modelValue":e[6]||(e[6]=o=>t.files=o),accept:"text/plain",theme:"custom","auto-upload":!1,"abridge-name":[10,8],draggable:"",onProgress:q},{dragContent:a(o=>[t.files&&t.files.length?(s(),u("ul",se,[(s(!0),u(T,null,W(t.files,h=>(s(),u("li",{key:h.name,style:{"list-style-type":"none"}},X(h.name),1))),128))])):(s(),u(T,{key:1},[o&&o.dragActive?(s(),u("p",ne,"释放鼠标")):U.value<1?(s(),d(N,{key:1},{default:a(()=>[...e[10]||(e[10]=[c("拖拽文件至此或点击上传文件",-1)])]),_:1})):f("",!0)],64)),t.files&&t.files.length?(s(),d(b,{key:2,size:"small",style:{"margin-top":"36px"}},{default:a(()=>[...e[11]||(e[11]=[c("更换文件",-1)])]),_:1})):f("",!0)]),_:1},8,["modelValue"])]),_:1})):f("",!0),l(n,{label:"卡密前缀",name:"is_pre",help:""},{default:a(()=>[l(p,{modelValue:t.is_pre,"onUpdate:modelValue":e[7]||(e[7]=o=>t.is_pre=o),items:v},null,8,["modelValue"])]),_:1}),l(n,{label:"检查重复",name:"check_card",help:""},{default:a(()=>[l(p,{modelValue:t.check_card,"onUpdate:modelValue":e[8]||(e[8]=o=>t.check_card=o),items:v},null,8,["modelValue"])]),_:1}),l(n,null,{default:a(()=>[l(b,{theme:"primary",class:"form-submit-confirm",type:"submit"},{default:a(()=>[...e[12]||(e[12]=[c(" 提交 ",-1)])]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});const et=K(ie,[["__scopeId","data-v-1dec88bc"]]);export{et as default};
