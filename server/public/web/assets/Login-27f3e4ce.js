import{d as S,r as s,a2 as D,l as d,V as b,W as a,m as w,G as V,M as e,u as v,_ as C,a3 as k,a4 as M,X as N}from"./vue-51c2f431.js";import{u as R}from"./index-17ee05f4.js";import{bT as T,M as h,_ as A}from"./index-ebc513dd.js";import{I as $}from"./index-69f74367.js";import{I as E}from"./index-15716071.js";import{F as P,a as G}from"./index-3f5d4a71.js";import{B as O}from"./index-3b3d7414.js";import"./libs-1cd01688.js";import"./plugins-ccea0c8f.js";import"./others-24e1b5c5.js";import"./echarts-a13411ed.js";import"./dep-cc1906a8-b100bfdb.js";import"./index-9aa638bc.js";import"./useLengthLimit-207427cf.js";import"./browse-ff8f6fe8.js";import"./close-circle-filled-9eb22673.js";import"./dep-0742ae64-e2730b23.js";import"./form-model-7023f79a.js";import"./_baseSet-75352e55.js";import"./isNil-c75b1b34.js";const W=S({__name:"Login",setup(X){const x=T(),I={phone:"",username:"",verifyCode:"",checked:!1,password:""},z={phone:[{required:!0,message:"手机号必填",type:"error"}],username:[{required:!0,message:"",type:"error"}],password:[{required:!0,message:"密码必填",type:"error"}],verifyCode:[{required:!0,message:"验证码必填",type:"error"}]},p=s("password"),y=s(),t=s({...I}),n=s(!1),[c,U]=R(),q=D(),B=()=>{y.value.validate({fields:["phone"]}).then(u=>{u===!0&&U()})},f=s("登录"),_=s(!1),F=async u=>{if(u.validateResult===!0){f.value="登录中...",_.value=!0;const o=await x.login(t.value);o.code===1?(h.success("登陆成功"),q.push({path:"/merchant/workbench"})):(f.value="登录",h.error(o.msg),_.value=!1)}};return(u,o)=>{const m=$,i=E,l=P,g=O,L=G;return d(),b(L,{ref_key:"form",ref:y,class:N(["item-container",`login-${p.value}`]),data:t.value,rules:z,"label-width":"0",onSubmit:F},{default:a(()=>[p.value=="password"?(d(),w(V,{key:0},[e(l,{name:"username"},{default:a(()=>[e(i,{modelValue:t.value.username,"onUpdate:modelValue":o[0]||(o[0]=r=>t.value.username=r),size:"large",placeholder:"请输入账号/手机号/邮箱"},{"prefix-icon":a(()=>[e(m,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),e(l,{name:"password"},{default:a(()=>[e(i,{modelValue:t.value.password,"onUpdate:modelValue":o[2]||(o[2]=r=>t.value.password=r),size:"large",type:n.value?"text":"password",clearable:"",placeholder:"请输入登录密码"},{"prefix-icon":a(()=>[e(m,{name:"lock-on"})]),"suffix-icon":a(()=>[e(m,{name:n.value?"browse":"browse-off",onClick:o[1]||(o[1]=r=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1})],64)):(d(),w(V,{key:1},[e(l,{name:"phone"},{default:a(()=>[e(i,{modelValue:t.value.phone,"onUpdate:modelValue":o[3]||(o[3]=r=>t.value.phone=r),size:"large",placeholder:"请输入手机号码"},{"prefix-icon":a(()=>[e(m,{name:"mobile"})]),_:1},8,["modelValue"])]),_:1}),e(l,{class:"verification-code",name:"verifyCode"},{default:a(()=>[e(i,{modelValue:t.value.verifyCode,"onUpdate:modelValue":o[4]||(o[4]=r=>t.value.verifyCode=r),size:"large",placeholder:"请输入验证码"},null,8,["modelValue"]),e(g,{variant:"outline",disabled:v(c)>0,onClick:B},{default:a(()=>[C(k(v(c)==0?"发送验证码":`${v(c)}秒后可重发`),1)]),_:1},8,["disabled"])]),_:1})],64)),p.value!=="qrcode"?(d(),b(l,{key:2,class:"btn-container"},{default:a(()=>[e(g,{block:"",size:"large",type:"submit",disabled:_.value},{default:a(()=>[C(k(f.value),1)]),_:1},8,["disabled"])]),_:1})):M("",!0)]),_:1},8,["class","data"])}}});const ce=A(W,[["__scopeId","data-v-75dd084f"]]);export{ce as default};
