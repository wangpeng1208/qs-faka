import{e as j,a8 as E,r as u,l as H,d as Q,P as r,a3 as m,a4 as e,a7 as p,f as l,I as h,H as n,Q as Y,ab as v,a9 as _}from"./vue-bf422dc1.js";import{l as q}from"./category-7d3cc39b.js";import{t as F,r as J}from"./good-0ae28211.js";import{R as O}from"./index-88e158de.js";import{p as W}from"./global-0d825ba6.js";import{u as X}from"./index-45c41893.js";import{f as z}from"./date-20546ee0.js";import{T as Z,Y as ee}from"./icons-a8498fb6.js";import{m as te,M as K,d as ae,I as oe,B as le,S as ne,T as se,L as ie,j as re,b as ce}from"./ui-ba7aaa7e.js";import"./no-list-e2f85d5e.js";import"./libs-51817cd7.js";import"./plugins-ca970193.js";import"./others-9f318174.js";import"./echarts-bf9d612c.js";const de={class:"category-header c-flex"},ue={class:"l"},me={class:"r c-flex"},pe={key:0,class:"selected-count"},_e={name:"Goods"},Be=j({..._e,setup(fe){const P=E(),B=[{colKey:"id",type:"multiple"},{colKey:"name",title:"商品名称",ellipsis:!0,cell:"name"},{colKey:"cate_name",title:"商品分类"},{colKey:"price",title:"价格"},{colKey:"create_at",title:"创建时间"},{colKey:"delete_at",title:"删除时间"},{colKey:"operation",title:"操作",cell:"operation",fixed:"right"}],R=X(),y=u([]),s=u({defaultPageSize:20,total:0,defaultCurrent:1}),C=u(!1),f=async()=>{C.value=!0;const o={...c,page:s.value.defaultCurrent,limit:s.value.defaultPageSize};try{const{data:t}=await F(o);y.value=t.list,s.value={...s.value,total:t.total}}catch(t){console.log(t)}finally{C.value=!1}},c=H({cate_id:"",name:"",type:""}),S=u([]),$=async()=>{const{data:o}=await q();S.value=o.list};f(),$();const i=u([]),w="id",D=o=>{i.value=o},I=(o,t)=>{s.value.defaultCurrent=o.current,s.value.defaultPageSize=o.pageSize,f()},L=(o,t)=>{},x=(o=0)=>{o&&(i.value=[o]);const t=te({header:"提醒",body:"确定要恢复所选数据吗？",confirmBtn:"确认",onConfirm:async({e:k})=>{t.hide();const d=await J({ids:i.value});d.code===1?(f(),K.success("恢复成功")):K.error(`恢复失败：${d.msg}`)},onClose:({e:k,trigger:d})=>{t.hide()}})},N=o=>{const{id:t}=o;P.push(`/merchant/goods/edit?id=${t}`)},U=Q(()=>({offsetTop:R.isUseTabsRouter?48:0,container:`.${W}-layout`}));return(o,t)=>{const k=ae,d=oe,V=le,b=ne,g=se,T=ie,A=re,G=ce;return r(),m(G,{title:"商品回收站",class:"basic-container",bordered:!1},{default:e(()=>[p("div",de,[p("div",ue,[l(b,null,{default:e(()=>[l(k,{modelValue:c.cate_id,"onUpdate:modelValue":t[0]||(t[0]=a=>c.cate_id=a),placeholder:"全部分类",type:"search",clearable:"",options:S.value},null,8,["modelValue","options"]),l(d,{modelValue:c.name,"onUpdate:modelValue":t[1]||(t[1]=a=>c.name=a),placeholder:"请输入商品名",clearable:""},{"suffix-icon":e(()=>[l(h(Z))]),_:1},8,["modelValue"]),l(V,{theme:"default",variant:"outline",onClick:f},{default:e(()=>[n("查询")]),_:1})]),_:1})]),p("div",me,[l(V,{variant:"base",disabled:!i.value.length,onClick:t[2]||(t[2]=a=>x())},{icon:e(()=>[l(h(ee))]),default:e(()=>[n(" 批量恢复 ")]),_:1},8,["disabled"]),i.value.length?(r(),Y("p",pe,"已选"+v(i.value.length)+"项",1)):_("",!0)])]),l(A,{data:y.value,columns:B,"row-key":w,"vertical-align":"top",hover:y.value.length>0,"table-layout":"auto",pagination:s.value,loading:C.value,"header-affixed-top":U.value,"max-height":"100%",onPageChange:I,onChange:L,onSelectChange:D},{name:e(({row:a})=>[n(v(a.name)+" ",1),l(b,{size:"small",align:"center",class:"tag-demo light"},{default:e(()=>[a.wholesale_discount==1?(r(),m(g,{key:0,title:"支持批发优惠",theme:"success",variant:"light",size:"small"},{default:e(()=>[n("惠")]),_:1})):_("",!0),a.coupon_type==1?(r(),m(g,{key:1,title:"支持优惠券",theme:"primary",variant:"light",size:"small"},{default:e(()=>[n("券")]),_:1})):_("",!0),a.take_card_type!=0?(r(),m(g,{key:2,title:"提卡必填或选填取卡密码",theme:"warning",variant:"light",size:"small"},{default:e(()=>[n("取")]),_:1})):_("",!0),a.visit_type==1?(r(),m(g,{key:3,title:"商品购买页面需要访问密码",theme:"danger",variant:"light",size:"small"},{default:e(()=>[n("密")]),_:1})):_("",!0)]),_:2},1024)]),create_at:e(({row:a})=>[p("span",null,v(h(z)(a.create_at)),1)]),delete_at:e(({row:a})=>[p("span",null,v(h(z)(a.delete_at)),1)]),operation:e(({row:a})=>[l(b,null,{default:e(()=>[l(T,{theme:"primary",hover:"color",onClick:M=>x(a.id)},{default:e(()=>[n("恢复")]),_:2},1032,["onClick"]),l(T,{theme:"primary",hover:"color",onClick:M=>N(a)},{default:e(()=>[n("修改")]),_:2},1032,["onClick"])]),_:2},1024)]),empty:e(()=>[l(O,{title:"",tip:"商品回收站为空",type:"list"})]),_:1},8,["data","hover","pagination","loading","header-affixed-top"])]),_:1})}}});export{Be as default};
