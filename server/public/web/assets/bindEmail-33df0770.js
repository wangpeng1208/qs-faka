import{bS as A,M as l,bT as F,_ as I}from"./index-5ae314bf.js";import{u as M}from"./index-c2baa02d.js";import{I as S}from"./index-9b4540ef.js";import{F as U,a as V}from"./index-9de6e4fb.js";import{B as N}from"./index-227fbf78.js";import{D as Z}from"./index-bf58812f.js";import{d as q,A as R,r as d,l as T,V as $,W as o,a0 as b,a3 as g,M as a,u,_ as p}from"./vue-d500b9b9.js";import"./libs-035f127b.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./dep-cc1906a8-b100bfdb.js";import"./index-9034b695.js";import"./useLengthLimit-bf57acc2.js";import"./browse-50d5b530.js";import"./close-circle-filled-8b5b4fa1.js";import"./dep-0742ae64-334d1564.js";import"./form-model-962c4be8.js";import"./_baseSet-6774bbcb.js";import"./isNil-c75b1b34.js";import"./dialog-256f8652.js";import"./dep-581cd4f1-d83a7af3.js";import"./omit-e39915a9.js";const j={class:"dialog-header"},L={class:"dialog-title"},O={name:"EmailDialog"},P=q({...O,emits:["success","close"],setup(W,{expose:y,emit:C}){const w=C,x=()=>{i.value=!1},[n,z]=M(),s=R({email:"",code:""}),D=async()=>{try{const t=await A({email:s.email});t.code===1?(l.success(t.msg),z()):l.error(t.msg)}catch{l.error("发送失败。接口错误")}},E={email:[{required:!0,message:"请输入邮箱",type:"error"},{pattern:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,message:"请输入正确的邮箱",type:"error"}],code:[{required:!0,message:"请输入验证码",type:"error"},{pattern:/^[0-9]{6}$/,message:"请输入正确的验证码",type:"error"}]},f=d(null),k=async()=>{const t=await f.value.validate();if(typeof t!="object"&&t){const e=await F(s);e.code===1?(l.success(e.msg),w("success")):l.error(e.msg)}},i=d(!1),_=d("绑定邮箱");return y({open:t=>{i.value=!0,s.email=t,t&&(_.value="修改邮箱")}}),(t,e)=>{const v=S,m=U,c=N,h=V,B=Z;return T(),$(B,{visible:i.value,"onUpdate:visible":e[2]||(e[2]=r=>i.value=r),"destroy-on-close":!0,"close-on-overlay-click":!0,width:"500",footer:!1,"close-btn":!1},{header:o(()=>[b("div",j,[b("div",L,g(_.value),1)])]),body:o(()=>[a(h,{ref_key:"form",ref:f,data:s,rules:E,class:"set-form","label-width":"80px","label-align":"left",onSubmit:k},{default:o(()=>[a(m,{label:"邮箱账号",name:"email"},{default:o(()=>[a(v,{value:s.email,"onUpdate:value":e[0]||(e[0]=r=>s.email=r),placeholder:"请输入邮箱账号",size:"large"},null,8,["value"])]),_:1}),a(m,{label:"验证码",name:"code",class:"email"},{default:o(()=>[a(v,{value:s.code,"onUpdate:value":e[1]||(e[1]=r=>s.code=r),placeholder:"请输入验证码",size:"large"},null,8,["value"]),a(c,{variant:"outline",disabled:u(n)>0,type:"button",onClick:D},{default:o(()=>[p(g(u(n)==0?"获取验证码":`${u(n)}秒后可重发`),1)]),_:1},8,["disabled"])]),_:1}),a(m,{class:"button","label-width":"0"},{default:o(()=>[a(c,{class:"form-submit-cancel",theme:"default",size:"large",variant:"base",onClick:x},{default:o(()=>[...e[3]||(e[3]=[p(" 取消 ",-1)])]),_:1}),a(c,{theme:"primary",size:"large",class:"form-submit-confirm",type:"submit"},{default:o(()=>[...e[4]||(e[4]=[p(" 提交 ",-1)])]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible"])}}});const be=I(P,[["__scopeId","data-v-56cdff0e"]]);export{be as default};
