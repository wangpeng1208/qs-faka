import{d as S,b as v,r as I,w as se,t as He,o as Ke,M as o,n as We,G as ie,T as Ge,ab as Je,a1 as qe,aa as Qe}from"./vue-d500b9b9.js";import{Z as q,$ as Q,a0 as ee,an as be,n as N,h as A,G as Le,bt as ce,p as ve,H as et,Y as tt,F as nt,C as Oe,B as rt,ar as at,at as ot,ap as lt,w as it}from"./index-1ae915eb.js";import{a as ut,b as ct,I as st}from"./index-9a98a6df.js";import{_ as he,a as oe}from"./dep-0742ae64-c1faefd0.js";import{p as vt,i as mt,l as dt,C as ft}from"./dep-ef1abd17-e2c5098b.js";import{D as gt}from"./index-6889856c.js";import{T as ue,C as pt}from"./index-817224be.js";function _e(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Ie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_e(Object(t),!0).forEach(function(r){ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_e(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var wt={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M13 3L13 12.5858L16.5 9.08579L17.9142 10.5L12 16.4142L6.08579 10.5L7.5 9.08579L11 12.5858L11 3L13 3ZM4.5 14V19H19.5V14H21.5V21H2.5V14H4.5Z"}}]},yt=S({name:"DownloadIcon",props:{size:{type:String},onClick:{type:Function}},setup(n,e){var{attrs:t}=e,r=v(()=>n.size),{className:a,style:l}=q(r),m=v(()=>["t-icon","t-icon-download",a.value]),s=v(()=>Ie(Ie({},l.value),t.style)),u=v(()=>({class:m.value,style:s.value,onClick:f=>{var c;return(c=n.onClick)===null||c===void 0?void 0:c.call(n,{e:f})}}));return()=>Q(wt,u.value)}});const bt=yt;function Ce(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Se(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ce(Object(t),!0).forEach(function(r){ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ce(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Ot={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M13.0003 2L13.0003 22H11.0003L11.0003 2L13.0003 2ZM9.0003 4.64087V18.5H1.30078L9.0003 4.64087ZM15.0003 4.64087L22.6998 18.5H15.0003V4.64087ZM4.69981 16.5H7.0003V12.3591L4.69981 16.5ZM17.0003 12.3591V16.5H19.3008L17.0003 12.3591Z"}}]},ht=S({name:"MirrorIcon",props:{size:{type:String},onClick:{type:Function}},setup(n,e){var{attrs:t}=e,r=v(()=>n.size),{className:a,style:l}=q(r),m=v(()=>["t-icon","t-icon-mirror",a.value]),s=v(()=>Se(Se({},l.value),t.style)),u=v(()=>({class:m.value,style:s.value,onClick:f=>{var c;return(c=n.onClick)===null||c===void 0?void 0:c.call(n,{e:f})}}));return()=>Q(Ot,u.value)}});const _t=ht;function xe(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Pe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xe(Object(t),!0).forEach(function(r){ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xe(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var It={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4 2V11C8.97056 11 13 15.0294 13 20H22V22H2V2H4ZM4 20H11C11 16.134 7.86599 13 4 13V20Z"}}]},Ct=S({name:"RotationIcon",props:{size:{type:String},onClick:{type:Function}},setup(n,e){var{attrs:t}=e,r=v(()=>n.size),{className:a,style:l}=q(r),m=v(()=>["t-icon","t-icon-rotation",a.value]),s=v(()=>Pe(Pe({},l.value),t.style)),u=v(()=>({class:m.value,style:s.value,onClick:f=>{var c;return(c=n.onClick)===null||c===void 0?void 0:c.call(n,{e:f})}}));return()=>Q(It,u.value)}});const St=Ct;function je(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function ke(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?je(Object(t),!0).forEach(function(r){ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):je(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var xt={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15.0962 5.90381C12.5578 3.3654 8.44221 3.3654 5.90381 5.90381C3.3654 8.44221 3.3654 12.5578 5.90381 15.0962C8.44221 17.6346 12.5578 17.6346 15.0962 15.0962C17.6346 12.5578 17.6346 8.44221 15.0962 5.90381ZM4.48959 4.48959C7.80905 1.17014 13.191 1.17014 16.5104 4.48959C19.5906 7.56983 19.8126 12.4259 17.1764 15.7621L22.5208 21.1066L21.1066 22.5208L15.7621 17.1764C12.4259 19.8126 7.56983 19.5906 4.48959 16.5104C1.17014 13.191 1.17014 7.80905 4.48959 4.48959ZM11.5 6.5L11.5 9.5H14.5V11.5H11.5V14.5H9.5V11.5H6.5V9.5H9.5L9.5 6.5L11.5 6.5Z"}}]},Pt=S({name:"ZoomInIcon",props:{size:{type:String},onClick:{type:Function}},setup(n,e){var{attrs:t}=e,r=v(()=>n.size),{className:a,style:l}=q(r),m=v(()=>["t-icon","t-icon-zoom-in",a.value]),s=v(()=>ke(ke({},l.value),t.style)),u=v(()=>({class:m.value,style:s.value,onClick:f=>{var c;return(c=n.onClick)===null||c===void 0?void 0:c.call(n,{e:f})}}));return()=>Q(xt,u.value)}});const jt=Pt;function Me(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Re(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Me(Object(t),!0).forEach(function(r){ee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Me(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var kt={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15.0962 5.90381C12.5578 3.3654 8.44221 3.3654 5.90381 5.90381C3.3654 8.44221 3.3654 12.5578 5.90381 15.0962C8.44221 17.6346 12.5578 17.6346 15.0962 15.0962C17.6346 12.5578 17.6346 8.44221 15.0962 5.90381ZM4.48959 4.48959C7.80905 1.17014 13.191 1.17014 16.5104 4.48959C19.5906 7.56983 19.8126 12.4259 17.1764 15.7621L22.5208 21.1066L21.1066 22.5208L15.7621 17.1764C12.4259 19.8126 7.56983 19.5906 4.48959 16.5104C1.17014 13.191 1.17014 7.80905 4.48959 4.48959ZM6.5 11.5V9.5L14.5 9.5V11.5L6.5 11.5Z"}}]},Mt=S({name:"ZoomOutIcon",props:{size:{type:String},onClick:{type:Function}},setup(n,e){var{attrs:t}=e,r=v(()=>n.size),{className:a,style:l}=q(r),m=v(()=>["t-icon","t-icon-zoom-out",a.value]),s=v(()=>Re(Re({},l.value),t.style)),u=v(()=>({class:m.value,style:s.value,onClick:f=>{var c;return(c=n.onClick)===null||c===void 0?void 0:c.call(n,{e:f})}}));return()=>Q(kt,u.value)}});const Rt=Mt;/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */function De(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Dt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?De(Object(t),!0).forEach(function(r){N(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):De(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Vt(n){var e=I(n),t=function(l){var m=l.pageX,s=l.pageY,u=e.value,f=u.translateX,c=u.translateY,p=function(D){var h=D.pageX,k=D.pageY;e.value={translateX:f+h-m,translateY:c+k-s}},_=function(){document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",_)},r=function(){e.value=Dt({},n)};return{transform:e,mouseDownHandler:t,resetTransform:r}}function Ht(){var n=I(1),e=function(){n.value*=-1},t=function(){n.value=1};return{mirror:n,onMirror:e,resetMirror:t}}function Lt(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{max:2,min:.5,step:.2},e=n.max,t=n.min,r=n.step,a=n.defaultScale,l=I(a??1),m=be(function(){var c=vt(l.value,r);f(c)},50),s=be(function(){var c=mt(l.value,r);f(c)},50),u=function(){l.value=a??1},f=function(p){var _=p;p<t&&(_=t),p>e&&(_=e),l.value=_};return se(function(){return n},function(){return u()}),{scale:l,onZoomIn:m,onZoomOut:s,resetScale:u}}function Zt(){var n=I(0),e=90,t=function(){n.value+=e},r=function(){n.value=0};return{rotate:n,onRotate:t,resetRotate:r}}/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Ze=S({name:"TImageItem",props:{rotate:Number,scale:Number,mirror:Number,src:[String,Object],placementSrc:[String,Object],isSvg:Boolean,imageReferrerpolicy:String},setup:function(e){var t=He(e),r=t.src,a=t.placementSrc,l=t.isSvg,m=A(),s=I(!1),u=I(!1),f=Vt({translateX:0,translateY:0}),c=f.transform,p=f.mouseDownHandler,_=Le("imageViewer"),U=_.globalConfig,D=U.value.errorText,h=I(),k=v(function(){return{transform:"rotate(".concat(e.rotate,"deg) scale(").concat(e.scale,")"),display:!e.placementSrc||u.value?"block":"none"}}),le=v(function(){return{transform:"rotate(".concat(e.rotate,"deg) scale(").concat(e.scale,")"),display:u.value?"none":"block"}}),te=v(function(){var O=c.value,g=O.translateX,$=O.translateY;return{transform:"translate(".concat(g,"px, ").concat($,"px) scale(").concat(e.mirror,", 1)")}}),M=function(){s.value=!1,u.value=!1,l.value&&X(x.value)},X=function(){var O=he(oe.mark(function g($){var V,H,W,B,L,w,y,R,re,T,P,G;return oe.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=1,fetch($);case 1:if(H=C.sent,H.ok){C.next=2;break}throw s.value=!0,new Error("Failed to fetch SVG: ".concat(H.statusText));case 2:return C.next=3,H.text();case 3:W=C.sent,B=h.value,B.innerHTML="",(V=B.classList)===null||V===void 0||V.add("".concat(m.value,"-image-viewer__modal-image-svg")),L=B.attachShadow({mode:"closed"}),w=document.createElement("div"),w.style.background="var(--td-bg-color-container)",w.style.padding="4px",w.style.borderRadius="4px",w.style.maxHeight="100%",w.style.maxWidth="100%",w.style.boxSizing="border-box",w.style.height="auto",w.innerHTML=W,L.appendChild(w),y=w.querySelector("svg"),y&&(R=y.getAttribute("viewBox"),R?(re=R.split(/[\s\,]/).filter(function(Z){return Z}).map(parseFloat),T=re[2],w.style.width="".concat(T,"px")):(P=y.getBBox(),G="".concat(P.x," ").concat(P.y," ").concat(P.width," ").concat(P.height),y.setAttribute("viewBox",G),w.style.width="".concat(P.width,"px")),y.style.maxHeight="100%",y.style.maxWidth="100%",y.style.height="auto",y.style.display="block",y.style.lineHeight="normal"),u.value=!0;case 4:case"end":return C.stop()}},g)}));return function($){return O.apply(this,arguments)}}(),Y=ce(r),x=Y.previewUrl,ne=ce(a),K=ne.previewUrl;return se([x,K],function(){M()}),Ke(he(oe.mark(function O(){return oe.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!l.value){g.next=1;break}return g.next=1,X(x.value);case 1:case"end":return g.stop()}},O)}))),function(){return o("div",{class:"".concat(m.value,"-image-viewer__modal-pic")},[o("div",{class:"".concat(m.value,"-image-viewer__modal-box"),style:te.value},[s.value&&o("div",{class:"".concat(m.value,"-image-viewer__img-error")},[o("div",{class:"".concat(m.value,"-image-viewer__img-error-content")},[o(ut,{size:"4em"},null),o("div",{class:"".concat(m.value,"-image-viewer__img-error-text")},[D])])]),!s.value&&!!e.placementSrc&&K.value&&o("img",{class:"".concat(m.value,"-image-viewer__modal-image"),onMousedown:function(g){g.stopPropagation(),p(g)},src:K.value,style:le.value,referrerpolicy:e.imageReferrerpolicy,alt:"image",draggable:"false"},null),!s.value&&x.value&&!l.value&&o("img",{class:"".concat(m.value,"-image-viewer__modal-image"),onMousedown:function(g){g.stopPropagation(),p(g)},src:x.value,onLoad:function(){return u.value=!0},onError:function(){return s.value=!0},style:k.value,referrerpolicy:e.imageReferrerpolicy,alt:"image",draggable:"false"},null),!s.value&&x.value&&l.value&&o("div",{ref:h,class:"".concat(m.value,"-image-viewer__modal-image"),onMousedown:function(g){g.stopPropagation(),p(g)},"data-alt":"svg",style:k.value,draggable:"false"},null)])])}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var j=S({name:"TImageModalIcon",props:{disabled:Boolean,onClick:Function,label:String,icon:Function},setup:function(e){var t=A(),r=ve(),a=v(function(){return["".concat(t.value,"-image-viewer__modal-icon"),N({},"".concat(t.value,"-is-disabled"),e.disabled)]});return function(){return o("div",{class:a.value,onClick:e.onClick},[r("icon"),e.label&&o("span",{class:"".concat(t.value,"-image-viewer__modal-icon-label")},[e.label])])}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var z={attach:{type:[String,Function],default:"body"},closeBtn:{type:[Boolean,Function],default:!0},closeOnEscKeydown:{type:Boolean,default:!0},closeOnOverlay:Boolean,draggable:{type:Boolean,default:void 0},imageReferrerpolicy:{type:String,validator:function(e){return e?["no-referrer","no-referrer-when-downgrade","origin","origin-when-cross-origin","same-origin","strict-origin","strict-origin-when-cross-origin","unsafe-url"].includes(e):!0}},imageScale:{type:Object},images:{type:Array,default:function(){return[]}},index:{type:Number,default:void 0},defaultIndex:{type:Number,default:0},mode:{type:String,default:"modal",validator:function(e){return e?["modal","modeless"].includes(e):!0}},navigationArrow:{type:[Boolean,Function],default:!0},showOverlay:{type:Boolean,default:void 0},title:{type:[String,Function]},trigger:{type:[String,Function]},viewerScale:{type:Object},visible:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultVisible:Boolean,zIndex:{type:Number},onClose:Function,onDownload:Function,onIndexChange:Function};/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var ze=S({name:"TImageViewerUtils",props:{scale:Number,onRotate:Function,onZoomIn:Function,onZoomOut:Function,onMirror:Function,onReset:Function,onDownload:Function,currentImage:{type:Object,default:function(){return{}}}},setup:function(e){var t=A(),r=v(function(){return e.currentImage.mainImage}),a=ce(r),l=a.previewUrl,m=Le("imageViewer"),s=m.globalConfig;return function(){return o("div",{class:"".concat(t.value,"-image-viewer__utils")},[o("div",{class:"".concat(t.value,"-image-viewer__utils-content")},[o(ue,{overlayClassName:"".concat(t.value,"-image-viewer__utils--tip"),content:s.value.mirrorTipText,destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default"},{default:function(){return[o(j,{onClick:e.onMirror,icon:function(){return o(_t,{size:"medium"},null)}},null)]}}),o(ue,{overlayClassName:"".concat(t.value,"-image-viewer__utils--tip"),content:s.value.rotateTipText,destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default"},{default:function(){return[o(j,{onClick:e.onRotate,icon:function(){return o(St,{size:"medium"},null)}},null)]}}),o(j,{icon:function(){return o(Rt,{size:"medium"},null)},onClick:e.onZoomOut},null),o(j,{class:"".concat(t.value,"-image-viewer__utils-scale"),size:"medium",label:"".concat(dt(String(e.scale*100)),"%")},null),o(j,{icon:function(){return o(jt,{size:"medium"},null)},onClick:e.onZoomIn},null),o(ue,{overlayClassName:"".concat(t.value,"-image-viewer__utils--tip"),content:s.value.originalSizeTipText,destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default"},{default:function(){return[o("div",{class:"".concat(t.value,"-image-viewer__modal-icon")},[o(j,{icon:function(){return o(ct,{size:"medium"},null)},onClick:e.onReset},null)])]}}),e.currentImage.download&&o(j,{icon:function(){return o(bt,{size:"medium"},null)},onClick:function(){e.onDownload(l.value)}},null)])])}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var zt=S({name:"TImageViewerModal",props:{zIndex:Number,visible:Boolean,index:Number,images:z.images,scale:Number,rotate:Number,mirror:Number,title:z.title,currentImage:{type:Object,default:function(){return{}}},onRotate:Function,onZoomIn:Function,onZoomOut:Function,onMirror:Function,onReset:Function,onClose:z.onClose,onDownload:z.onDownload,draggable:{type:Boolean,default:!0},viewerScale:{type:Object,default:function(){return{}}},showOverlay:Boolean,closeBtn:z.closeBtn,imageReferrerpolicy:z.imageReferrerpolicy},setup:function(e){var t=A(),r=ve(),a=v(function(){return{minWidth:e.viewerScale.minWidth,minHeight:e.viewerScale.minHeight}});return function(){return o(gt,{destroyOnClose:!0,attach:"body",onClose:e.onClose,visible:e.visible,placement:"center",mode:"modeless",width:1e3,cancelBtn:null,confirmBtn:null,draggable:e.draggable,zIndex:e.zIndex,showOverlay:e.showOverlay,class:"".concat(t.value,"-image-viewer__dialog"),header:r("title",""),footer:function(){return o("div",{class:"".concat(t.value,"-image-viewer-mini__footer")},[o(ze,{onZoomIn:e.onZoomIn,onZoomOut:e.onZoomOut,scale:e.scale,currentImage:e.currentImage,onRotate:e.onRotate,onMirror:e.onMirror,onReset:e.onReset,onDownload:e.onDownload},null)])}},{default:function(){return[o("div",{class:"".concat(t.value,"-image-viewer-mini__content"),style:a.value},[o(Ze,{rotate:e.rotate,scale:e.scale,mirror:e.mirror,src:e.currentImage.mainImage,placementSrc:e.currentImage.thumbnail,isSvg:e.currentImage.isSvg,imageReferrerpolicy:e.imageReferrerpolicy},null)])]}})}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var E=function(n){return n.left="ArrowLeft",n.up="ArrowUp",n.right="ArrowRight",n.down="ArrowDown",n.esc="Escape",n}(E||{});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */function Ve(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function $t(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ve(Object(t),!0).forEach(function(r){N(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ve(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Bt=function(e){var t,r,a,l=new Image,m=(e==null||(t=e.split)===null||t===void 0||(t=t.call(e,"?"))===null||t===void 0||(t=t[0])===null||t===void 0||(r=t.split)===null||r===void 0||(r=r.call(t,"#"))===null||r===void 0||(r=r[0])===null||r===void 0||(a=r.split)===null||a===void 0?void 0:a.call(r,"/").pop())||Math.random().toString(32).slice(2);l.setAttribute("crossOrigin","anonymous"),l.onload=function(){var s=document.createElement("canvas");s.width=l.width,s.height=l.height;var u=s.getContext("2d");u.drawImage(l,0,0,l.width,l.height),s.toBlob(function(f){var c=URL.createObjectURL(f),p=document.createElement("a");p.download=m,p.href=c,p.click(),p.remove(),URL.revokeObjectURL(c)})},l.src=e},Tt=function(e){return!!e&&!tt(e)&&!(e instanceof File)},Ft=function(e){return et(e)?e.map(function(t){return Tt(t)?$t({download:!0,thumbnail:t.mainImage},t):{mainImage:t,thumbnail:t,download:!0}}):[]},Et=function(e){return e.showOverlay!==void 0?e.showOverlay:e.mode==="modal"};/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var Nt=S({name:"TImageViewer",props:z,setup:function(e){var t,r=A(),a=A("image-viewer"),l=ve(),m=I(!0),s=v(function(){return Et(e)}),u=He(e),f=u.index,c=u.visible,p=u.modelValue,_=u.imageReferrerpolicy,U=nt(f,(t=e.defaultIndex)!==null&&t!==void 0?t:0,e.onIndexChange,"index"),D=Oe(U,2),h=D[0],k=D[1],le=rt(c,p,e.defaultVisible,function(){},"visible"),te=Oe(le,2),M=te[0],X=te[1],Y=I(!0),x=I(),ne=at(function(){return e.attach}),K=v(function(){return[a.value,"".concat(a.value,"-preview-image"),N({},"".concat(r.value,"-is-hide"),!M.value)]}),O=v(function(){return["".concat(r.value,"-image-viewer__modal-header"),N({},"".concat(r.value,"-is-show"),m.value)]}),g=v(function(){var d;return(d=e.zIndex)!==null&&d!==void 0?d:2600}),$=function(){m.value=!m.value},V=Ht(),H=V.mirror,W=V.onMirror,B=V.resetMirror,L=Lt(e.imageScale),w=L.scale,y=L.onZoomIn,R=L.onZoomOut,re=L.resetScale,T=Zt(),P=T.rotate,G=T.onRotate,C=T.resetRotate,Z=function(){B(),re(),C()},F=v(function(){return Ft(e.images)}),J=v(function(){var d;return(d=F.value[h.value])!==null&&d!==void 0?d:{mainImage:""}}),$e=ot("dialog",{visible:M}),Be=$e.isTopInteractivePopup,me=function(){var i=h.value-1;Z(),k(i<0?0:i,{trigger:"prev"})},de=function(){var i=h.value+1;Z(),k(i>=F.value.length?h.value:i,{trigger:"next"})},Te=function(i){k(i,{trigger:"current"})},fe=function(i){e.onDownload?e.onDownload(i):Bt(i)},ge=function(){X(!0)},ae=function(i){var b;X(!1),(b=e.onClose)===null||b===void 0||b.call(e,i)},Fe=function(i){ae({e:i,trigger:"close-btn"})},Ee=function(i){e.closeOnOverlay&&ae({e:i,trigger:"overlay"})},Ne=function(i){switch(i.stopPropagation(),i.code){case E.left:me();break;case E.right:de();break;case E.up:y();break;case E.down:R();break;case E.esc:e.closeOnEscKeydown&&Be()&&ae({e:i,trigger:"esc"});break}},pe=I();se(function(){return M.value},function(d){clearTimeout(x.value),d?(Y.value=!1,We().then(function(){var i,b;(i=pe.value)===null||i===void 0||(b=i.focus)===null||b===void 0||b.call(i)}),Z()):x.value=setTimeout(function(){Y.value=!0},200)});var Ae=function(i){i.preventDefault();var b=i.deltaY;b>0?R():y()},Ue=v(function(){return{transform:"translateX(calc(-".concat(h.value," * (40px / 9 * 16 + 4px)))")}}),Xe=function(){return o("div",{class:O.value},[o(j,{icon:function(){return o(ft,null,null)},class:"".concat(a.value,"__header-pre-bt"),onClick:$},null),o("div",{class:"".concat(a.value,"__header-prev")},[o("div",{class:"".concat(a.value,"__header-trans"),style:Ue.value},[F.value.map(function(i,b){return o("div",{key:b,class:["".concat(a.value,"__header-box"),N({},"".concat(r.value,"-is-active"),b===h.value)]},[o(st,{src:i.thumbnail||i.mainImage,error:"",class:"".concat(a.value,"__header-img"),onClick:function(){return Te(b)}},null)])})])])])},we=function(i){var b=i==="prev"?0:180,ye=l("navigationArrow",o(pt,{style:{transform:"rotate(".concat(b,"deg)")},size:"24px"},null));return o(j,{class:"".concat(a.value,"__modal-").concat(i,"-bt"),onClick:i==="prev"?me:de,icon:function(){return ye}},null)},Ye=function(){if(e.closeBtn!==!1)return o("div",{class:["".concat(a.value,"__modal-icon"),"".concat(a.value,"__modal-close-bt")],onClick:Fe},[l("closeBtn",o(lt,{size:"24px"},null))])};return function(){return e.mode==="modeless"?o(ie,null,[l("trigger",{params:{open:ge}}),o(zt,{zIndex:g.value,visible:M.value,index:h.value,images:F.value,scale:w.value,rotate:P.value,mirror:H.value,currentImage:J.value,onRotate:G,onZoomIn:y,onZoomOut:R,onMirror:W,onReset:Z,onClose:ae,onDownload:fe,draggable:e.draggable,showOverlay:s.value,title:e.title,imageReferrerpolicy:_.value},null)]):o(ie,null,[l("trigger",{params:{open:ge}}),o(Ge,{disabled:!e.attach||!ne.value,to:ne.value},{default:function(){return[o(Je,null,{default:function(){return[(M.value||!Y.value)&&qe(o("div",{ref:pe,class:K.value,style:{zIndex:g.value},onWheel:Ae,tabindex:-1,onKeydown:Ne},[!!s.value&&o("div",{class:"".concat(a.value,"__modal-mask"),onClick:Ee},null),F.value.length>1&&o(ie,null,[Xe(),o("div",{class:"".concat(a.value,"__modal-index")},[e.title&&l("title"),"".concat(h.value+1,"/").concat(F.value.length)]),we("prev"),we("next")]),Ye(),o(ze,{onZoomIn:y,onZoomOut:R,onMirror:W,onReset:Z,onRotate:G,onDownload:fe,scale:w.value,currentImage:J.value},null),o(Ze,{scale:w.value,rotate:P.value,mirror:H.value,src:J.value.mainImage,placementSrc:J.value.thumbnail,isSvg:J.value.isSvg,imageReferrerpolicy:_.value},null)]),[[Qe,M.value]])]}})]}})])}}});/**
 * tdesign v1.16.1
 * (c) 2025 tdesign
 * @license MIT
 */var qt=it(Nt);export{qt as I};
