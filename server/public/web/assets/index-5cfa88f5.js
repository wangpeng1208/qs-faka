import{d as F,r as a,b as N,l as w,m as b,a0 as r,M as o,W as t,G as z,a4 as A,_ as M,a3 as y,X as R,a2 as T}from"./vue-51c2f431.js";import{u as U,a as D,M as p,_ as q}from"./index-ebc513dd.js";import{I as E}from"./index-69f74367.js";import{I as L}from"./index-15716071.js";import{F as P,a as $}from"./index-3f5d4a71.js";import{B as G}from"./index-3b3d7414.js";import"./libs-1cd01688.js";import"./plugins-ccea0c8f.js";import"./others-24e1b5c5.js";import"./echarts-a13411ed.js";import"./dep-cc1906a8-b100bfdb.js";import"./index-9aa638bc.js";import"./useLengthLimit-207427cf.js";import"./browse-ff8f6fe8.js";import"./close-circle-filled-9eb22673.js";import"./dep-0742ae64-e2730b23.js";import"./form-model-7023f79a.js";import"./_baseSet-75352e55.js";import"./isNil-c75b1b34.js";const O={class:"login-wrapper"},W={class:"h-full"},X={class:"login-container"},j={class:"copyright"},H=F({__name:"index",setup(J){const d=T(),_=U();(()=>{_.accessToken&&(p.success("已登录, 正在跳转到工作台..."),d.push({path:"/admin/workbench"}))})();const h={username:"",password:""},x={username:[{required:!0,message:"用户名必填",type:"error"}],password:[{required:!0,message:"密码必填",type:"error"}]},f=a("password"),k=a(),s=a({...h}),n=a(!1),m=a("登录"),i=a(!1),I=async v=>{if(v.validateResult===!0){m.value="登录中...",i.value=!0;try{await _.login(s.value),p.success("登陆成功"),d.push({path:"/admin/workbench"}),i.value=!1}catch(e){m.value="登录",i.value=!1,p.error(e.msg)}}},V=D(),S=N(()=>V.config.site_info_copyright);return(v,e)=>{const u=E,g=L,c=P,C=G,B=$;return w(),b("div",O,[r("div",W,[r("div",X,[e[3]||(e[3]=r("div",{class:"title-container"},[r("h1",{class:"title margin-no"},"管理员登录")],-1)),o(B,{ref_key:"form",ref:k,class:R(["item-container",`login-${f.value}`]),data:s.value,rules:x,"label-width":"0",onSubmit:I},{default:t(()=>[f.value=="password"?(w(),b(z,{key:0},[o(c,{name:"username"},{default:t(()=>[o(g,{modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.username=l),size:"large",placeholder:"请输入账号/手机号/邮箱"},{"prefix-icon":t(()=>[o(u,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),o(c,{name:"password"},{default:t(()=>[o(g,{modelValue:s.value.password,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.password=l),size:"large",type:n.value?"text":"password",clearable:"",placeholder:"请输入登录密码"},{"prefix-icon":t(()=>[o(u,{name:"lock-on"})]),"suffix-icon":t(()=>[o(u,{name:n.value?"browse":"browse-off",onClick:e[1]||(e[1]=l=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1})],64)):A("",!0),o(c,{class:"btn-container"},{default:t(()=>[o(C,{block:"",type:"submit",size:"large",disabled:i.value},{default:t(()=>[M(y(m.value),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["class","data"])])]),r("footer",j,y(S.value),1)])}}});const ve=q(H,[["__scopeId","data-v-4566b1a0"]]);export{ve as default};
