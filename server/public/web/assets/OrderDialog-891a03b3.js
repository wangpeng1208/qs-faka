import{d as E}from"./shop-ed1e6a9f.js";import{e as L}from"./index-c2baa02d.js";import{M as R,c as U,_ as $}from"./index-1ae915eb.js";import{f as W}from"./date-35f9fa82.js";import{d as j,r as i,w as F,l as d,V as G,W as l,M as n,a0 as o,u,_ as r,a3 as a,af as H,m,a4 as p}from"./vue-d500b9b9.js";import{B as J}from"./index-bfd2121f.js";import{S as K}from"./index-898a5e08.js";import{T as Q}from"./index-5571e347.js";import{C as X,R as Y}from"./index-c20d3ea7.js";import{L as Z}from"./index-dd29d0a0.js";import{c as ee}from"./index-ea41187d.js";import{C as oe}from"./index-37731a62.js";import{A as te}from"./index-044da480.js";import{D as le}from"./index-6889856c.js";import ne from"./creditcard-fdd74915.js";import ae from"./order-ascending-4879d46c.js";import re from"./order-descending-875262d7.js";import"./libs-035f127b.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./dep-34b004f3-3e1a5725.js";import"./dialog-b324d954.js";import"./dep-cc1906a8-b100bfdb.js";import"./dep-581cd4f1-74792024.js";import"./omit-a270a1e2.js";import"./index-2132cfb3.js";const se={class:"flex-container"},ie={class:"order-title"},de={class:"order-copy"},ue={key:0,class:"content"},me={key:0,class:"order-item flex-row"},pe={class:"order-item flex-row"},_e={key:0},ce={class:"order-item flex-row"},fe={class:"order-item flex-row"},ve={key:1,class:"order-item flex-row"},ge={key:2,class:"order-item flex-row"},ye={key:3,class:"order-item flex-row"},xe={class:"order-item flex-row"},ke={name:"OrderDialog"},we=j({...ke,setup(be,{expose:b}){const[v,C,T]=L(),c=i(!0),B=()=>{c.value=!c.value},g=i(!1),y=i(!1),t=i({trade_no:"",goods_name:"",create_time:"",goods_price_old:"",goods_price:"",quantity:"",paytype:{title:""},coupon_price:"",sms_price:"",total_price:"",fee_player:"",total_product_price:"",fee:"",order_auto_close_time:"",purchase_agreement:""});b({init:s=>{t.value=s,y.value=!0;const e=new Date().getTime()+s.order_auto_close_time*1e3;C(e),x.value={content:"立即支付",theme:"primary",loading:!1}}});const x=i({content:"去支付",theme:"primary",loading:!1}),D=i(!1),V=()=>{var e;if(!g.value){R.error("请先阅读并同意购卡协议");return}const s={trade_no:(e=t.value)==null?void 0:e.trade_no};D.value=!0,x.value={content:"支付中..",theme:"primary",loading:!0},window.open(E(s))},I=i({content:"取消",theme:"default"}),O=()=>{T()};return F(v,s=>{var e;s==="已结束"&&(v.value=`如果已经支付完成，请复制订单号及时取货，订单号为：${(e=t.value)==null?void 0:e.trade_no}`)}),(s,e)=>{const k=J,z=K,N=Q,w=X,S=Y,A=Z,M=ee,P=oe,h=te,q=le;return d(),G(q,{visible:y.value,"onUpdate:visible":e[2]||(e[2]=_=>y.value=_),width:"500","close-on-overlay-click":!1,"close-btn":!1,"confirm-btn":x.value,"cancel-btn":I.value,"on-cancel":O,"on-confirm":V},{default:l(()=>[n(P,{bordered:!1},{title:l(()=>[o("div",se,[n(k,{shape:"circle",theme:"primary",size:"large"},{icon:l(()=>[n(u(ne))]),_:1}),n(z,{class:"middle-item",direction:"vertical",size:"small"},{default:l(()=>[o("span",ie,[e[3]||(e[3]=o("label",null,"订单号:",-1)),r(" "+a(t.value.trade_no),1)]),e[4]||(e[4]=o("div",{class:"remark"},"请牢记订单号，订单查询与订单投诉时使用",-1))]),_:1})])]),actions:l(()=>[o("span",de,[n(k,{variant:"outline",theme:"primary",size:"small",shape:"round",onClick:e[0]||(e[0]=_=>u(U)(t.value.trade_no))},{default:l(()=>[...e[5]||(e[5]=[r(" 复制订单号 ",-1)])]),_:1})])]),default:l(()=>{var _;return[n(S,null,{default:l(()=>[n(w,{flex:"auto"},{default:l(()=>[n(N,null,{default:l(()=>[r(a(t.value.goods_name),1)]),_:1})]),_:1}),n(w,{flex:"none"},{default:l(()=>{var f;return[r(" 订单金额：￥"+a((f=t.value)==null?void 0:f.total_price),1)]}),_:1})]),_:1}),n(k,{block:"",variant:"outline",class:"orderButtonToggle",onClick:B},H({default:l(()=>[r(" 账单明细, 下单时间 "+a(u(W)(t.value.create_time)),1)]),_:2},[c.value?{name:"icon",fn:l(()=>[n(u(ae))]),key:"0"}:{name:"icon",fn:l(()=>[n(u(re))]),key:"1"}]),1024),c.value?(d(),m("div",ue,[t.value.goods_price_old!=t.value.goods_price?(d(),m("div",me,[e[6]||(e[6]=o("span",null,"商品原价",-1)),o("span",null,"￥"+a(t.value.goods_price_old),1)])):p("",!0),o("div",pe,[o("span",null,[e[7]||(e[7]=r("商品单价 ",-1)),t.value.goods_price_old!=t.value.goods_price?(d(),m("span",_e," （批发优惠单价）")):p("",!0)]),o("span",null,"￥"+a(t.value.goods_price),1)]),o("div",ce,[e[8]||(e[8]=o("span",null,"购买数量",-1)),o("span",null,"* "+a(t.value.quantity),1)]),o("div",fe,[e[9]||(e[9]=o("span",null,"支付方式",-1)),o("span",null,a(t.value.paytype.title),1)]),t.value.coupon_price?(d(),m("div",ve,[e[10]||(e[10]=o("span",null,"优惠金额",-1)),o("span",null,"- ￥"+a(t.value.coupon_price),1)])):p("",!0),t.value.sms_price?(d(),m("div",ge,[e[11]||(e[11]=o("span",null,"短信费用",-1)),o("span",null,"+ ￥"+a(t.value.sms_price),1)])):p("",!0),t.value.fee_player==2?(d(),m("div",ye,[e[12]||(e[12]=o("span",null,"交易手续费(买家承担)",-1)),o("span",null,"+ ￥"+a(t.value.fee),1)])):p("",!0),o("div",xe,[e[13]||(e[13]=o("span",null,"订单原价",-1)),o("span",null,"+ ￥"+a((_=t.value)==null?void 0:_.total_product_price),1)])])):p("",!0),n(M,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=f=>g.value=f),style:{float:"right"}},{default:l(()=>[e[15]||(e[15]=r(" 我已阅读并同意 ",-1)),n(A,{theme:"primary",size:"small",target:"_blank",href:t.value.purchase_agreement},{default:l(()=>[...e[14]||(e[14]=[r("购卡协议",-1)])]),_:1},8,["href"])]),_:1},8,["modelValue"])]}),_:1}),n(h,{style:{"margin-top":"20px"}},{default:l(()=>[r(" 请在"+a(t.value.order_auto_close_time/60)+"分钟内完成订单 ",1),e[16]||(e[16]=o("br",null,null,-1)),r(" "+a(u(v)),1)]),_:1})]),_:1},8,["visible","confirm-btn","cancel-btn"])}}});const Xe=$(we,[["__scopeId","data-v-fd5ed89c"]]);export{Xe as default};
