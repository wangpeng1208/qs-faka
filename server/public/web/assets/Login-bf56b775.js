import{d as S,r as s,a2 as D,l as d,V as b,W as a,m as w,G as V,M as e,u as v,_ as C,a3 as k,a4 as M,X as N}from"./vue-d500b9b9.js";import{u as R}from"./index-c2baa02d.js";import{bH as A,M as h,_ as T}from"./index-5ae314bf.js";import{I as $}from"./index-3d8f650a.js";import{I as E}from"./index-9b4540ef.js";import{F as P,a as G}from"./index-9de6e4fb.js";import{B as H}from"./index-227fbf78.js";import"./libs-035f127b.js";import"./plugins-f7b3b094.js";import"./others-381f73b9.js";import"./echarts-415f4206.js";import"./dep-cc1906a8-b100bfdb.js";import"./index-9034b695.js";import"./useLengthLimit-bf57acc2.js";import"./browse-50d5b530.js";import"./close-circle-filled-8b5b4fa1.js";import"./dep-0742ae64-334d1564.js";import"./form-model-962c4be8.js";import"./_baseSet-6774bbcb.js";import"./isNil-c75b1b34.js";const O=S({__name:"Login",setup(W){const x=A(),I={phone:"",username:"",verifyCode:"",checked:!1,password:""},z={phone:[{required:!0,message:"手机号必填",type:"error"}],username:[{required:!0,message:"",type:"error"}],password:[{required:!0,message:"密码必填",type:"error"}],verifyCode:[{required:!0,message:"验证码必填",type:"error"}]},p=s("password"),y=s(),t=s({...I}),n=s(!1),[c,U]=R(),q=D(),B=()=>{y.value.validate({fields:["phone"]}).then(u=>{u===!0&&U()})},f=s("登录"),_=s(!1),F=async u=>{if(u.validateResult===!0){f.value="登录中...",_.value=!0;const o=await x.login(t.value);o.code===1?(h.success("登陆成功"),q.push({path:"/merchant/workbench"})):(f.value="登录",h.error(o.msg),_.value=!1)}};return(u,o)=>{const m=$,i=E,l=P,g=H,L=G;return d(),b(L,{ref_key:"form",ref:y,class:N(["item-container",`login-${p.value}`]),data:t.value,rules:z,"label-width":"0",onSubmit:F},{default:a(()=>[p.value=="password"?(d(),w(V,{key:0},[e(l,{name:"username"},{default:a(()=>[e(i,{modelValue:t.value.username,"onUpdate:modelValue":o[0]||(o[0]=r=>t.value.username=r),size:"large",placeholder:"请输入账号/手机号/邮箱"},{"prefix-icon":a(()=>[e(m,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),e(l,{name:"password"},{default:a(()=>[e(i,{modelValue:t.value.password,"onUpdate:modelValue":o[2]||(o[2]=r=>t.value.password=r),size:"large",type:n.value?"text":"password",clearable:"",placeholder:"请输入登录密码"},{"prefix-icon":a(()=>[e(m,{name:"lock-on"})]),"suffix-icon":a(()=>[e(m,{name:n.value?"browse":"browse-off",onClick:o[1]||(o[1]=r=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1})],64)):(d(),w(V,{key:1},[e(l,{name:"phone"},{default:a(()=>[e(i,{modelValue:t.value.phone,"onUpdate:modelValue":o[3]||(o[3]=r=>t.value.phone=r),size:"large",placeholder:"请输入手机号码"},{"prefix-icon":a(()=>[e(m,{name:"mobile"})]),_:1},8,["modelValue"])]),_:1}),e(l,{class:"verification-code",name:"verifyCode"},{default:a(()=>[e(i,{modelValue:t.value.verifyCode,"onUpdate:modelValue":o[4]||(o[4]=r=>t.value.verifyCode=r),size:"large",placeholder:"请输入验证码"},null,8,["modelValue"]),e(g,{variant:"outline",disabled:v(c)>0,onClick:B},{default:a(()=>[C(k(v(c)==0?"发送验证码":`${v(c)}秒后可重发`),1)]),_:1},8,["disabled"])]),_:1})],64)),p.value!=="qrcode"?(d(),b(l,{key:2,class:"btn-container"},{default:a(()=>[e(g,{block:"",size:"large",type:"submit",disabled:_.value},{default:a(()=>[C(k(f.value),1)]),_:1},8,["disabled"])]),_:1})):M("",!0)]),_:1},8,["class","data"])}}});const ce=T(O,[["__scopeId","data-v-75dd084f"]]);export{ce as default};
